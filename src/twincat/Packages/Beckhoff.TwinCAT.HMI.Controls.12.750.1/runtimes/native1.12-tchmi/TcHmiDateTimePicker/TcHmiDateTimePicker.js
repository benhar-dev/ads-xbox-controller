var TcHmi;!function(TcHmi){let Controls;!function(Controls){let Beckhoff;!function(Beckhoff){class TcHmiDateTimePicker extends TcHmi.Controls.System.TcHmiControl{constructor(element,pcElement,attrs){super(element,pcElement,attrs),this.__onMousedownHourUpDestroyEvent=null,this.__onMousedownHourDownDestroyEvent=null,this.__onMousedownMinuteUpDestroyEvent=null,this.__onMousedownMinuteDownDestroyEvent=null,this.__onMousedownSecondUpDestroyEvent=null,this.__onMousedownSecondDownDestroyEvent=null,this.__onMousedownMillisecondUpDestroyEvent=null,this.__onMousedownMillisecondDownDestroyEvent=null,this.__onPressedOkDestroyEvent=null,this.__onPressedCancelDestroyEvent=null,this.__onTextChangedHourDestroyEvent=null,this.__onTextChangedMinuteDestroyEvent=null,this.__onTextChangedSecondDestroyEvent=null,this.__onTextChangedMillisecondDestroyEvent=null,this.__onUserInteractionFinishedHourDestroyEvent=null,this.__onUserInteractionFinishedMinuteDestroyEvent=null,this.__onUserInteractionFinishedSecondDestroyEvent=null,this.__onUserInteractionFinishedMillisecondDestroyEvent=null,this.__baseControls={},this.__localizationReader=void 0,this.__destroyLocalizationWatch=null,this.__internalDateObject={year:0,month:0,day:0,hour:0,minute:0,second:0,millisecond:0},this.__isPressedTimeButtons=!1,this.__intervalTimerTimeButtons=null,this.__isPressedCalendar=!1,this.__intervalTimerCalendar=0,this.__utcOffset=0,this.__mousedownHandler=this.__onMousedown(),this.__mousedownCalendarHandler=this.__onMousedownCalendar(),this.__mouseupHandler=this.__onMouseup(),this.__focusoutHandler=this.__onFocusOut(),this.__keypressHandler=this.__onKeyPress()}__previnit(){if(this.__elementTemplateRoot=this.__element[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template")[0],!this.__elementTemplateRoot)throw new Error("Invalid Template.html");this.__elementDTPTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template-overlay tchmi-box"></div>');let elementSelectedTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-selected-area-template tchmi-box"></div>'),dateValueTextblock=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextblock",this.__id+"_dateValue",{"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-text-vertical-alignment":"Center","data-tchmi-text-font-size":15,"data-tchmi-text":TcHmi.Localization.formatDate(new Date(0))},this);if(void 0===dateValueTextblock)throw new Error("Needed Textblock could not be instantiated");dateValueTextblock.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template-value","tchmi-date-time-picker-template-value"),this.__baseControls[this.__id+"_dateValue"]=dateValueTextblock,elementSelectedTemplate.append(dateValueTextblock.getElement()[0]);let choiceArea=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-choice-area-template"></div>');this.__elementCalendarTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template tchmi-box"></div>'),this.__elementCalendarTemplate.append(this.createCalendar(1970,1,1)),this.__elementTimeAndButtonTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-and-button-area-template"></div>');let timeTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-area-template tchmi-box"></div>');timeTemplate.append(this.createTime(0,0,0,0)),this.__elementTimeAndButtonTemplate.append(timeTemplate);let buttonParentTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-button-area-template tchmi-box"></div>');this.__elementButtonTemplate=$('<div class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-button-template"></div>')[0];let okButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_okButton",{"data-tchmi-text":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiDateTimePicker::Button_Text_Ok%/l%"},this);if(void 0===okButton)throw new Error("Needed Button could not be instantiated");okButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template-action-button","tchmi-date-time-picker-template-action-button"),okButton.getElement()[0].style.gridColumn="2",this.__elementButtonTemplate.append(okButton.getElement()[0]),this.__baseControls[this.__id+"_okButton"]=okButton;let cancelButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_cancelButton",{"data-tchmi-text":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiDateTimePicker::Button_Text_Cancel%/l%"},this);if(void 0===cancelButton)throw new Error("Needed Button could not be instantiated");cancelButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template-action-button","tchmi-date-time-picker-template-action-button"),cancelButton.getElement()[0].style.gridColumn="3",this.__elementButtonTemplate.append(cancelButton.getElement()[0]),this.__baseControls[this.__id+"_cancelButton"]=cancelButton,buttonParentTemplate.append(this.__elementButtonTemplate),this.__elementTimeAndButtonTemplate.append(buttonParentTemplate),choiceArea.append(this.__elementCalendarTemplate),choiceArea.append(this.__elementTimeAndButtonTemplate),this.__elementDTPTemplate.append(elementSelectedTemplate),this.__elementDTPTemplate.append(choiceArea),this.__destroyLocalizationWatch=this.__localization.watch(data=>{data.error===TcHmi.Errors.NONE&&data.reader&&(this.__localizationReader=data.reader,this.__elementCalendarTemplate.empty().append(this.createCalendar(this.__internalDateObject.year,this.__internalDateObject.month,this.__internalDateObject.day)))}),super.__previnit()}__init(){super.__init();const passiveEventOptions={passive:!0,capture:!1};this.__element[0].addEventListener("mousedown",this.__mousedownHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),this.__elementCalendarTemplate[0].addEventListener("mousedown",this.__mousedownCalendarHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),this.__element[0].addEventListener("focusout",this.__focusoutHandler,passiveEventOptions),this.__element[0].addEventListener("keypress",this.__keypressHandler,passiveEventOptions)}__attach(){super.__attach();document.addEventListener("mouseup",this.__mouseupHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1}),this.__onMousedownHourUpDestroyEvent=TcHmi.EventProvider.register(this.__id+"_hourUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownHourDownDestroyEvent=TcHmi.EventProvider.register(this.__id+"_hourDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMinuteUpDestroyEvent=TcHmi.EventProvider.register(this.__id+"_minuteUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMinuteDownDestroyEvent=TcHmi.EventProvider.register(this.__id+"_minuteDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownSecondUpDestroyEvent=TcHmi.EventProvider.register(this.__id+"_secondUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownSecondDownDestroyEvent=TcHmi.EventProvider.register(this.__id+"_secondDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMillisecondUpDestroyEvent=TcHmi.EventProvider.register(this.__id+"_millisecondUpButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onMousedownMillisecondDownDestroyEvent=TcHmi.EventProvider.register(this.__id+"_millisecondDownButton.onMouseDown",this.__onMousedownTimeButtons()),this.__onPressedOkDestroyEvent=TcHmi.EventProvider.register(this.__id+"_okButton.onPressed",this.__onPressed()),this.__onPressedCancelDestroyEvent=TcHmi.EventProvider.register(this.__id+"_cancelButton.onPressed",this.__onPressed()),this.__onTextChangedHourDestroyEvent=TcHmi.EventProvider.register(this.__id+"_hourValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedMinuteDestroyEvent=TcHmi.EventProvider.register(this.__id+"_minuteValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedSecondDestroyEvent=TcHmi.EventProvider.register(this.__id+"_secondValueTextbox.onTextChanged",this.__onTextChanged()),this.__onTextChangedMillisecondDestroyEvent=TcHmi.EventProvider.register(this.__id+"_millisecondValueTextbox.onTextChanged",this.__onTextChanged()),this.__onUserInteractionFinishedHourDestroyEvent=TcHmi.EventProvider.register(this.__id+"_hourValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedMinuteDestroyEvent=TcHmi.EventProvider.register(this.__id+"_minuteValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedSecondDestroyEvent=TcHmi.EventProvider.register(this.__id+"_secondValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedMillisecondDestroyEvent=TcHmi.EventProvider.register(this.__id+"_millisecondValueTextbox.onUserInteractionFinished",this.__onUserInteractionFinished())}__detach(){super.__detach(),null!==this.__onMousedownHourUpDestroyEvent&&(this.__onMousedownHourUpDestroyEvent(),this.__onMousedownHourUpDestroyEvent=null),null!==this.__onMousedownHourDownDestroyEvent&&(this.__onMousedownHourDownDestroyEvent(),this.__onMousedownHourDownDestroyEvent=null),null!==this.__onMousedownMinuteUpDestroyEvent&&(this.__onMousedownMinuteUpDestroyEvent(),this.__onMousedownMinuteUpDestroyEvent=null),null!==this.__onMousedownMinuteDownDestroyEvent&&(this.__onMousedownMinuteDownDestroyEvent(),this.__onMousedownMinuteDownDestroyEvent=null),null!==this.__onMousedownSecondUpDestroyEvent&&(this.__onMousedownSecondUpDestroyEvent(),this.__onMousedownSecondUpDestroyEvent=null),null!==this.__onMousedownSecondDownDestroyEvent&&(this.__onMousedownSecondDownDestroyEvent(),this.__onMousedownSecondDownDestroyEvent=null),null!==this.__onMousedownMillisecondUpDestroyEvent&&(this.__onMousedownMillisecondUpDestroyEvent(),this.__onMousedownMillisecondUpDestroyEvent=null),null!==this.__onMousedownMillisecondDownDestroyEvent&&(this.__onMousedownMillisecondDownDestroyEvent(),this.__onMousedownMillisecondDownDestroyEvent=null),null!==this.__onPressedOkDestroyEvent&&(this.__onPressedOkDestroyEvent(),this.__onPressedOkDestroyEvent=null),null!==this.__onPressedCancelDestroyEvent&&(this.__onPressedCancelDestroyEvent(),this.__onPressedCancelDestroyEvent=null),null!==this.__onTextChangedHourDestroyEvent&&(this.__onTextChangedHourDestroyEvent(),this.__onTextChangedHourDestroyEvent=null),null!==this.__onTextChangedMinuteDestroyEvent&&(this.__onTextChangedMinuteDestroyEvent(),this.__onTextChangedMinuteDestroyEvent=null),null!==this.__onTextChangedSecondDestroyEvent&&(this.__onTextChangedSecondDestroyEvent(),this.__onTextChangedSecondDestroyEvent=null),null!==this.__onTextChangedMillisecondDestroyEvent&&(this.__onTextChangedMillisecondDestroyEvent(),this.__onTextChangedMillisecondDestroyEvent=null),null!==this.__onUserInteractionFinishedHourDestroyEvent&&(this.__onUserInteractionFinishedHourDestroyEvent(),this.__onUserInteractionFinishedHourDestroyEvent=null),null!==this.__onUserInteractionFinishedMinuteDestroyEvent&&(this.__onUserInteractionFinishedMinuteDestroyEvent(),this.__onUserInteractionFinishedMinuteDestroyEvent=null),null!==this.__onUserInteractionFinishedSecondDestroyEvent&&(this.__onUserInteractionFinishedSecondDestroyEvent(),this.__onUserInteractionFinishedSecondDestroyEvent=null),null!==this.__onUserInteractionFinishedMillisecondDestroyEvent&&(this.__onUserInteractionFinishedMillisecondDestroyEvent(),this.__onUserInteractionFinishedMillisecondDestroyEvent=null);document.removeEventListener("mouseup",this.__mouseupHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&{passive:!0,capture:!1})}destroy(){var _a;if(this.__keepAlive)return;this.__intervalTimerCalendar&&(clearInterval(this.__intervalTimerCalendar),this.__intervalTimerCalendar=0);const passiveEventOptions={passive:!0,capture:!1};this.__element[0].removeEventListener("mousedown",this.__mousedownHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),this.__elementCalendarTemplate[0].removeEventListener("mousedown",this.__mousedownCalendarHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),this.__element[0].removeEventListener("focusout",this.__focusoutHandler,passiveEventOptions),this.__element[0].removeEventListener("keypress",this.__keypressHandler,passiveEventOptions),null===(_a=this.__destroyLocalizationWatch)||void 0===_a||_a.call(this),super.destroy()}__getUtcDate(){const dateObject=this.__internalDateObject,msInUtc=Date.UTC(dateObject.year,dateObject.month-1,dateObject.day,dateObject.hour,dateObject.minute,dateObject.second,dateObject.millisecond);return new Date(msInUtc+this.__utcOffset)}__onMousedown(){return event=>{this.getIsEnabled()&&TcHmi.Access.checkAccess(this,"operate")&&this.openDateTimePicker()}}__onMousedownCalendar(){let __this=this;return function(event){if(!__this.getIsEnabled())return;if(!TcHmi.Access.checkAccess(__this,"operate"))return;let targetElement=$(event.target);if(__this.__isPressedCalendar=!0,targetElement.hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-month-prev")){let newMonth=__this.__internalDateObject.month-1;if(0===newMonth){newMonth=12;let newYear=__this.__internalDateObject.year-1;if(newYear<1970)return;__this.__internalDateObject.year=newYear}__this.__internalDateObject.month=newMonth,__this.__elementCalendarTemplate.empty().append(__this.createCalendar(__this.__internalDateObject.year,__this.__internalDateObject.month,__this.__internalDateObject.day)),__this.__updateHeaderDate(),__this.__intervalTimerCalendar=setInterval((function(){if(__this.__isPressedCalendar){let newMonth=__this.__internalDateObject.month-1;if(0===newMonth){newMonth=12;let newYear=__this.__internalDateObject.year-1;if(newYear<1970)return;__this.__internalDateObject.year=newYear}__this.__internalDateObject.month=newMonth,__this.__elementCalendarTemplate.empty().append(__this.createCalendar(__this.__internalDateObject.year,__this.__internalDateObject.month,__this.__internalDateObject.day)),__this.__updateHeaderDate()}}),400)}else if(targetElement.hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-month-next")){let newMonth=__this.__internalDateObject.month+1;if(newMonth>12){newMonth=1;let newYear=__this.__internalDateObject.year+1;if(newYear>9999)return;__this.__internalDateObject.year=newYear}__this.__internalDateObject.month=newMonth,__this.__elementCalendarTemplate.empty().append(__this.createCalendar(__this.__internalDateObject.year,__this.__internalDateObject.month,__this.__internalDateObject.day)),__this.__updateHeaderDate(),__this.__intervalTimerCalendar=setInterval((function(){if(__this.__isPressedCalendar){let newMonth=__this.__internalDateObject.month+1;if(newMonth>12){newMonth=1;let newYear=__this.__internalDateObject.year+1;if(newYear>9999)return;__this.__internalDateObject.year=newYear}__this.__internalDateObject.month=newMonth,__this.__elementCalendarTemplate.empty().append(__this.createCalendar(__this.__internalDateObject.year,__this.__internalDateObject.month,__this.__internalDateObject.day)),__this.__updateHeaderDate()}}),400)}else if(targetElement.hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-year-prev")){let newYear=__this.__internalDateObject.year-1;newYear>=1970&&(__this.__internalDateObject.year=newYear,__this.__elementCalendarTemplate.empty().append(__this.createCalendar(__this.__internalDateObject.year,__this.__internalDateObject.month,__this.__internalDateObject.day)),__this.__updateHeaderDate(),__this.__intervalTimerCalendar=setInterval((function(){if(__this.__isPressedCalendar){let newYear=__this.__internalDateObject.year-1;newYear>=1970&&(__this.__internalDateObject.year=newYear,__this.__elementCalendarTemplate.empty().append(__this.createCalendar(__this.__internalDateObject.year,__this.__internalDateObject.month,__this.__internalDateObject.day)),__this.__updateHeaderDate())}}),400))}else if(targetElement.hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-year-next")){let newYear=__this.__internalDateObject.year+1;newYear<=9999&&(__this.__internalDateObject.year=newYear,__this.__elementCalendarTemplate.empty().append(__this.createCalendar(__this.__internalDateObject.year,__this.__internalDateObject.month,__this.__internalDateObject.day)),__this.__updateHeaderDate(),__this.__intervalTimerCalendar=setInterval((function(){if(__this.__isPressedCalendar){let newYear=__this.__internalDateObject.year+1;newYear<=9999&&(__this.__internalDateObject.year=newYear,__this.__elementCalendarTemplate.empty().append(__this.createCalendar(__this.__internalDateObject.year,__this.__internalDateObject.month,__this.__internalDateObject.day)),__this.__updateHeaderDate())}}),400))}else if(targetElement.hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-day-element")){targetElement.parent().children().removeClass("active"),targetElement.addClass("active");let newDay=targetElement[0].textContent;null!==newDay&&(__this.__internalDateObject.day=parseInt(newDay,10),__this.__updateHeaderDate())}}}__onMousedownTimeButtons(){let __this=this;return function(evt){if(__this.__isPressedTimeButtons=!0,evt.name.includes("hourUp")){let textboxBase=__this.__baseControls[__this.__id+"_hourValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^-?[0-9]*$").test(trimmedText)){let value=parseInt(text,10);value<23&&(value++,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=23&&value>=0&&(__this.__internalDateObject.hour=value,__this.__updateHeaderDate()),__this.__intervalTimerTimeButtons=setInterval((function(){__this.__isPressedTimeButtons&&(value=parseInt(textbox.getText(),10),value<23&&(value++,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=23&&value>=0&&(__this.__internalDateObject.hour=value,__this.__updateHeaderDate())))}),150))}}}}else if(evt.name.includes("hourDown")){let textboxBase=__this.__baseControls[__this.__id+"_hourValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^-?[0-9]*$").test(trimmedText)){let value=parseInt(text,10);value>0&&(value--,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=23&&value>=0&&(__this.__internalDateObject.hour=value,__this.__updateHeaderDate()),__this.__intervalTimerTimeButtons=setInterval((function(){__this.__isPressedTimeButtons&&value>0&&(value=parseInt(textbox.getText(),10),value--,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=23&&value>=0&&(__this.__internalDateObject.hour=value,__this.__updateHeaderDate()))}),150))}}}}else if(evt.name.includes("minuteUp")){let textboxBase=__this.__baseControls[__this.__id+"_minuteValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^-?[0-9]*$").test(trimmedText)){let value=parseInt(text,10);value<59&&(value++,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=59&&value>=0&&(__this.__internalDateObject.minute=value,__this.__updateHeaderDate()),__this.__intervalTimerTimeButtons=setInterval((function(){__this.__isPressedTimeButtons&&(value=parseInt(textbox.getText(),10),value<59&&(value++,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=59&&value>=0&&(__this.__internalDateObject.minute=value,__this.__updateHeaderDate())))}),150))}}}}else if(evt.name.includes("minuteDown")){let textboxBase=__this.__baseControls[__this.__id+"_minuteValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^-?[0-9]*$").test(trimmedText)){let value=parseInt(text,10);value>0&&(value--,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=59&&value>=0&&(__this.__internalDateObject.minute=value,__this.__updateHeaderDate()),__this.__intervalTimerTimeButtons=setInterval((function(){__this.__isPressedTimeButtons&&(value=parseInt(textbox.getText(),10),value>0&&(value--,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=59&&value>=0&&(__this.__internalDateObject.minute=value,__this.__updateHeaderDate())))}),150))}}}}else if(evt.name.includes("millisecondUp")){let textboxBase=__this.__baseControls[__this.__id+"_millisecondValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^-?[0-9]*$").test(trimmedText)){let value=parseInt(text,10);value<999&&(value++,value>=0?textbox.setText(("000"+value).substring(Math.min((""+value).length,3))):textbox.setText(value.toString()),value<=999&&value>=0&&(__this.__internalDateObject.millisecond=value,__this.__updateHeaderDate()),__this.__intervalTimerTimeButtons=setInterval((function(){__this.__isPressedTimeButtons&&(value=parseInt(textbox.getText(),10),value<999&&(value++,value>=0?textbox.setText(("000"+value).substring(Math.min((""+value).length,3))):textbox.setText(value.toString()),value<=999&&value>=0&&(__this.__internalDateObject.millisecond=value,__this.__updateHeaderDate())))}),150))}}}}else if(evt.name.includes("millisecondDown")){let textboxBase=__this.__baseControls[__this.__id+"_millisecondValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^-?[0-9]*$").test(trimmedText)){let value=parseInt(text,10);value>0&&(value--,textbox.setText(("000"+value).substring(Math.min((""+value).length,3))),value<=999&&value>=0&&(__this.__internalDateObject.millisecond=value,__this.__updateHeaderDate()),__this.__intervalTimerTimeButtons=setInterval((function(){__this.__isPressedTimeButtons&&(value=parseInt(textbox.getText(),10),value>0&&(value--,textbox.setText(("000"+value).substring(Math.min((""+value).length,3))),value<=999&&value>=0&&(__this.__internalDateObject.millisecond=value,__this.__updateHeaderDate())))}),150))}}}}else if(evt.name.includes("secondUp")){let textboxBase=__this.__baseControls[__this.__id+"_secondValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^-?[0-9]*$").test(trimmedText)){let value=parseInt(text,10);value<59&&(value++,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=59&&value>=0&&(__this.__internalDateObject.second=value,__this.__updateHeaderDate()),__this.__intervalTimerTimeButtons=setInterval((function(){__this.__isPressedTimeButtons&&(value=parseInt(textbox.getText(),10),value<59&&(value++,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=59&&value>=0&&(__this.__internalDateObject.second=value,__this.__updateHeaderDate())))}),150))}}}}else if(evt.name.includes("secondDown")){let textboxBase=__this.__baseControls[__this.__id+"_secondValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^-?[0-9]*$").test(trimmedText)){let value=parseInt(text,10);value>0&&(value--,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=59&&value>=0&&(__this.__internalDateObject.second=value,__this.__updateHeaderDate()),__this.__intervalTimerTimeButtons=setInterval((function(){__this.__isPressedTimeButtons&&(value=parseInt(textbox.getText(),10),value>0&&(value--,textbox.setText(("00"+value).substring(Math.min((""+value).length,2))),value<=59&&value>=0&&(__this.__internalDateObject.second=value,__this.__updateHeaderDate())))}),150))}}}}}}__updateHeaderDate(process=!0){let dateValue=this.__baseControls[this.__id+"_dateValue"];if(void 0!==dateValue){const dateObject=this.__internalDateObject,msInUtc=Date.UTC(dateObject.year,dateObject.month-1,dateObject.day,dateObject.hour,dateObject.minute,dateObject.second,dateObject.millisecond),realUtcDate=new Date(msInUtc+this.__utcOffset),dateString=TcHmi.Localization.formatDate(realUtcDate);dateValue.setText(dateString),this.__directDisplay&&!this.__showConfirmationButtons&&process&&this.setValue(realUtcDate.toISOString(),!1)}}__onMouseup(){let __this=this;return function(evt){__this.__isPressedTimeButtons=!1,null!==__this.__intervalTimerTimeButtons&&clearInterval(__this.__intervalTimerTimeButtons),__this.__isPressedCalendar=!1,__this.__intervalTimerCalendar&&(clearInterval(__this.__intervalTimerCalendar),__this.__intervalTimerCalendar=0)}}__onPressed(){let __this=this;return function(evt){if(evt.name.includes("ok")){let realUtcDate=__this.__getUtcDate();__this.setValue(realUtcDate.toISOString(),!1),TcHmi.EventProvider.raise(__this.__id+".onConfirmed"),TcHmi.EventProvider.raise(__this.__id+".onUserInteractionFinished"),TcHmi.TopMostLayer.remove(__this,__this.__elementDTPTemplate)}else evt.name.includes("cancel")&&__this.closeDateTimePicker()}}__onTextChanged(){let __this=this;return function(evt){if(evt.name.includes("hourValueTextbox")){let textboxBase=__this.__baseControls[__this.__id+"_hourValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^[0-9]*$").test(trimmedText)){let parsedValue;parsedValue=""===trimmedText?0:parseInt(trimmedText,10),parsedValue<=23?textbox.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error"):textbox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}else textbox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}}}else if(evt.name.includes("minuteValueTextbox")){let textboxBase=__this.__baseControls[__this.__id+"_minuteValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^[0-9]*$").test(trimmedText)){let parsedValue;parsedValue=""===trimmedText?0:parseInt(trimmedText,10),parsedValue<=59?textbox.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error"):textbox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}else textbox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}}}else if(evt.name.includes("millisecondValueTextbox")){let textboxBase=__this.__baseControls[__this.__id+"_millisecondValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^[0-9]*$").test(trimmedText)){let parsedValue;parsedValue=""===trimmedText?0:parseInt(trimmedText,10),parsedValue<=999?textbox.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error"):textbox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}else textbox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}}}else if(evt.name.includes("secondValueTextbox")){let textboxBase=__this.__baseControls[__this.__id+"_secondValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^[0-9]*$").test(trimmedText)){let parsedValue;parsedValue=""===trimmedText?0:parseInt(trimmedText,10),parsedValue<=59?textbox.getElement()[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error"):textbox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}else textbox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error","tchmi-date-time-picker-time-template-textbox-error")}}}let okButtonBase=__this.__baseControls[__this.__id+"_okButton"];if(void 0!==okButtonBase){__this.__elementDTPTemplate[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox-error").length>0?okButtonBase.setIsEnabled(!1):okButtonBase.setIsEnabled(!0)}}}__onUserInteractionFinished(){let __this=this;return function(evt){if(evt.name.includes("hourValueTextbox")){let textboxBase=__this.__baseControls[__this.__id+"_hourValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^[0-9]*$").test(trimmedText)){let parsedValue;parsedValue=""===trimmedText?0:parseInt(trimmedText,10),parsedValue<=23&&(textbox.setText(("00"+parsedValue).substring(Math.min((""+parsedValue).length,2))),__this.__internalDateObject.hour=parsedValue,__this.__updateHeaderDate())}}}}else if(evt.name.includes("minuteValueTextbox")){let textboxBase=__this.__baseControls[__this.__id+"_minuteValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^[0-9]*$").test(trimmedText)){let parsedValue;parsedValue=""===trimmedText?0:parseInt(trimmedText,10),parsedValue<=59&&(textbox.setText(("00"+parsedValue).substring(Math.min((""+parsedValue).length,2))),__this.__internalDateObject.minute=parsedValue,__this.__updateHeaderDate())}}}}else if(evt.name.includes("millisecondValueTextbox")){let textboxBase=__this.__baseControls[__this.__id+"_millisecondValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^[0-9]*$").test(trimmedText)){let parsedValue;parsedValue=""===trimmedText?0:parseInt(trimmedText,10),parsedValue<=999&&(textbox.setText(("000"+parsedValue).substring(Math.min((""+parsedValue).length,3))),__this.__internalDateObject.millisecond=parsedValue,__this.__updateHeaderDate())}}}}else if(evt.name.includes("secondValueTextbox")){let textboxBase=__this.__baseControls[__this.__id+"_secondValue"];if(void 0!==textboxBase){let textbox=textboxBase,text=textbox.getText();if(void 0!==text){let trimmedText=text.trim();if(new RegExp("^[0-9]*$").test(trimmedText)){let parsedValue;parsedValue=""===trimmedText?0:parseInt(trimmedText,10),parsedValue<=59&&(textbox.setText(("00"+parsedValue).substring(Math.min((""+parsedValue).length,2))),__this.__internalDateObject.second=parsedValue,__this.__updateHeaderDate())}}}}}}__onFocusOut(){return event=>{this.__directDisplay&&!this.__showConfirmationButtons&&setTimeout(()=>{let focusedElement=document.activeElement;for(;focusedElement&&focusedElement!==this.__elementDTPTemplate[0];)focusedElement=focusedElement.parentElement;null===focusedElement&&TcHmi.EventProvider.raise(this.__id+".onUserInteractionFinished")},0)}}__onKeyPress(){return event=>{var _a;this.__directDisplay&&!this.__showConfirmationButtons&&13===event.keyCode&&(null===(_a=document.activeElement)||void 0===_a||_a.blur())}}openDateTimePicker(){null!==this.__elementDTPTemplate[0].parentElement||this.__directDisplay||TcHmi.TopMostLayer.add(this,this.__elementDTPTemplate,{centerHorizontal:!0,centerVertical:!0,removeCb:data=>{data.canceled&&(TcHmi.EventProvider.raise(this.__id+".onCancel"),TcHmi.EventProvider.raise(this.__id+".onUserInteractionFinished"),this.__processValue())},resizeCb:data=>{this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-area-template").css({"margin-top":"0px"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template").css({width:"350px"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-and-button-area-template").css({width:""}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-and-button-area-template")[0].offsetTop>0&&(this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-area-template").css({"margin-top":"10px"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-button-area-template").css({top:"10px","margin-bottom":"10px"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template").css({width:"100%"}),this.__elementDTPTemplate.find(".TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-and-button-area-template").css({width:"100%"}))}})}closeDateTimePicker(){this.__elementDTPTemplate[0].classList.contains("tchmi-in-topmostlayer")&&TcHmi.TopMostLayer.remove(this,this.__elementDTPTemplate),TcHmi.EventProvider.raise(this.__id+".onCancel"),TcHmi.EventProvider.raise(this.__id+".onUserInteractionFinished"),this.__processValue()}createCalendar(year,month,day){let docFragment=document.createDocumentFragment(),elementCalendarTemplate=document.createElement("div");elementCalendarTemplate.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-calendar","tchmi-date-time-picker-calendar-template-calendar");let headerTemplate=document.createElement("div");headerTemplate.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-header","tchmi-date-time-picker-calendar-template-header"),headerTemplate.innerHTML='<ul class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-header-month"><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-prev TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-month-prev">&lt; </li><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-actuallMonth"> '+new Date(year,month-1,day).toLocaleString(TcHmi.Locale.get(),{month:"long"})+' </li><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-next TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-month-next">&gt; </li></ul><ul class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-header-year"><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-prev TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-year-prev" >&lt; </li><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-actuallMonth"> '+year+' </li><li class="TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-next TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-year-next">&gt; </li></ul>',elementCalendarTemplate.appendChild(headerTemplate);let weekdaysTemplate=document.createElement("ul");weekdaysTemplate.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-weekdays","tchmi-date-time-picker-calendar-template-weekdays");let dayDates=[new Date(Date.UTC(2021,0,4)),new Date(Date.UTC(2021,0,5)),new Date(Date.UTC(2021,0,6)),new Date(Date.UTC(2021,0,7)),new Date(Date.UTC(2021,0,8)),new Date(Date.UTC(2021,0,9)),new Date(Date.UTC(2021,0,10))];for(let i=0,ii=dayDates.length;i<ii;i++){let dayDate=dayDates[i],element=document.createElement("li");element.textContent=dayDate.toLocaleString(TcHmi.Locale.get(),{weekday:"short"}),weekdaysTemplate.appendChild(element)}elementCalendarTemplate.appendChild(weekdaysTemplate);let daysInMonth=new Date(year,month,0).getDate(),firstDayInMonth=new Date(year,month-1,1).getDay();firstDayInMonth=0===firstDayInMonth?7:firstDayInMonth;let daysTemplate=document.createElement("ul");daysTemplate.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-days","tchmi-date-time-picker-calendar-template-days");for(let i=-(firstDayInMonth-1),ii=daysInMonth;i<ii;i++){let elementDay=document.createElement("li");i>=0&&(elementDay.textContent=(i+1).toString(),elementDay.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-day-element","tchmi-date-time-picker-calendar-template-day-element")),i+1===day&&elementDay.classList.add("active"),daysTemplate.appendChild(elementDay)}let test=firstDayInMonth-1+daysInMonth;for(;!isNaN(test)&&test%7!=0;){let elementDay=document.createElement("li");daysTemplate.appendChild(elementDay),test++}return elementCalendarTemplate.appendChild(daysTemplate),docFragment.appendChild(elementCalendarTemplate),docFragment}createTime(hours,minutes,seconds,milliseconds){let docFragment=document.createDocumentFragment(),template=document.createElement("div");template.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template","tchmi-date-time-picker-time-template");let timeTextblock=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextblock",this.__id+"_timeLabel",{"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-text-vertical-alignment":"Center","data-tchmi-text-font-size":15,"data-tchmi-text":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiDateTimePicker::Label_Text_Time%/l%"},this);if(void 0===timeTextblock)throw new Error("Needed Textblock could not be instantiated");timeTextblock.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-template-time-label","tchmi-date-time-picker-template-time-label"),template.appendChild(timeTextblock.getElement()[0]);let hourTemplate=document.createElement("div");hourTemplate.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-hour","tchmi-date-time-picker-time-template-hour");let upButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_hourUpButton",{"data-tchmi-zindex":1},this);if(void 0===upButton)throw new Error("Needed Button could not be instantiated");upButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-up-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-up-button"),hourTemplate.appendChild(upButton.getElement()[0]),this.__baseControls[this.__id+"_hourUpButton"]=upButton;let valueTextbox=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextbox",this.__id+"_hourValueTextbox",{"data-tchmi-text":("00"+hours).slice(-2),"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-box-shadow":[{blur:5,blurUnit:"px",color:{color:"rgba(0, 0, 0, 0.6)"},offsetX:0,offsetXUnit:"px",offsetY:0,offsetYUnit:"px",spread:0,spreadUnit:"px"}],"data-tchmi-auto-focus-out":!0},this);if(void 0===valueTextbox)throw new Error("Needed Textbox could not be instantiated");valueTextbox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox","tchmi-date-time-picker-time-template-textbox"),hourTemplate.appendChild(valueTextbox.getElement()[0]),this.__baseControls[this.__id+"_hourValue"]=valueTextbox;let downButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_hourDownButton",{},this);if(void 0===downButton)throw new Error("Needed Button could not be instantiated");downButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-down-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-down-button"),hourTemplate.appendChild(downButton.getElement()[0]),this.__baseControls[this.__id+"_hourDownButton"]=downButton,template.appendChild(hourTemplate);let colonTemplate=document.createElement("div");colonTemplate.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-colon","tchmi-date-time-picker-time-template-colon"),colonTemplate.textContent=":",template.appendChild(colonTemplate);let minuteTemplate=document.createElement("div");minuteTemplate.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-minute","tchmi-date-time-picker-time-template-minute");let upButtonMinute=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_minuteUpButton",{"data-tchmi-zindex":1},this);if(void 0===upButtonMinute)throw new Error("Needed Button could not be instantiated");upButtonMinute.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-up-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-up-button"),minuteTemplate.appendChild(upButtonMinute.getElement()[0]),this.__baseControls[this.__id+"_minuteUpButton"]=upButtonMinute;let valueTextboxMinute=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextbox",this.__id+"_minuteValueTextbox",{"data-tchmi-text":("00"+minutes).slice(-2),"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-box-shadow":[{blur:5,blurUnit:"px",color:{color:"rgba(0, 0, 0, 0.6)"},offsetX:0,offsetXUnit:"px",offsetY:0,offsetYUnit:"px",spread:0,spreadUnit:"px"}],"data-tchmi-auto-focus-out":!0},this);if(void 0===valueTextboxMinute)throw new Error("Needed Textbox could not be instantiated");valueTextboxMinute.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox","tchmi-date-time-picker-time-template-textbox"),minuteTemplate.appendChild(valueTextboxMinute.getElement()[0]),this.__baseControls[this.__id+"_minuteValue"]=valueTextboxMinute;let downButtonMinute=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_minuteDownButton",{},this);if(void 0===downButtonMinute)throw new Error("Needed Button could not be instantiated");downButtonMinute.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-down-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-down-button"),minuteTemplate.appendChild(downButtonMinute.getElement()[0]),this.__baseControls[this.__id+"_minuteDownButton"]=downButtonMinute,template.appendChild(minuteTemplate);let colon2Template=document.createElement("div");colon2Template.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-colon","tchmi-date-time-picker-time-template-colon"),colon2Template.textContent=":",template.appendChild(colon2Template);let secondTemplate=document.createElement("div");secondTemplate.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-second"),secondTemplate.classList.add("tchmi-date-time-picker-time-template-second");let upButtonSecond=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_secondUpButton",{"data-tchmi-zindex":1},this);if(void 0===upButtonSecond)throw new Error("Needed Button could not be instantiated");upButtonSecond.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-up-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-up-button"),secondTemplate.appendChild(upButtonSecond.getElement()[0]),this.__baseControls[this.__id+"_secondUpButton"]=upButtonSecond;let valueTextboxSecond=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextbox",this.__id+"_secondValueTextbox",{"data-tchmi-text":("00"+seconds).slice(-2),"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-box-shadow":[{blur:5,blurUnit:"px",color:{color:"rgba(0, 0, 0, 0.6)"},offsetX:0,offsetXUnit:"px",offsetY:0,offsetYUnit:"px",spread:0,spreadUnit:"px"}],"data-tchmi-auto-focus-out":!0},this);if(void 0===valueTextboxSecond)throw new Error("Needed Textbox could not be instantiated");valueTextboxSecond.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox","tchmi-date-time-picker-time-template-textbox"),secondTemplate.appendChild(valueTextboxSecond.getElement()[0]),this.__baseControls[this.__id+"_secondValue"]=valueTextboxSecond;let downButtonSecond=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_secondDownButton",{},this);if(void 0===downButtonSecond)throw new Error("Needed Button could not be instantiated");downButtonSecond.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-down-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-down-button"),secondTemplate.appendChild(downButtonSecond.getElement()[0]),this.__baseControls[this.__id+"_secondDownButton"]=downButtonSecond,template.appendChild(secondTemplate);let dotTemplate=document.createElement("div");dotTemplate.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-colon","tchmi-date-time-picker-time-template-colon"),dotTemplate.textContent=".",template.appendChild(dotTemplate);let millisecondTemplate=document.createElement("div");millisecondTemplate.classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-millisecond","tchmi-date-time-picker-time-template-millisecond");let upButtonMillisecond=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_millisecondUpButton",{"data-tchmi-zindex":1},this);if(void 0===upButtonMillisecond)throw new Error("Needed Button could not be instantiated");upButtonMillisecond.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-up-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-up-button"),millisecondTemplate.appendChild(upButtonMillisecond.getElement()[0]),this.__baseControls[this.__id+"_millisecondUpButton"]=upButtonMillisecond;let valueTextboxMillisecond=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTextbox",this.__id+"_millisecondValueTextbox",{"data-tchmi-text":("000"+milliseconds).slice(-3),"data-tchmi-text-horizontal-alignment":"Center","data-tchmi-box-shadow":[{blur:5,blurUnit:"px",color:{color:"rgba(0, 0, 0, 0.6)"},offsetX:0,offsetXUnit:"px",offsetY:0,offsetYUnit:"px",spread:0,spreadUnit:"px"}],"data-tchmi-auto-focus-out":!0},this);if(void 0===valueTextboxMillisecond)throw new Error("Needed Textbox could not be instantiated");valueTextboxMillisecond.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-textbox","tchmi-date-time-picker-time-template-textbox"),millisecondTemplate.appendChild(valueTextboxMillisecond.getElement()[0]),this.__baseControls[this.__id+"_millisecondValue"]=valueTextboxMillisecond;let downButtonMillisecond=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_millisecondDownButton",{},this);if(void 0===downButtonMillisecond)throw new Error("Needed Button could not be instantiated");return downButtonMillisecond.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-button","TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-time-template-down-button","tchmi-date-time-picker-time-template-button","tchmi-date-time-picker-time-template-down-button"),millisecondTemplate.appendChild(downButtonMillisecond.getElement()[0]),this.__baseControls[this.__id+"_millisecondDownButton"]=downButtonMillisecond,template.appendChild(millisecondTemplate),docFragment.appendChild(template),docFragment}setValue(valueNew,process=!0){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Value")),convertedValue!==this.__value&&(this.__value=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Value"}),TcHmi.EventProvider.raise(this.__id+".onValueChanged",this.__value),process&&this.__processValue())}getValue(){if(this.__value)return this.__value;return this.__getUtcDate().toISOString()}__processValue(){let date;this.__value?(date=new Date(this.__value),Number.isNaN(date.getTime())&&(date=new Date)):date=new Date,this.__internalDateObject=TcHmi.Localization.parseDate(date);let dateAsUtc=Date.UTC(this.__internalDateObject.year,this.__internalDateObject.month-1,this.__internalDateObject.day,this.__internalDateObject.hour,this.__internalDateObject.minute,this.__internalDateObject.second,this.__internalDateObject.millisecond);this.__utcOffset=date.valueOf()-dateAsUtc;this.__updateHeaderDate(!1);let hourValue=this.__baseControls[this.__id+"_hourValue"];if(void 0!==hourValue){hourValue.setText(("00"+this.__internalDateObject.hour).slice(-2))}let minuteValue=this.__baseControls[this.__id+"_minuteValue"];if(void 0!==minuteValue){minuteValue.setText(("00"+this.__internalDateObject.minute).slice(-2))}let secondValue=this.__baseControls[this.__id+"_secondValue"];if(void 0!==secondValue){secondValue.setText(("00"+this.__internalDateObject.second).slice(-2))}let millisecondValue=this.__baseControls[this.__id+"_millisecondValue"];if(void 0!==millisecondValue){millisecondValue.setText(("000"+this.__internalDateObject.millisecond).slice(-3))}this.__elementCalendarTemplate.children().hasClass("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-calendar-template-calendar")&&this.__elementCalendarTemplate.empty().append(this.createCalendar(this.__internalDateObject.year,this.__internalDateObject.month,this.__internalDateObject.day))}setDirectDisplay(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("DirectDisplay")),convertedValue!==this.__directDisplay&&(this.__directDisplay=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"DirectDisplay"}),this.__processDirectDisplay())}getDirectDisplay(){return this.__directDisplay}__processDirectDisplay(){this.__directDisplay?(this.__elementDTPTemplate[0].classList.contains("tchmi-in-topmostlayer")&&(TcHmi.TopMostLayer.remove(this,this.__elementDTPTemplate),TcHmi.EventProvider.raise(this.__id+".onCancel"),TcHmi.EventProvider.raise(this.__id+".onUserInteractionFinished")),null===this.__elementDTPTemplate[0].parentElement&&this.__elementTemplateRoot.append(this.__elementDTPTemplate[0]),this.__element[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-direct-display"),this.__element[0].setAttribute("tabindex","0")):(this.__elementDTPTemplate[0].parentElement===this.__elementTemplateRoot&&this.__elementTemplateRoot.removeChild(this.__elementDTPTemplate[0]),this.__element[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiDateTimePicker-direct-display"),this.__element[0].removeAttribute("tabindex")),this.__processShowConfirmationButtons()}setShowConfirmationButtons(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowConfirmationButtons")),convertedValue!==this.__showConfirmationButtons&&(this.__showConfirmationButtons=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowConfirmationButtons"}),this.__processShowConfirmationButtons())}getShowConfirmationButtons(){return this.__showConfirmationButtons}__processShowConfirmationButtons(){!1===this.__showConfirmationButtons&&this.__directDisplay?(this.__elementButtonTemplate.style.display="none",this.__elementTimeAndButtonTemplate[0].style.gridTemplateRows="150px auto"):(this.__elementButtonTemplate.style.display="",this.__elementTimeAndButtonTemplate[0].style.gridTemplateRows="")}__processIsEnabled(){super.__processIsEnabled(),this.getIsEnabled()||this.__elementDTPTemplate[0].classList.contains("tchmi-in-topmostlayer")&&(TcHmi.TopMostLayer.remove(this,this.__elementDTPTemplate),TcHmi.EventProvider.raise(this.__id+".onCancel"),TcHmi.EventProvider.raise(this.__id+".onUserInteractionFinished"))}}Beckhoff.TcHmiDateTimePicker=TcHmiDateTimePicker}(Beckhoff=Controls.Beckhoff||(Controls.Beckhoff={}))}(Controls=TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiDateTimePicker","TcHmi.Controls.Beckhoff",TcHmi.Controls.Beckhoff.TcHmiDateTimePicker);