var TcHmi;!function(TcHmi){let Controls;!function(Controls){let Beckhoff;!function(Beckhoff){class TcHmiToggleButton extends Beckhoff.TcHmiButton{constructor(element,pcElement,attrs){super(element,pcElement,attrs),this.__toggleLock=!1,this.__touchLockTimeoutId=0,this.__onToggleGroupToggledEventDestroyEvent=null}__previnit(){super.__previnit()}__init(){super.__init()}__attach(){super.__attach()}__detach(){super.__detach()}destroy(){this.__keepAlive||(null!==this.__onToggleGroupToggledEventDestroyEvent&&(this.__onToggleGroupToggledEventDestroyEvent(),this.__onToggleGroupToggledEventDestroyEvent=null),super.destroy())}__processState(state,forwardStateSymbol,source){this.__state!==state&&(this.__setToggleState(state?"Active":"Normal",forwardStateSymbol,!1),state&&null!==this.__toggleGroup&&TcHmi.EventProvider.raise(this.__toggleGroup+".toggled",{ActiveElementId:this.__id,source:source}),super.__processState(state,forwardStateSymbol,source))}__onPropertyIsEnabledChanged(){return(e,data)=>{data&&(this.getIsEnabled()?!this.__destroyStateSymbolWatch&&this.__stateSymbol&&(this.__destroyStateSymbolWatch=this.__stateSymbol.watch(this.__onStateSymbolWatch())):(this.__mousedown=!1,this.__stateLock=!1,this.__touches=[],this.__destroyStateSymbolWatch&&(this.__destroyStateSymbolWatch(),this.__destroyStateSymbolWatch=null)))}}__onMouseDown(){return event=>{this.__touchLock||0===event.button&&this.getIsEnabled()&&TcHmi.Access.checkAccess(this,"operate")&&(this.__mousedown=!0,!1===this.__stateLock&&(!1===this.__state?(this.__toggleLock=!0,this.__stateLock=!0,this.__destroyStateSymbolWatch&&(this.__destroyStateSymbolWatch(),this.__destroyStateSymbolWatch=null),this.__processState(!0,!0,"userInteraction")):this.__toggleLock=!1))}}__onMouseUp(){return event=>{this.__touchLock||0===event.button&&this.__mousedown&&this.getIsEnabled()&&TcHmi.Access.checkAccess(this,"operate")&&(this.__mousedown=!1,!1===this.__toggleLock&&!0===this.__state&&this.__processState(!1,!0,"userInteraction"),this.__stateLock=!1,!this.__destroyStateSymbolWatch&&this.__stateSymbol&&(this.__destroyStateSymbolWatch=this.__stateSymbol.watch(this.__onStateSymbolWatch())))}}__onMouseEnter(){return event=>{}}__onMouseLeave(){return event=>{this.__mousedown&&this.getIsEnabled()&&TcHmi.Access.checkAccess(this,"operate")&&(this.__mousedown=!1,!1===this.__toggleLock&&!0===this.__state&&this.__processState(!1,!0,"userInteraction"),this.__stateLock=!1,!this.__destroyStateSymbolWatch&&this.__stateSymbol&&(this.__destroyStateSymbolWatch=this.__stateSymbol.watch(this.__onStateSymbolWatch())))}}__onTouchStart(){return event=>{if(!this.getIsEnabled())return;if(!TcHmi.Access.checkAccess(this,"operate"))return;let changedTouches=Array.prototype.slice.apply(event.changedTouches).filter(touch=>touch.target===event.target);0!==changedTouches.length&&(this.__touches=this.__touches.concat(changedTouches.map(touch=>touch)),!1===this.__stateLock&&(!1===this.__state?(this.__toggleLock=!0,this.__stateLock=!0,this.__destroyStateSymbolWatch&&(this.__destroyStateSymbolWatch(),this.__destroyStateSymbolWatch=null),this.__processState(!0,!0,"userInteraction")):this.__toggleLock=!1),this.__touchLock=!0,this.__touchLockTimeoutId&&(clearTimeout(this.__touchLockTimeoutId),this.__touchLockTimeoutId=0),this.__touchLockTimeoutId=setTimeout(()=>{this.__touchLock=!1},500))}}__onTouchEndOrCancel(){return event=>{if(0===this.__touches.length)return;if(!this.getIsEnabled())return;if(!TcHmi.Access.checkAccess(this,"operate"))return;let changedTouchIds=Array.prototype.slice.apply(event.changedTouches).map(touch=>touch.identifier);this.__touches=this.__touches.filter(touch=>-1===changedTouchIds.indexOf(touch.identifier)),0===this.__touches.length&&(!1===this.__toggleLock&&!0===this.__state&&this.__processState(!1,!0,"userInteraction"),this.__stateLock=!1,!this.__destroyStateSymbolWatch&&this.__stateSymbol&&(this.__destroyStateSymbolWatch=this.__stateSymbol.watch(this.__onStateSymbolWatch())))}}__onToggleGroupToggled(){return(evt,data)=>{data&&data.ActiveElementId&&data.ActiveElementId!==this.__id&&(this.__stateSymbol&&this.__stateSymbol.getExpression().toString()===data.source||this.__processState(!1,!0,"toggleGroup"))}}setToggleGroup(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ToggleGroup")),convertedValue!==this.__toggleGroup&&(this.__toggleGroup=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ToggleGroup"}),this.__processToggleGroup())}getToggleGroup(){return this.__toggleGroup}__processToggleGroup(){null!==this.__onToggleGroupToggledEventDestroyEvent&&(this.__onToggleGroupToggledEventDestroyEvent(),this.__onToggleGroupToggledEventDestroyEvent=null),null!==this.__toggleGroup&&(this.__onToggleGroupToggledEventDestroyEvent=TcHmi.EventProvider.register(this.__toggleGroup+".toggled",this.__onToggleGroupToggled()))}__setToggleState(valueNew,forwardStateSymbol=!0,process=!1){let convertedValue=TcHmi.ValueConverter.toToggleState(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ToggleState")),convertedValue!==this.__toggleState&&(this.__toggleState=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ToggleState"}),TcHmi.EventProvider.raise(this.__id+".onToggleStateChanged"),process&&this.__processToggleState(forwardStateSymbol))}setToggleState(valueNew){this.__setToggleState(valueNew,!0,!0)}getToggleState(){return this.__toggleState}__processToggleState(forwardStateSymbol=!0){this.__processState("Active"===this.__toggleState,forwardStateSymbol,"attribute")}}Beckhoff.TcHmiToggleButton=TcHmiToggleButton}(Beckhoff=Controls.Beckhoff||(Controls.Beckhoff={}))}(Controls=TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiToggleButton","TcHmi.Controls.Beckhoff",TcHmi.Controls.Beckhoff.TcHmiToggleButton);