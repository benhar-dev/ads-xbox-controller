var TcHmi;!function(TcHmi){let Controls;!function(Controls){let Beckhoff;!function(Beckhoff){class TcHmiTrendLineChart extends TcHmi.Controls.System.TcHmiControl{constructor(element,pcElement,attrs){super(element,pcElement,attrs),this.__lineChart=null,this.__menuBarControls=[],this.__showLegend=!0,this.__lineGraphData=null,this.__lineGraphRawData=null,this.__internalStart=null,this.__internalEnd=null,this.__internalStartServer=null,this.__internalEndServer=null,this.__actualStartTime=null,this.__actualEndTime=null,this.__startBeforeManipulation=null,this.__endBeforeManipulation=null,this.__mouseMode=TcHmiTrendLineChart.MouseMode.PanX,this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}},this.__multitouchInfo={multitouchMode:!1,first:{identifier:null},second:{identifier:null},distance:0,newStart:null,newTimespan:null,newYAxis:null},this.__wheelInfo={isWheeling:!1,wheelSteps:0,mousePosition:{x:0,y:0},timespan:null,timeout:0},this.__zoomingCanvasContext=null,this.__lastInteraction=!1,this.__startEndBeforeZoom={end:null,start:null},this.__resizeEventDestroyEvent=null,this.__themeDataLoadedEventDestroyEvent=null,this.__subscriptionId=null,this.__requestId=null,this.__getDataCounter=0,this.__internalYAxis=null,this.__internalLineGraphDescription=null,this.__yAxisSelected=null,this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]},this.__startDatatype=null,this.__endDatatype=null,this.__utcOffset=0,this.__onAttachedMenuButtonsEvent=null,this.__onPressedStopDestroyEvent=null,this.__onPressedTimespanStartDestroyEvent=null,this.__onPressedDatetimeStartDestroyEvent=null,this.__onPressedTimespanEndDestroyEvent=null,this.__onPressedDatetimeEndDestroyEvent=null,this.__onIsActiveChagedPanxDestroyEvent=null,this.__onIsActiveChagedPanxyDestroyEvent=null,this.__onIsActiveChagedZoomxDestroyEvent=null,this.__onIsActiveChagedZoomxyDestroyEvent=null,this.__onPressedResetZoomDestroyEvent=null,this.__onPressedResetDestroyEvent=null,this.__onPressedOptionsDestroyEvent=null,this.__onUserInteractionFinishedStartDestroyEvent=null,this.__onUserInteractionFinishedEndDestroyEvent=null,this.__onValueChangedTimespanStartDestroyEvent=null,this.__onValueChangedTimespanEndDestroyEvent=null,this.__onValueChangedDatetimeStartDestroyEvent=null,this.__onValueChangedDatetimeEndDestroyEvent=null,this.__nowIsValueChanged=!1,this.__holdTimer=0,this.__holdTimerDuration=300,this.__localizedElements=new Map,this.__localizationReader=void 0,this.__destroyLocalizationWatch=null,this.__onCheckboxMouseDown=event=>{var _a,_b;if(!this.getIsEnabled()||1!==event.which)return;let childElement=event.target,checkboxElem=null;if(childElement.classList.contains("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-checkbox"))checkboxElem=childElement;else if(childElement.classList.contains("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-checkbox-label")){let checkboxList=childElement.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-checkbox");checkboxList&&checkboxList.length>0&&(checkboxElem=checkboxList[0])}else if(childElement.classList.contains("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-checkbox-color-element")&&childElement&&childElement.parentElement){let checkboxList=childElement.parentElement.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-checkbox");checkboxList&&checkboxList.length>0&&(checkboxElem=checkboxList[0])}if(checkboxElem){let checked=!checkboxElem.checked,id=checkboxElem.id,elementIndex=parseInt(id.replace(this.__id+"Element",""),10);if(!TcHmi.Access.checkAccess(this,"operate"))return void(checkboxElem.checked=checked);this.__lineGraphDescriptionSelected=[];let children=this.__elementLegend.children();for(let i=0,ii=children.length;i<ii;i++){let checkedCheckbox=children[i].childNodes[1].checked;i===elementIndex&&(checkedCheckbox=!checkedCheckbox),checkedCheckbox&&this.__internalLineGraphDescription?this.__lineGraphDescriptionSelected.push(this.__internalLineGraphDescription[i]):this.__internalLineGraphDescription&&this.__lineGraphDescriptionSelected.push(null)}if(this.__yAxisSelected=this.__yAxis?JSON.parse(JSON.stringify(this.__yAxis)):[],this.__internalYAxis)for(let i=0,ii=null===(_a=this.__internalYAxis)||void 0===_a?void 0:_a.length;i<ii;i++)-1!==this.__lineGraphDescriptionSelected.findIndex(x=>null!==x&&x.yAxisId===this.__internalYAxis[i].id)&&-1===(null===(_b=this.__yAxisSelected)||void 0===_b?void 0:_b.findIndex(x=>null!==x&&x.id===this.__internalYAxis[i].id))&&this.__yAxisSelected.push(this.__internalYAxis[i]);this.__drawLineChart()}},this.__onCheckboxTouchStart=event=>{var _a,_b;if(!this.getIsEnabled())return;let childElement=event.target;if(childElement){let checkboxList=childElement.getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-checkbox");if(checkboxList&&checkboxList.length>0){let checkoboxElement=checkboxList[0],id=checkoboxElement.id,checked=!checkoboxElement.checked,elementIndex=parseInt(id.replace(this.__id+"Element",""),10);if(!TcHmi.Access.checkAccess(this,"operate"))return void(checkoboxElement.checked=checked);this.__lineGraphDescriptionSelected=[];let children=this.__elementLegend.children();for(let i=0,ii=children.length;i<ii;i++){let checkedCheckbox=children[i].childNodes[1].checked;i===elementIndex&&(checkedCheckbox=!checkedCheckbox),checkedCheckbox&&this.__internalLineGraphDescription?this.__lineGraphDescriptionSelected.push(this.__internalLineGraphDescription[i]):this.__internalLineGraphDescription&&this.__lineGraphDescriptionSelected.push(null)}if(this.__yAxisSelected=this.__yAxis?JSON.parse(JSON.stringify(this.__yAxis)):[],this.__internalYAxis)for(let i=0,ii=null===(_a=this.__internalYAxis)||void 0===_a?void 0:_a.length;i<ii;i++)-1!==this.__lineGraphDescriptionSelected.findIndex(x=>null!==x&&x.yAxisId===this.__internalYAxis[i].id)&&-1===(null===(_b=this.__yAxisSelected)||void 0===_b?void 0:_b.findIndex(x=>null!==x&&x.id===this.__internalYAxis[i].id))&&this.__yAxisSelected.push(this.__internalYAxis[i]);this.__drawLineChart()}}},this.__onResolverForXAxisFormatWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("xAxisFormat"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__xAxisFormat)||(this.__xAxisFormat=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisFormat"}),this.__processXAxisFormat()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=XAxisFormat] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForSectionsBackgroundColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("sectionsBackgroundColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__sectionsBackgroundColor)||(this.__sectionsBackgroundColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SectionsBackgroundColor"}),this.__processSectionsBackgroundColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=SectionsBackgroundColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForXLabelFontColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("xLabelFontColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__xLabelFontColor)||(this.__xLabelFontColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XLabelFontColor"}),this.__processXLabelFontColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=XLabelFontColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForXAxisColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("xAxisColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__xAxisColor)||(this.__xAxisColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisColor"}),this.__processXAxisColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=XAxisColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForXAxisNameFontColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("xAxisNameFontColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__xAxisNameFontColor)||(this.__xAxisNameFontColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisNameFontColor"}),this.__processXAxisNameFontColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=XAxisNameFontColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForYAxisWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("yAxis"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__yAxis)||(this.__yAxis=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YAxis"}),this.__processYAxis()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=YAxis] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForLineGraphDescriptionsWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("lineGraphDescriptions"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__lineGraphDescriptions)||(this.__lineGraphDescriptions=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"LineGraphDescription"}),this.__processLineGraphDescriptions()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=LineGraphDescriptions] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForGridBackgroundColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("gridBackgroundColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__gridBackgroundColor)||(this.__gridBackgroundColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridBackgroundColor"}),this.__processGridBackgroundColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=GridBackgroundColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForGridLineColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("gridLineColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__gridLineColor)||(this.__gridLineColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridLineColor"}),this.__processGridLineColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=GridLineColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForSubgridLineColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("subgridLineColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__subgridLineColor)||(this.__subgridLineColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SubgridLineColor"}),this.__processSubgridLineColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=SubgridLineColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForMenuBarLabelFontColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("menuBarLabelFontColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__menuBarLabelFontColor)||(this.__menuBarLabelFontColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontColor"}),this.__processMenuBarLabelFontColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=MenuBarLabelFontColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForTooltipFormatWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("tooltipFormat"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__tooltipFormat)||(this.__tooltipFormat=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFormat"}),this.__processTooltipFormat()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=TooltipFormat] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForTooltipFontColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("tooltipFontColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__tooltipFontColor)||(this.__tooltipFontColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFontColor"}),this.__processTooltipFontColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=TooltipFontColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__onResolverForTooltipBackgroundColorWatchCallback=data=>{!1===this.__isAttached&&this.__suspendObjectResolver("tooltipBackgroundColor"),data.error===TcHmi.Errors.NONE?tchmi_equal(data.value,this.__tooltipBackgroundColor)||(this.__tooltipBackgroundColor=data.value,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipBackgroundColor"}),this.__processTooltipBackgroundColor()):TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+this.getId()+", Attribute=TooltipBackgroundColor] Resolving symbols from object failed with error: "+TcHmi.Log.buildMessage(data.details))},this.__clickHandler=this.__onClick(),this.__mousedownHandler=this.__onMouseDown(),this.__mouseupHandler=this.__onMouseUp(),this.__mousemoveHandler=this.__onMouseMove(),this.__touchstartHandler=this.__onTouchStart(),this.__touchmoveHandler=this.__onTouchMove(),this.__touchendHandler=this.__onTouchEnd(),this.__mousemoveTooltipHandler=this.__onMouseMoveTooltip(),this.__mousewheelHandler=this.__onMouseWheel()}__previnit(){if(this.__elementTemplateRoot=this.__element.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template"),0===this.__elementTemplateRoot.length&&(this.__elementTemplateRoot=this.__element.find(".tchmi-textbox-template")),this.__elementChart=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-chart"),0===this.__elementChart.length&&(this.__elementChart=this.__elementTemplateRoot.find(".tchmi-textbox-template-chart")),this.__elementMenuBar=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar"),0===this.__elementMenuBar.length&&(this.__elementMenuBar=this.__elementTemplateRoot.find(".tchmi-textbox-template-menu-bar")),this.__elementTooltip=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip"),0===this.__elementTooltip.length&&(this.__elementTooltip=this.__elementTemplateRoot.find(".tchmi-textbox-template-tooltip")),this.__elementTooltipText=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-text"),0===this.__elementTooltipText.length&&(this.__elementTooltipText=this.__elementTemplateRoot.find(".tchmi-textbox-template-tooltip-text")),this.__elementTooltipArrow=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow"),0===this.__elementTooltipArrow.length&&(this.__elementTooltipArrow=this.__elementTemplateRoot.find(".tchmi-textbox-template-tooltip-arrow")),this.__elementLoading=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-loading"),0===this.__elementLoading.length&&(this.__elementLoading=this.__elementTemplateRoot.find(".tchmi-textbox-template-loading")),this.__elementLegend=this.__elementTemplateRoot.find(".TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend"),this.__elementMenuBarDropdown=$('<div class="TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-dropdown tchmi-box"></div>'),0===this.__elementTemplateRoot.length||0===this.__elementChart.length||0===this.__elementMenuBar.length||0===this.__elementTooltip.length||0===this.__elementTooltipText.length||0===this.__elementTooltipArrow.length||0===this.__elementLoading.length||0===this.__elementMenuBarDropdown.length||0===this.__elementLegend.length)throw new Error("Invalid Template.html");if("undefined"==typeof TcHmiCharting)throw new Error("Missing needed TcHmiCharting library");let loadingSpinnerDivTempDiv=document.createElement("div");loadingSpinnerDivTempDiv.innerHTML='<div class="TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-loading-spinner-container"><div class="TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-loading-spinner"><div></div><div></div><div></div><div></div></div></div>',this.__loadingSpinner=loadingSpinnerDivTempDiv.firstElementChild;let localizedElements=this.__element[0].querySelectorAll("[data-tchmi-localized-content-key]");for(let i=0,ii=localizedElements.length;i<ii;i++){let element=localizedElements[i],localizeKey=element.dataset.tchmiLocalizedContentKey;localizeKey&&this.__localizedElements.set(element,{key:localizeKey})}this.__destroyLocalizationWatch=this.__localization.watch(data=>{if(data.error===TcHmi.Errors.NONE&&data.reader){this.__localizationReader=data.reader;for(const[element,info]of this.__localizedElements){let localizedText=data.reader.get(info.key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}}),super.__previnit()}__init(){super.__init(),this.__elementLegend[0].addEventListener("mousedown",this.__onCheckboxMouseDown),this.__elementLegend[0].addEventListener("touchstart",this.__onCheckboxTouchStart),this.__showMenuBar&&this.__addMenuBarControls(),this.__showLegend&&this.__createLegend()}__addMenuBarControls(){let startTextblock=$(`<label for='${this.__id}_startCombobox'>Label_Start</label>`);this.__addLocalizedElement(startTextblock[0],"Label_Start");let startCombobox=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiCombobox",this.__id+"_startCombobox",{"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Combobox_Tooltip_Start%/l%","data-tchmi-text-font-size":11,"data-tchmi-allow-text-input":!0,"data-tchmi-src-data":[{text:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Combobox_Data_Start%/l%",value:"First"}]},this);if(void 0===startCombobox)throw new Error("Needed Combobox could not be instantiated");{startCombobox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-start-combobox","tchmi-trend-line-chart-template-start-combobox"),this.__elementMenuBar[0].appendChild(startTextblock[0]),this.__elementMenuBar[0].appendChild(startCombobox.getElement()[0]),this.__menuBarControls.push(startCombobox);let start=this.__start;null==start&&(start=""),"First"===start?startCombobox.setSelectedIndex(0):(this.isDatetime(start)&&(start=this.__moveUtcToTimeZone(start)),startCombobox.setText(start))}let timespanStart=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTimespanPicker",this.__id+"_timespanStart",{"data-tchmi-visibility":"Collapsed"},this);if(void 0===timespanStart)throw new Error("Needed TimespanPicker could not be instantiated");timespanStart.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-timespan-picker-start","tchmi-trend-line-chart-template-timespan-picker-start"),this.__elementMenuBar[0].appendChild(timespanStart.getElement()[0]),this.__menuBarControls.push(timespanStart),this.__startDatatype===TcHmiTrendLineChart.Datatype.Timespan&&this.__start&&timespanStart.setValue(this.__start);let timespanButtonStart=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_timespanButtonStart",{"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_Start_Timespan%/l%"},this);if(void 0===timespanButtonStart)throw new Error("Needed Button could not be instantiated");timespanButtonStart.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-timespan-button-start","tchmi-trend-line-chart-template-timespan-button-start"),this.__elementMenuBar[0].appendChild(timespanButtonStart.getElement()[0]),this.__menuBarControls.push(timespanButtonStart);let datetimeStart=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiDateTimePicker",this.__id+"_datetimeStart",{"data-tchmi-visibility":"Collapsed"},this);if(void 0===datetimeStart)throw new Error("Needed DateTimePicker could not be instantiated");datetimeStart.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-date-time-picker-start","tchmi-trend-line-chart-template-date-time-picker-start"),this.__elementMenuBar[0].appendChild(datetimeStart.getElement()[0]),this.__menuBarControls.push(datetimeStart),this.__startDatatype===TcHmiTrendLineChart.Datatype.Datetime&&this.__start&&datetimeStart.setValue(this.__start);let datetimeButtonStart=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_datetimeButtonStart",{"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_Start_Datetime%/l%"},this);if(void 0===datetimeButtonStart)throw new Error("Needed Button could not be instantiated");datetimeButtonStart.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-datetime-button-start","tchmi-trend-line-chart-template-datetime-button-start"),this.__elementMenuBar[0].appendChild(datetimeButtonStart.getElement()[0]),this.__menuBarControls.push(datetimeButtonStart);let endTextblock=$(`<label for='${this.__id}_endCombobox'>Label_End</label>`);this.__addLocalizedElement(endTextblock[0],"Label_End");let endCombobox=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiCombobox",this.__id+"_endCombobox",{"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Combobox_Tooltip_End%/l%","data-tchmi-text-font-size":11,"data-tchmi-allow-text-input":!0,"data-tchmi-src-data":[{text:"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Combobox_Data_End%/l%",value:"Latest"}]},this);if(void 0===endCombobox)throw new Error("Needed Combobox could not be instantiated");{endCombobox.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-end-combobox","tchmi-trend-line-chart-template-end-combobox"),this.__elementMenuBar[0].appendChild(endTextblock[0]),this.__elementMenuBar[0].appendChild(endCombobox.getElement()[0]),this.__menuBarControls.push(endCombobox);let end=this.__end;null==end&&(end=""),"Latest"===end?endCombobox.setSelectedIndex(0):(this.isDatetime(end)&&(end=this.__moveUtcToTimeZone(end)),endCombobox.setText(end))}let timespanEnd=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiTimespanPicker",this.__id+"_timespanEnd",{"data-tchmi-visibility":"Collapsed"},this);if(void 0===timespanEnd)throw new Error("Needed TimespanPicker could not be instantiated");timespanEnd.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-timespan-picker-end","tchmi-trend-line-chart-template-timespan-picker-end"),this.__elementMenuBar[0].appendChild(timespanEnd.getElement()[0]),this.__menuBarControls.push(timespanEnd),this.__endDatatype===TcHmiTrendLineChart.Datatype.Timespan&&this.__end&&timespanEnd.setValue(this.__end);let timespanButtonEnd=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_timespanButtonEnd",{"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_End_Timespan%/l%"},this);if(void 0===timespanButtonEnd)throw new Error("Needed Button could not be instantiated");timespanButtonEnd.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-timespan-button-end","tchmi-trend-line-chart-template-timespan-button-end"),this.__elementMenuBar[0].appendChild(timespanButtonEnd.getElement()[0]),this.__menuBarControls.push(timespanButtonEnd);let datetimeEnd=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiDateTimePicker",this.__id+"_datetimeEnd",{"data-tchmi-visibility":"Collapsed"},this);if(void 0===datetimeEnd)throw new Error("Needed DateTimePicker could not be instantiated");datetimeEnd.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-date-time-picker-end","tchmi-trend-line-chart-template-date-time-picker-end"),this.__elementMenuBar[0].appendChild(datetimeEnd.getElement()[0]),this.__menuBarControls.push(datetimeEnd),this.__endDatatype===TcHmiTrendLineChart.Datatype.Datetime&&this.__end&&datetimeEnd.setValue(this.__end);let datetimeButtonEnd=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_datetimeButtonEnd",{"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_End_Datetime%/l%"},this);if(void 0===datetimeButtonEnd)throw new Error("Needed Button could not be instantiated");datetimeButtonEnd.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-datetime-button-end","tchmi-trend-line-chart-template-datetime-button-end"),this.__elementMenuBar[0].appendChild(datetimeButtonEnd.getElement()[0]),this.__menuBarControls.push(datetimeButtonEnd);let resetButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_resetButton",{"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_Play%/l%","data-tchmi-is-enabled":!1},this);if(void 0===resetButton)throw new Error("Needed Button could not be instantiated");resetButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-reset","tchmi-trend-line-chart-template-reset"),this.__elementMenuBar[0].appendChild(resetButton.getElement()[0]),this.__menuBarControls.push(resetButton);let stopButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_stopButton",{"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_Pause%/l%","data-tchmi-is-enabled":!1},this);if(void 0===stopButton)throw new Error("Needed Button could not be instantiated");stopButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-stop","tchmi-trend-line-chart-template-stop"),this.__elementMenuBar[0].appendChild(stopButton.getElement()[0]),this.__menuBarControls.push(stopButton);let panxButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",this.__id+"_panxButton",{"data-tchmi-is-enabled":!1,"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_PanX%/l%"},this);if(void 0===panxButton)throw new Error("Needed ToggleButton could not be instantiated");panxButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-panx","tchmi-trend-line-chart-template-panx"),this.__elementMenuBar[0].appendChild(panxButton.getElement()[0]),this.__menuBarControls.push(panxButton);let panxyButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",this.__id+"_panxyButton",{"data-tchmi-is-enabled":!1,"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_PanXY%/l%"},this);if(void 0===panxyButton)throw new Error("Needed ToggleButton could not be instantiated");panxyButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-panxy","tchmi-trend-line-chart-template-panxy"),this.__elementMenuBar[0].appendChild(panxyButton.getElement()[0]),this.__menuBarControls.push(panxyButton);let zoomxButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",this.__id+"_zoomxButton",{"data-tchmi-is-enabled":!1,"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_ZoomX%/l%"},this);if(void 0===zoomxButton)throw new Error("Needed ToggleButton could not be instantiated");zoomxButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-zoomx","tchmi-trend-line-chart-template-zoomx"),this.__elementMenuBar[0].appendChild(zoomxButton.getElement()[0]),this.__menuBarControls.push(zoomxButton);let zoomxyButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiToggleButton",this.__id+"_zoomxyButton",{"data-tchmi-is-enabled":!1,"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_ZoomXY%/l%"},this);if(void 0===zoomxyButton)throw new Error("Needed ToggleButton could not be instantiated");zoomxyButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-zoomxy","tchmi-trend-line-chart-template-zoomxy"),this.__elementMenuBar[0].appendChild(zoomxyButton.getElement()[0]),this.__menuBarControls.push(zoomxyButton);let resetZoomButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_resetZoomButton",{"data-tchmi-tooltip":"%l%Control::TcHmi.Controls.Beckhoff.TcHmiTrendLineChart::Button_Tooltip_ResetZoomPan%/l%","data-tchmi-is-enabled":!1},this);if(void 0===resetZoomButton)throw new Error("Needed Button could not be instantiated");resetZoomButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-reset-zoom","tchmi-trend-line-chart-template-reset-zoom"),this.__elementMenuBar[0].appendChild(resetZoomButton.getElement()[0]),this.__menuBarControls.push(resetZoomButton);let optionsButton=TcHmi.ControlFactory.createEx("TcHmi.Controls.Beckhoff.TcHmiButton",this.__id+"_optionsButton",{"data-tchmi-visibility":"Collapsed"},this);if(void 0===optionsButton)throw new Error("Needed Button could not be instantiated");optionsButton.getElement()[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-options","tchmi-trend-line-chart-template-options"),this.__elementMenuBar[0].appendChild(optionsButton.getElement()[0]),this.__menuBarControls.push(optionsButton);let searchId=this.__id+"_panxButton";this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanXY?searchId=this.__id+"_panxyButton":this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomX?searchId=this.__id+"_zoomxButton":this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomXY&&(searchId=this.__id+"_zoomxyButton");for(let i=0,ii=this.__menuBarControls.length;i<ii;i++)if(this.__menuBarControls[i]&&"TcHmi.Controls.Beckhoff.TcHmiToggleButton"===this.__menuBarControls[i].getType()){let toggleButton=this.__menuBarControls[i];toggleButton.setToggleGroup(this.__id+".interactions"),this.__menuBarControls[i].getId()===searchId&&toggleButton.setToggleState("Active")}}__attach(){super.__attach(),this.__resizeEventDestroyEvent=TcHmi.EventProvider.register(this.__id+".onResized",this.__rebuild()),this.__themeDataLoadedEventDestroyEvent=TcHmi.EventProvider.register("onThemeDataChanged",this.__rebuild()),this.__onPressedStopDestroyEvent=TcHmi.EventProvider.register(this.__id+"_stopButton.onPressed",this.__onPressed()),this.__onPressedTimespanStartDestroyEvent=TcHmi.EventProvider.register(this.__id+"_timespanButtonStart.onPressed",this.__onPressed()),this.__onPressedDatetimeStartDestroyEvent=TcHmi.EventProvider.register(this.__id+"_datetimeButtonStart.onPressed",this.__onPressed()),this.__onPressedTimespanEndDestroyEvent=TcHmi.EventProvider.register(this.__id+"_timespanButtonEnd.onPressed",this.__onPressed()),this.__onPressedDatetimeEndDestroyEvent=TcHmi.EventProvider.register(this.__id+"_datetimeButtonEnd.onPressed",this.__onPressed()),this.__onIsActiveChagedPanxDestroyEvent=TcHmi.EventProvider.register(this.__id+"_panxButton.onStateChanged",this.__onIsActiveChaged()),this.__onIsActiveChagedPanxyDestroyEvent=TcHmi.EventProvider.register(this.__id+"_panxyButton.onStateChanged",this.__onIsActiveChaged()),this.__onIsActiveChagedZoomxDestroyEvent=TcHmi.EventProvider.register(this.__id+"_zoomxButton.onStateChanged",this.__onIsActiveChaged()),this.__onIsActiveChagedZoomxyDestroyEvent=TcHmi.EventProvider.register(this.__id+"_zoomxyButton.onStateChanged",this.__onIsActiveChaged()),this.__onPressedResetZoomDestroyEvent=TcHmi.EventProvider.register(this.__id+"_resetZoomButton.onPressed",this.__onPressed()),this.__onPressedResetDestroyEvent=TcHmi.EventProvider.register(this.__id+"_resetButton.onPressed",this.__onPressed()),this.__onPressedOptionsDestroyEvent=TcHmi.EventProvider.register(this.__id+"_optionsButton.onPressed",this.__onPressed()),this.__onUserInteractionFinishedStartDestroyEvent=TcHmi.EventProvider.register(this.__id+"_startCombobox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onUserInteractionFinishedEndDestroyEvent=TcHmi.EventProvider.register(this.__id+"_endCombobox.onUserInteractionFinished",this.__onUserInteractionFinished()),this.__onValueChangedDatetimeEndDestroyEvent=TcHmi.EventProvider.register(this.__id+"_datetimeEnd.onValueChanged",this.__onValueChanged()),this.__onValueChangedDatetimeStartDestroyEvent=TcHmi.EventProvider.register(this.__id+"_datetimeStart.onValueChanged",this.__onValueChanged()),this.__onValueChangedTimespanEndDestroyEvent=TcHmi.EventProvider.register(this.__id+"_timespanEnd.onValueChanged",this.__onValueChanged()),this.__onValueChangedTimespanStartDestroyEvent=TcHmi.EventProvider.register(this.__id+"_timespanStart.onValueChanged",this.__onValueChanged());const passiveEventOptions={passive:!0,capture:!1},activeEventOptions={passive:!1,capture:!1};document.addEventListener("mousemove",this.__mousemoveHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),document.addEventListener("mouseup",this.__mouseupHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),document.addEventListener("touchmove",this.__touchmoveHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&activeEventOptions),document.addEventListener("touchend",this.__touchendHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&activeEventOptions),this.__processShowMenuBar(),this.__processMenuBarPosition(),this.__processMenuBarLabelFontFamily(!1),this.__processMenuBarLabelFontSize(!1),this.__processMenuBarLabelFontStyle(!1),this.__processMenuBarLabelFontWeight(!1),this.__processMenuBarLabelFontColor(!1),this.__calcMenuButtons(),this.__lineGraphDescriptionSelected&&this.__lineGraphDescriptionSelected.length>0&&this.__openWebsocket()}__detach(){super.__detach(),null!==this.__resizeEventDestroyEvent&&(this.__resizeEventDestroyEvent(),this.__resizeEventDestroyEvent=null),null!==this.__themeDataLoadedEventDestroyEvent&&(this.__themeDataLoadedEventDestroyEvent(),this.__themeDataLoadedEventDestroyEvent=null),null!==this.__onAttachedMenuButtonsEvent&&(this.__onAttachedMenuButtonsEvent(),this.__onAttachedMenuButtonsEvent=null),null!==this.__onPressedStopDestroyEvent&&(this.__onPressedStopDestroyEvent(),this.__onPressedStopDestroyEvent=null),null!==this.__onPressedTimespanStartDestroyEvent&&(this.__onPressedTimespanStartDestroyEvent(),this.__onPressedTimespanStartDestroyEvent=null),null!==this.__onPressedDatetimeStartDestroyEvent&&(this.__onPressedDatetimeStartDestroyEvent(),this.__onPressedDatetimeStartDestroyEvent=null),null!==this.__onPressedTimespanEndDestroyEvent&&(this.__onPressedTimespanEndDestroyEvent(),this.__onPressedTimespanEndDestroyEvent=null),null!==this.__onPressedDatetimeEndDestroyEvent&&(this.__onPressedDatetimeEndDestroyEvent(),this.__onPressedDatetimeEndDestroyEvent=null),null!==this.__onIsActiveChagedPanxDestroyEvent&&(this.__onIsActiveChagedPanxDestroyEvent(),this.__onIsActiveChagedPanxDestroyEvent=null),null!==this.__onIsActiveChagedPanxyDestroyEvent&&(this.__onIsActiveChagedPanxyDestroyEvent(),this.__onIsActiveChagedPanxyDestroyEvent=null),null!==this.__onIsActiveChagedZoomxDestroyEvent&&(this.__onIsActiveChagedZoomxDestroyEvent(),this.__onIsActiveChagedZoomxDestroyEvent=null),null!==this.__onIsActiveChagedZoomxyDestroyEvent&&(this.__onIsActiveChagedZoomxyDestroyEvent(),this.__onIsActiveChagedZoomxyDestroyEvent=null),null!==this.__onPressedResetZoomDestroyEvent&&(this.__onPressedResetZoomDestroyEvent(),this.__onPressedResetZoomDestroyEvent=null),null!==this.__onPressedResetDestroyEvent&&(this.__onPressedResetDestroyEvent(),this.__onPressedResetDestroyEvent=null),null!==this.__onPressedOptionsDestroyEvent&&(this.__onPressedOptionsDestroyEvent(),this.__onPressedOptionsDestroyEvent=null),null!==this.__onUserInteractionFinishedStartDestroyEvent&&(this.__onUserInteractionFinishedStartDestroyEvent(),this.__onUserInteractionFinishedStartDestroyEvent=null),null!==this.__onUserInteractionFinishedEndDestroyEvent&&(this.__onUserInteractionFinishedEndDestroyEvent(),this.__onUserInteractionFinishedEndDestroyEvent=null),null!==this.__onValueChangedDatetimeStartDestroyEvent&&(this.__onValueChangedDatetimeStartDestroyEvent(),this.__onValueChangedDatetimeStartDestroyEvent=null),null!==this.__onValueChangedDatetimeEndDestroyEvent&&(this.__onValueChangedDatetimeEndDestroyEvent(),this.__onValueChangedDatetimeEndDestroyEvent=null),null!==this.__onValueChangedTimespanStartDestroyEvent&&(this.__onValueChangedTimespanStartDestroyEvent(),this.__onValueChangedTimespanStartDestroyEvent=null),null!==this.__onValueChangedTimespanEndDestroyEvent&&(this.__onValueChangedTimespanEndDestroyEvent(),this.__onValueChangedTimespanEndDestroyEvent=null),null!==this.__subscriptionId&&(TcHmi.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null),null!==this.__requestId&&(TcHmi.Server.releaseRequest(this.__requestId),this.__requestId=null);const passiveEventOptions={passive:!0,capture:!1},activeEventOptions={passive:!1,capture:!1};if(document.removeEventListener("mousemove",this.__mousemoveHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),document.removeEventListener("mouseup",this.__mouseupHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),document.removeEventListener("touchmove",this.__touchmoveHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&activeEventOptions),document.removeEventListener("touchend",this.__touchendHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&activeEventOptions),null!==this.__lineChart&&void 0!==this.__lineChart){let canvas=this.__lineChart.getCanvasDrawing();null!==canvas&&(canvas[0].removeEventListener("click",this.__clickHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),canvas[0].removeEventListener("mousedown",this.__mousedownHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),canvas[0].removeEventListener("touchstart",this.__touchstartHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&activeEventOptions),canvas[0].removeEventListener("mousemove",this.__mousemoveTooltipHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),canvas[0].removeEventListener("wheel",this.__mousewheelHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions)),this.__lineChart.remove(),this.__lineChart=null}this.__holdTimer&&(clearTimeout(this.__holdTimer),this.__holdTimer=0),this.__wheelInfo.timeout&&(window.clearTimeout(this.__wheelInfo.timeout),this.__wheelInfo.timeout=0)}destroy(){var _a;this.__keepAlive||(super.destroy(),this.__elementLegend[0].removeEventListener("mousedown",this.__onCheckboxMouseDown),this.__elementLegend[0].removeEventListener("touchstart",this.__onCheckboxTouchStart),null===(_a=this.__destroyLocalizationWatch)||void 0===_a||_a.call(this))}__addLocalizedElement(element,key,...parameters){let info={key:key};if(0!==parameters.length&&(info.parameters=parameters),this.__localizedElements.set(element,info),this.__localizationReader){let localizedText=this.__localizationReader.get(key);info.parameters&&(localizedText=tchmi_format_string(localizedText,...info.parameters)),element.textContent=tchmi_decode_control_characters(localizedText)}}__removeLocalizedElement(element){this.__localizedElements.delete(element)}isDatetime(date){return!!date&&!isNaN(new Date(date).getTime())}isKeyword(keyword){switch(keyword){case"Latest":case"First":return!0}return!1}isTimespan(timespan){return!!timespan&&(!this.isKeyword(timespan)&&!this.isDatetime(timespan))}__onPressed(){let __this=this;return function(evt){null!==__this.__elementMenuBarDropdown[0].parentElement&&__this.showOptions(),-1!==evt.name.search("stop")?__this.stop():-1!==evt.name.search("resetZoom")?__this.resetZoom():-1!==evt.name.search("reset")?__this.reset():-1!==evt.name.search("options")?__this.showOptions():-1!==evt.name.search("timespanButtonStart")?__this.__menuBarControls[1].openTimespanPicker():-1!==evt.name.search("datetimeButtonStart")?__this.__menuBarControls[3].openDateTimePicker():-1!==evt.name.search("timespanButtonEnd")?__this.__menuBarControls[6].openTimespanPicker():-1!==evt.name.search("datetimeButtonEnd")&&__this.__menuBarControls[8].openDateTimePicker()}}__onUserInteractionFinished(){let __this=this;return function(evt){if(-1!==evt.name.search("start")){let value=__this.__menuBarControls[0].getSelectedValue();null===value&&(value=__this.__menuBarControls[0].getText()),value=value?value.toString():null,__this.isDatetime(value)&&(value=__this.__moveTimeZoneToUtc(value)),__this.setStart(value)}else if(-1!==evt.name.search("end")){let value=__this.__menuBarControls[5].getSelectedValue();null===value&&(value=__this.__menuBarControls[5].getText()),value=value?value.toString():null,__this.isDatetime(value)&&(value=__this.__moveTimeZoneToUtc(value)),__this.setEnd(value)}}}__onIsActiveChaged(){let __this=this;return function(evt){let isMouseModeActive=!1;for(let i=0,ii=__this.__menuBarControls.length;i<ii;i++)if(__this.__menuBarControls[i]&&__this.__menuBarControls[i].getId()===__this.__id+"_panxButton"){"Active"===__this.__menuBarControls[i].getToggleState()&&(__this.__mouseMode=TcHmiTrendLineChart.MouseMode.PanX,TcHmi.EventProvider.raise(__this.__id+".onPropertyChanged",{propertyName:"MouseMode"}),isMouseModeActive=!0)}else if(__this.__menuBarControls[i]&&__this.__menuBarControls[i].getId()===__this.__id+"_panxyButton"){"Active"===__this.__menuBarControls[i].getToggleState()&&(__this.__mouseMode=TcHmiTrendLineChart.MouseMode.PanXY,TcHmi.EventProvider.raise(__this.__id+".onPropertyChanged",{propertyName:"MouseMode"}),isMouseModeActive=!0)}else if(__this.__menuBarControls[i]&&__this.__menuBarControls[i].getId()===__this.__id+"_zoomxButton"){"Active"===__this.__menuBarControls[i].getToggleState()&&(__this.__mouseMode=TcHmiTrendLineChart.MouseMode.ZoomX,TcHmi.EventProvider.raise(__this.__id+".onPropertyChanged",{propertyName:"MouseMode"}),isMouseModeActive=!0)}else if(__this.__menuBarControls[i]&&__this.__menuBarControls[i].getId()===__this.__id+"_zoomxyButton"){"Active"===__this.__menuBarControls[i].getToggleState()&&(__this.__mouseMode=TcHmiTrendLineChart.MouseMode.ZoomXY,TcHmi.EventProvider.raise(__this.__id+".onPropertyChanged",{propertyName:"MouseMode"}),isMouseModeActive=!0)}if(null!==__this.__elementMenuBarDropdown[0].parentElement&&__this.showOptions(),!isMouseModeActive){let panxButton=__this.__menuBarControls[12];null!=panxButton&&panxButton.getId()===__this.__id+"_panxButton"&&(__this.__mouseMode=TcHmiTrendLineChart.MouseMode.PanX,TcHmi.EventProvider.raise(__this.__id+".onPropertyChanged",{propertyName:"MouseMode"}),panxButton.setToggleState("Active"),null!==__this.__elementMenuBarDropdown[0].parentElement&&__this.showOptions())}}}__onValueChanged(){let __this=this;return function(evt){if(!__this.__nowIsValueChanged){if(-1!==evt.name.search("timespanStart")){if(__this.__menuBarControls[0]&&__this.__menuBarControls[1]){__this.__nowIsValueChanged=!0;let value=__this.__menuBarControls[1].getValue();__this.setStart(value)}}else if(-1!==evt.name.search("datetimeStart")){if(__this.__menuBarControls[0]&&__this.__menuBarControls[3]){__this.__nowIsValueChanged=!0;let value=__this.__menuBarControls[3].getValue();__this.setStart(value)}}else if(-1!==evt.name.search("timespanEnd")){if(__this.__menuBarControls[5]&&__this.__menuBarControls[6]){__this.__nowIsValueChanged=!0;let value=__this.__menuBarControls[6].getValue();__this.setEnd(value)}}else if(-1!==evt.name.search("datetimeEnd")&&__this.__menuBarControls[5]&&__this.__menuBarControls[8]){__this.__nowIsValueChanged=!0;let value=__this.__menuBarControls[8].getValue();__this.setEnd(value)}__this.__nowIsValueChanged=!1}}}__rebuild(){return(evt,ctrl)=>{this.__isAttached&&!TCHMI_DESIGNER&&this.__lineGraphDescriptionSelected&&this.__lineGraphDescriptionSelected.length>0?this.__openWebsocket():this.__drawLineChart(),this.__calcMenuButtons()}}__openWebsocket(){TCHMI_DESIGNER||(this.__elementLoading[0].appendChild(this.__loadingSpinner),this.__getData())}__milliSecToIso(milliSec){if(0===milliSec)return"PT0S";let isneg=!1;milliSec<0&&(isneg=!0,milliSec*=-1);let years=Math.floor(milliSec/3154e7),months=Math.floor(milliSec%3154e7/2628e6),days=Math.floor(milliSec%3154e7%2628e6/864e5),hours=Math.floor(milliSec%3154e7%2628e6%864e5/36e5),minutes=Math.floor(milliSec%3154e7%2628e6%864e5%36e5/6e4),seconds=Math.floor(milliSec%3154e7%2628e6%864e5%36e5%6e4/1e3),f=Math.floor(milliSec%3154e7%2628e6%864e5%36e5%6e4%1e3),isoString="";return isneg&&(isoString+="-"),isoString+="P",years>0&&(isoString+=years+"Y"),months>0&&(isoString+=months+"M"),days>0&&(isoString+=days+"D"),(hours>0||minutes>0||seconds>0||f>0)&&(isoString+="T"),hours>0&&(isoString+=hours+"H"),minutes>0&&(isoString+=minutes+"M"),(seconds>0||0===days&&0===hours&&0===minutes)&&(isoString+=seconds),f>0&&(isoString+="."+("00"+f).slice(-3).replace(/\.?0+$/,"")),(f>0||seconds>0)&&(isoString+="S"),isoString}__isoToMilliSec(t){let seconds=0,minutes=0,hours=0,days=0,months=0,years=0,isneg=!1,isTime=!1,current=t.split("");for(let i=0,ii=current.length;i<ii;i++){let num=0,sNum="";for(;current[i]>="0"&&current[i]<="9"||"."===current[i];)sNum+=current[i],i++,num=parseFloat(sNum);switch(current[i]){case"-":isneg=!0;break;case"Y":years=num;break;case"D":days=num;break;case"T":isTime=!0;break;case"H":hours=num;break;case"M":isTime?minutes=num:months=num;break;case"S":seconds=num}}let milliSec=3154e7*years;return milliSec+=2628e6*months,milliSec+=864e5*days,milliSec+=36e5*hours,milliSec+=6e4*minutes,milliSec+=1e3*seconds,isneg&&(milliSec*=-1),milliSec}__getData(){if(this.__isAttached&&(this.__tooltipInformation.show&&(this.__elementTooltip.css("visibility","hidden"),this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]}),null!==this.__subscriptionId&&(TcHmi.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null),this.__internalLineGraphDescription)){let width=this.__elementTemplateRoot.width(),yAxis=[];for(let i=0,ii=this.__internalLineGraphDescription.length;i<ii;i++)null!==this.__internalLineGraphDescription[i]&&yAxis.push({symbol:this.__internalLineGraphDescription[i].symbol});let writeValue,writeValueWindow,symbol=this.__serverDomain+".GetTrendLineData",symbolWindow=this.__serverDomain+".GetTrendLineWindow";writeValue={chartName:this.__id,xAxisStart:this.__internalStart,xAxisEnd:this.__internalEnd,yAxes:yAxis,displayWidth:width},writeValueWindow={chartName:this.__id,xAxisStart:this.__internalStart,xAxisEnd:this.__internalEnd,yAxes:yAxis};for(let i=0,ii=this.__menuBarControls.length;i<ii;i++)this.__menuBarControls[i]&&-1===this.__menuBarControls[i].getId().search("options")&&"Visible"===this.__menuBarControls[i].getVisibility()&&this.__menuBarControls[i].setIsEnabled(!1);if("Latest"===this.__internalEnd&&null!==this.__internalStart||null!==this.__internalEnd&&"First"===this.__internalStart)this.__subscriptionId=TcHmi.Server.subscribe([{commandOptions:["SendErrorMessage"],symbol:symbol,writeValue:writeValue},{commandOptions:["SendErrorMessage"],symbol:symbolWindow,writeValue:writeValueWindow}],void 0===this.__interval?this.getAttributeDefaultValueInternal("Interval"):this.__interval,this.__getDataCallback());else{let request={requestType:"ReadWrite",commands:[{commandOptions:["SendErrorMessage"],symbol:symbol,writeValue:writeValue}]};this.__requestId=TcHmi.Server.request(request,this.__getDataCallback())}}}__getDataCallback(){let __this=this;return function(result){__this.__requestId=null;let lastInteraction=__this.__lastInteraction;if(result.error===TcHmi.Errors.NONE&&result.response){if(null!==result.response.error&&void 0!==result.response.error)return lastInteraction?(__this.__loadingSpinner.remove(),TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+__this.getId()+"] Server responds with error. Details: "+TcHmi.Log.buildMessage(result.response.error)),void __this.__resetBeforeLastManipulation()):274===result.response.error.code&&__this.__getDataCounter<100?(__this.__getDataCounter++,void window.setTimeout((function(){__this.__getData()}),50)):(__this.__loadingSpinner.remove(),null!==result.response.commands&&void 0!==result.response.commands&&TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source = Control, Class = TcHmiTrendLineChart, Id = "+__this.getId()+"] Server responds with error. Details: "+TcHmi.Log.buildMessage(result.response.error)),void __this.__reset());if(__this.__getDataCounter=0,null!==result.response.commands&&void 0!==result.response.commands){let isError=!1;for(let k=0,kk=result.response.commands.length;k<kk;k++)if(null!==result.response.commands[k].error&&void 0!==result.response.commands[k].error){if(__this.__loadingSpinner.remove(),isError=!0,TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error(`[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id=${__this.getId()}] Server responds with error for command for symbol=${result.response.commands[k].symbol}. Details: ${TcHmi.Log.buildMessage(result.response.commands[k].error)}`),lastInteraction)return void __this.__resetBeforeLastManipulation();__this.__reset()}else if(null!==result.response.commands[k].readValue&&void 0!==result.response.commands[k].readValue)if(0===__this.__getDataCounter){if(__this.__loadingSpinner.remove(),void 0!==__this.__subscriptionId)if(result.response.commands[k].symbol===__this.__serverDomain+".GetTrendLineData"){if(null!==__this.__lineGraphData&&__this.__lineGraphData.splice(0,__this.__lineGraphData.length),null!==__this.__lineGraphRawData&&__this.__lineGraphRawData.splice(0,__this.__lineGraphRawData.length),null!==result.response.commands[k].readValue.axesData&&void 0!==result.response.commands[k].readValue.axesData&&result.response.commands[k].readValue.axesData.length>0){let lineGraphData=[];for(let i=0,ii=result.response.commands[k].readValue.axesData.length;i<ii;i++){let line=[];for(let j=0,jj=result.response.commands[k].readValue.axesData[i].length;j<jj;j++){let x=new Date(result.response.commands[k].readValue.axesData[i][j].x).getTime();result.response.commands[k].readValue.axesData[i][j].x=x;let bindPoints=!0,isStart=!1,isStop=!1,flag=result.response.commands[k].readValue.axesData[i][j].flags;void 0!==flag&&("Start"===flag&&j>0?(isStart=!0,line[j-1].bindPoints=!1):"Stop"===flag&&(isStop=!0,bindPoints=!1));let isArea=void 0!==result.response.commands[k].readValue.axesData[i][j].error;isArea&&j>0&&(line[j-1].bindPoints=!1),line.push({x:x,y:result.response.commands[k].readValue.axesData[i][j].y,bindPoints:bindPoints,isArea:isArea})}lineGraphData.push(line)}__this.__lineGraphData=lineGraphData,__this.__lineGraphRawData=result.response.commands[k].readValue.axesData,__this.__endBeforeManipulation=__this.__internalEnd,__this.__startBeforeManipulation=__this.__internalStart}}else result.response.commands[k].symbol===__this.__serverDomain+".GetTrendLineWindow"&&(__this.__internalStartServer=new Date(result.response.commands[k].readValue.xAxisStart).getTime(),__this.__internalEndServer=new Date(result.response.commands[k].readValue.xAxisEnd).getTime())}else{if(isError=!0,__this.__loadingSpinner.remove(),lastInteraction)return void __this.__resetBeforeLastManipulation();__this.__reset()}else{if(isError=!0,__this.__loadingSpinner.remove(),lastInteraction)return void __this.__resetBeforeLastManipulation();__this.__reset()}isError||__this.__drawLineChart()}else{if(__this.__loadingSpinner.remove(),lastInteraction)return void __this.__resetBeforeLastManipulation();__this.__reset()}}else{if(__this.__loadingSpinner.remove(),result.error&&TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+__this.getId()+"] Framework error= "+result.error+", name="+TcHmi.Errors[result.error]+" while fetching data from server."),lastInteraction)return void __this.__resetBeforeLastManipulation();__this.__reset()}"First"!==__this.__internalStart&&"Latest"!==__this.__internalEnd?__this.__setMenuButtonsFromStop():(__this.__setMenuButtonsFromStart(),__this.__startEndBeforeZoom={end:__this.__internalEnd,start:__this.__internalStart})}}__resetBeforeLastManipulation(){if(null!==this.__lineChart){let canvas=this.__lineChart.getCanvasDrawing();if(null===canvas)return;let context=canvas[0].getContext("2d");if(null!==context){if(context.setTransform(1,0,0,1,0,0),this.__lineChart.setLineChanged(!0),this.__lineChart.draw(),null===this.__lineGraphData)return;if(null===this.__internalEnd)return;this.__endBeforeManipulation!==this.__internalEnd&&(this.__internalEnd=this.__endBeforeManipulation,null===this.__internalEnd?this.__endDatatype=null:this.isDatetime(this.__internalEnd)?this.__endDatatype=TcHmiTrendLineChart.Datatype.Datetime:this.isKeyword(this.__internalEnd)?this.__endDatatype=TcHmiTrendLineChart.Datatype.Keyword:this.__endDatatype=TcHmiTrendLineChart.Datatype.Timespan),this.__internalStart!==this.__startBeforeManipulation&&(this.__internalStart=this.__startBeforeManipulation,null===this.__internalStart?this.__startDatatype=null:this.isDatetime(this.__internalStart)?this.__startDatatype=TcHmiTrendLineChart.Datatype.Datetime:this.isKeyword(this.__internalStart)?this.__startDatatype=TcHmiTrendLineChart.Datatype.Keyword:this.__startDatatype=TcHmiTrendLineChart.Datatype.Timespan);let canvasZoomingElem=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");canvasZoomingElem.length>0&&canvasZoomingElem[0].classList.add("tchmi-no-pointer-events"),"First"!==this.__internalStart&&"Latest"!==this.__internalEnd?this.__setMenuButtonsFromStop():this.__setMenuButtonsFromStart()}}}__drawLineChart(){let yAxes=[],xAxisAutoscaling=!0,showXAxis=void 0===this.__showXAxis?this.getAttributeDefaultValueInternal("ShowXAxis"):this.__showXAxis,lineGraphDescriptions=[],size=this.__calcSizes();if(0===size.width||0===size.height)return;if(this.__elementChart.css({height:size.height+"px",top:size.top+"px",width:size.width+"px"}),null!==this.__lineChart&&void 0!==this.__lineChart){this.__lineChart.clear(size.width,size.height);let canvasZoomingElem=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");if(canvasZoomingElem.length>0){let htmlCanvas=canvasZoomingElem[0];htmlCanvas.classList.add("tchmi-no-pointer-events");let context=htmlCanvas.getContext("2d");null!==context&&context.clearRect(0,0,size.width,size.height),htmlCanvas.width=size.width,htmlCanvas.height=size.height}}else{this.__lineChart=new TcHmiCharting.LineAreaChart(this.__elementChart,size.width,size.height);let canvasZooming=document.createElement("canvas");canvasZooming.setAttribute("height",size.height.toString()),canvasZooming.setAttribute("width",size.width.toString()),canvasZooming.setAttribute("class","tchmi-no-pointer-events TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming"),canvasZooming.setAttribute("style","position:absolute;width:100%;height:100%;"),this.__elementChart[0].appendChild(canvasZooming),this.__zoomingCanvasContext=canvasZooming.getContext("2d");let canvas=this.__lineChart.getCanvasDrawing();if(null!==canvas){const passiveEventOptions={passive:!0,capture:!1},activeEventOptions={passive:!1,capture:!1};canvas[0].addEventListener("click",this.__clickHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),canvas[0].addEventListener("mousedown",this.__mousedownHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),canvas[0].addEventListener("touchstart",this.__touchstartHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&activeEventOptions),canvas[0].addEventListener("mousemove",this.__mousemoveTooltipHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions),canvas[0].addEventListener("wheel",this.__mousewheelHandler,!!TCHMI_EVENT_OPTION_OBJECT_SUPPORTED&&passiveEventOptions)}}this.__lineChart.addXAxis();let xAxis=this.__lineChart.getXAxis();if(null!==xAxis){if(xAxis.setShowAxis(showXAxis),xAxis.setShowSubTicks(void 0===this.__showXSubTicks?this.getAttributeDefaultValueInternal("ShowXSubTicks"):this.__showXSubTicks),xAxis.setShowAxisName(void 0===this.__showXAxisName?this.getAttributeDefaultValueInternal("ShowXAxisName"):this.__showXAxisName),TcHmi.isSolidColor(this.__xAxisColor)?xAxis.setAxisColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__xAxisColor)):xAxis.setAxisColor(null),xAxis.setDecimalPlaces(0),xAxis.setAxisName(TcHmi.ValueConverter.toString(this.__xAxisName)),TcHmi.isSolidColor(this.__xAxisNameFontColor)?xAxis.setAxisNameFontColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__xAxisNameFontColor)):xAxis.setAxisNameFontColor(null),xAxis.setAxisNameFontFamily(this.__xAxisNameFontFamily),xAxis.setAxisNameFontSize(void 0===this.__xAxisNameFontSize?this.getAttributeDefaultValueInternal("XAxisNameFontSize"):this.__xAxisNameFontSize),xAxis.setAxisNameFontWeight(void 0===this.__xAxisNameFontWeight?this.getAttributeDefaultValueInternal("XAxisNameFontWeight"):this.__xAxisNameFontWeight),xAxis.setAxisWidth(void 0===this.__xAxisWidth?this.getAttributeDefaultValueInternal("XAxisWidth"):this.__xAxisWidth),TcHmi.isSolidColor(this.__xLabelFontColor)?xAxis.setLabelFontColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__xLabelFontColor)):xAxis.setLabelFontColor(null),xAxis.setLabelFontFamily(this.__xLabelFontFamily),xAxis.setLabelFontSize(void 0===this.__xLabelFontSize?this.getAttributeDefaultValueInternal("XLabelFontSize"):this.__xLabelFontSize),xAxis.setLabelFontWeight(void 0===this.__xLabelFontWeight?this.getAttributeDefaultValueInternal("XLabelFontWeight"):this.__xLabelFontWeight),xAxis.setMainTickSteps(void 0===this.__xMainTickSteps?this.getAttributeDefaultValueInternal("XMainTickSteps"):this.__xMainTickSteps),TCHMI_DESIGNER)xAxis.setShowLabels(!1),null!==this.__yAxisSelected&&this.__yAxisSelected.length>0&&(yAxes=this.__yAxisSelected.slice()),xAxisAutoscaling=!1;else if(this.__internalEnd&&this.__internalStart&&this.__lineGraphDescriptionSelected&&this.__lineGraphDescriptionSelected.length>0){let start,diffStart,end,diffEnd;if(this.isDatetime(this.__internalStart)){start=new Date(this.__internalStart).getTime()}else this.isKeyword(this.__internalStart)?start=this.__internalStartServer:diffStart=this.__isoToMilliSec(this.__internalStart);if(this.isDatetime(this.__internalEnd)){end=new Date(this.__internalEnd).getTime()}else this.isKeyword(this.__internalEnd)?end=this.__internalEndServer:diffEnd=this.__isoToMilliSec(this.__internalEnd);if(start||end){if(start)xAxis.setMainTickStartValue(start);else if(end&&void 0!==diffStart){let diff=end-diffStart;xAxis.setMainTickStartValue(diff)}if(end)xAxis.setMainTickEndValue(end);else if(start&&void 0!==diffEnd){let diff=start+diffEnd;xAxis.setMainTickEndValue(diff)}showXAxis?xAxis.setShowLabels(void 0===this.__xShowLabels?this.getAttributeDefaultValueInternal("XShowLabels"):this.__xShowLabels):xAxis.setShowLabels(!1),xAxis.setXAxisCallback(this.__xAxisCallbackFunction())}else xAxis.setShowAxis(!1),xAxis.setShowLabels(!1);null===this.__lineGraphData||0===this.__lineGraphData.length?(xAxisAutoscaling=!1,xAxis.setShowLabels(!1),null!==this.__yAxisSelected&&(yAxes=this.__yAxisSelected.slice())):this.__lineGraphDescriptionSelected&&this.__yAxisSelected&&(lineGraphDescriptions=this.__lineGraphDescriptionSelected.slice(),yAxes=this.__yAxisSelected.slice())}else xAxis.setShowLabels(!1),null!==this.__yAxisSelected&&this.__yAxisSelected.length>0&&(yAxes=this.__yAxisSelected.slice()),xAxisAutoscaling=!1;xAxis.setSubTickSteps(void 0===this.__xSubTickSteps?this.getAttributeDefaultValueInternal("XSubTickSteps"):this.__xSubTickSteps),xAxis.setAutoScaling(!1)}if(null!=yAxes)for(let i=0,ii=yAxes.length;i<ii;i++){this.__lineChart.addYAxis(TcHmi.ValueConverter.toEnum(yAxes[i].position,TcHmiTrendLineChart.AxisPosition,TcHmiTrendLineChart.AxisPosition.Left));let yAxis=this.__lineChart.getYAxisAtPosition(this.__lineChart.getYAxis().length-1);yAxis.setShowAxis(TcHmi.ValueConverter.toBoolean(yAxes[i].showAxis,!0)),yAxis.setAutoScaling(TcHmi.ValueConverter.toBoolean(yAxes[i].autoScaling,!1));let axisColor=yAxes[i].axisColor;if(TcHmi.isSolidColor(axisColor))yAxis.setAxisColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(axisColor));else{let themeLineColor=TcHmi.Theme.Resources.get(this,"YAxisAxisColor");TcHmi.isSolidColor(themeLineColor.value)?yAxis.setAxisColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(themeLineColor.value)):yAxis.setAxisColor(null)}yAxis.setAxisName(TcHmi.ValueConverter.toString(yAxes[i].axisName));let axisNameFontColor=yAxes[i].axisNameFontColor;if(TcHmi.isSolidColor(axisNameFontColor))yAxis.setAxisNameFontColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(axisNameFontColor));else{let themeAxisNameFontColor=TcHmi.Theme.Resources.get(this,"YAxisAxisNameFontColor");TcHmi.isSolidColor(themeAxisNameFontColor.value)?yAxis.setAxisNameFontColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(themeAxisNameFontColor.value)):yAxis.setAxisNameFontColor(null)}yAxis.setAxisNameFontFamily(TcHmi.ValueConverter.toFontFamily(yAxes[i].axisNameFontFamily)),yAxis.setAxisNameFontSize(TcHmi.ValueConverter.toNumber(yAxes[i].axisNameFontSize));let yAxisNameFontWeight=yAxes[i].axisNameFontWeight;void 0!==yAxisNameFontWeight?yAxis.setAxisNameFontWeight(yAxisNameFontWeight):yAxis.setAxisNameFontWeight(null),yAxis.setDecimalPlaces(TcHmi.ValueConverter.toNumber(yAxes[i].decimalPlaces));let labelFontColor=yAxes[i].labelFontColor;if(TcHmi.isSolidColor(labelFontColor))yAxis.setLabelFontColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(labelFontColor));else{let themeLabelFontColor=TcHmi.Theme.Resources.get(this,"YAxisLabelFontColor");TcHmi.isSolidColor(themeLabelFontColor.value)?yAxis.setLabelFontColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(themeLabelFontColor.value)):yAxis.setLabelFontColor(null)}yAxis.setMainTickStartValue(TcHmi.ValueConverter.toNumber(yAxes[i].mainTickMinValue)),yAxis.setMainTickEndValue(TcHmi.ValueConverter.toNumber(yAxes[i].mainTickMaxValue)),yAxis.setShowLabels(TcHmi.ValueConverter.toBoolean(yAxes[i].showLabels,!0)),yAxis.setShowAxisName(TcHmi.ValueConverter.toBoolean(yAxes[i].showAxisName,!0)),yAxis.setUnit(TcHmi.ValueConverter.toString(yAxes[i].unit)),yAxis.setAxisWidth(void 0===this.__yAxisWidth?this.getAttributeDefaultValueInternal("YAxisWidth"):this.__yAxisWidth),yAxis.setLabelFontFamily(this.__yLabelFontFamily),yAxis.setLabelFontSize(void 0===this.__yLabelFontSize?this.getAttributeDefaultValueInternal("YLabelFontSize"):this.__yLabelFontSize),yAxis.setLabelFontWeight(void 0===this.__yLabelFontWeight?this.getAttributeDefaultValueInternal("YLabelFontWeight"):this.__yLabelFontWeight),yAxis.setMainTickSteps(void 0===this.__yMainTickSteps?this.getAttributeDefaultValueInternal("YMainTickSteps"):this.__yMainTickSteps),yAxis.setSubTickSteps(void 0===this.__ySubTickSteps?this.getAttributeDefaultValueInternal("YSubTickSteps"):this.__ySubTickSteps),yAxis.setShowSubTicks(void 0===this.__showYSubTicks?this.getAttributeDefaultValueInternal("ShowYSubTicks"):this.__showYSubTicks)}if(this.__showGrid){this.__lineChart.addGrid();let grid=this.__lineChart.getGrid();null!==grid&&(grid.setShowHorizontalLines(void 0===this.__gridShowHorizontalLines?this.getAttributeDefaultValueInternal("GridShowHorizontalLines"):this.__gridShowHorizontalLines),grid.setShowVerticalLines(void 0===this.__gridShowVerticalLines?this.getAttributeDefaultValueInternal("GridShowVerticalLines"):this.__gridShowVerticalLines),grid.setLineWidth(void 0===this.__gridLineWidth?this.getAttributeDefaultValueInternal("GridLineWidth"):this.__gridLineWidth),grid.setLineStyle(void 0===this.__gridLineStyle?this.getAttributeDefaultValueInternal("GridLineStyle"):this.__gridLineStyle),TcHmi.isSolidColor(this.__gridLineColor)?grid.setLineColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__gridLineColor)):grid.setLineColor(null),TcHmi.isSolidColor(this.__gridBackgroundColor)?grid.setBackgroundColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__gridBackgroundColor)):grid.setBackgroundColor(null))}this.__lineChart.addSubgrid();let subgrid=this.__lineChart.getSubgrid();if(null!==subgrid&&(subgrid.setShowHorizontalLines(void 0===this.__subgridShowHorizontalLines?this.getAttributeDefaultValueInternal("SubgridShowHorizontalLines"):this.__subgridShowHorizontalLines),subgrid.setShowVerticalLines(void 0===this.__subgridShowVerticalLines?this.getAttributeDefaultValueInternal("SubgridShowVerticalLines"):this.__subgridShowVerticalLines),subgrid.setLineWidth(void 0===this.__subgridLineWidth?this.getAttributeDefaultValueInternal("SubgridLineWidth"):this.__subgridLineWidth),subgrid.setLineStyle(void 0===this.__subgridLineStyle?this.getAttributeDefaultValueInternal("SubgridLineStyle"):this.__subgridLineStyle),TcHmi.isSolidColor(this.__subgridLineColor)?subgrid.setLineColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__subgridLineColor)):subgrid.setLineColor(null)),lineGraphDescriptions&&this.__lineGraphData){for(let i=0,ii=Math.min(lineGraphDescriptions.length,this.__lineGraphData.length);i<ii;i++){let actLineGraphDescription=lineGraphDescriptions[i];if(null!=yAxes&&null!==actLineGraphDescription)for(let j=0,jj=yAxes.length;j<jj;j++)if(yAxes[j].id===actLineGraphDescription.yAxisId){this.__lineChart.addGraph({points:this.__lineGraphData[i],yAxis:this.__lineChart.getYAxisAtPosition(j)});let lineGraph=this.__lineChart.getLineGraphsAtPosition(this.__lineChart.getLineGraphs().length-1);if(null!=lineGraph){let backgroundColor,themeErrorMarkingColor=TcHmi.Theme.Resources.get(this,"ErrorMarkingColor");if(backgroundColor=TcHmi.isSolidColor(themeErrorMarkingColor.value)?TcHmi.StyleProvider.resolveSolidColorAsCssValue(themeErrorMarkingColor.value):"rgba(255, 0, 0, 0.4)",null!==this.__lineGraphRawData){let beginX=null,lastAreaX=null,errorCode=null;for(let l=0,ll=this.__lineGraphRawData[i].length;l<ll;l++){let errorCodeNow=this.__lineGraphRawData[i][l].error;if(void 0!==errorCodeNow)null===beginX?beginX=0===l?this.__lineGraphRawData[i][l].x:this.__lineGraphRawData[i][l-1].x:errorCodeNow!==errorCode&&lastAreaX&&(lineGraph.addArea({beginX:beginX,endX:lastAreaX,backgroundColor:backgroundColor}),beginX=lastAreaX),lastAreaX=this.__lineGraphRawData[i][l].x,errorCode=errorCodeNow;else if(beginX){let mainTickEndValue=xAxis?xAxis.getMainTickEndValue():null;0===l&&mainTickEndValue?lineGraph.addArea({beginX:beginX,endX:mainTickEndValue,backgroundColor:backgroundColor}):lineGraph.addArea({beginX:beginX,endX:this.__lineGraphRawData[i][l].x,backgroundColor:backgroundColor}),beginX=null}}if(beginX){let mainTickEndValue=xAxis?xAxis.getMainTickEndValue():null;this.__lineGraphRawData[i].length-1==0&&mainTickEndValue?this.isTimespan(this.__internalStart)?lineGraph.addArea({beginX:beginX,endX:mainTickEndValue,backgroundColor:backgroundColor,drawLineWithOnePixel:!0}):lineGraph.addArea({beginX:beginX,endX:mainTickEndValue,backgroundColor:backgroundColor}):lineGraph.addArea({beginX:beginX,endX:this.__lineGraphRawData[i][this.__lineGraphRawData[i].length-1].x,backgroundColor:backgroundColor}),beginX=null}}let lineColor=actLineGraphDescription.lineColor;if(TcHmi.isSolidColor(lineColor))lineGraph.setLineColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(lineColor));else{let themeLineColor=TcHmi.Theme.Resources.get(this,"LineGraphDescriptionLineColor");TcHmi.isSolidColor(themeLineColor.value)?lineGraph.setLineColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(themeLineColor.value)):lineGraph.setLineColor(null)}lineGraph.setLineWidth(TcHmi.ValueConverter.toNumber(actLineGraphDescription.lineWidth)),"Latest"!==this.__internalEnd&&"First"!==this.__internalStart?lineGraph.setPointDot(TcHmi.ValueConverter.toBoolean(actLineGraphDescription.pointDotInStopMode,!0)):lineGraph.setPointDot(TcHmi.ValueConverter.toBoolean(actLineGraphDescription.pointDot,!1));let pointDotFillColor=actLineGraphDescription.pointDotFillColor;if(TcHmi.isSolidColor(pointDotFillColor))lineGraph.setPointDotFillColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(pointDotFillColor));else{let themePointDotFillColor=TcHmi.Theme.Resources.get(this,"LineGraphDescriptionPointDotFillColor");TcHmi.isSolidColor(themePointDotFillColor.value)?lineGraph.setPointDotFillColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(themePointDotFillColor.value)):lineGraph.setPointDotFillColor(null)}lineGraph.setPointDotRadius(TcHmi.ValueConverter.toNumber(actLineGraphDescription.pointDotRadius));let pointDotStrokeColor=actLineGraphDescription.pointDotStrokeColor;if(TcHmi.isSolidColor(pointDotStrokeColor))lineGraph.setPointDotStrokeColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(pointDotStrokeColor));else{let themePointDotStrokeColor=TcHmi.Theme.Resources.get(this,"LineGraphDescriptionPointDotStrokeColor");TcHmi.isSolidColor(themePointDotStrokeColor.value)?lineGraph.setPointDotStrokeColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(themePointDotStrokeColor.value)):lineGraph.setPointDotStrokeColor(null)}lineGraph.setPointDotStrokeWidth(TcHmi.ValueConverter.toNumber(actLineGraphDescription.pointDotStrokeWidth))}}}}if(this.__lineChart.setYAxisWidth(void 0===this.__yAxisWidth?this.getAttributeDefaultValueInternal("YAxisWidth"):this.__yAxisWidth),this.__lineChart.setYLabelFontFamily(this.__yLabelFontFamily),this.__lineChart.setYLabelFontSize(void 0===this.__yLabelFontSize?this.getAttributeDefaultValueInternal("YLabelFontSize"):this.__yLabelFontSize),this.__lineChart.setYLabelFontWeight(void 0===this.__yLabelFontWeight?this.getAttributeDefaultValueInternal("YLabelFontWeight"):this.__yLabelFontWeight),this.__lineChart.setYMainTickSteps(void 0===this.__yMainTickSteps?this.getAttributeDefaultValueInternal("YMainTickSteps"):this.__yMainTickSteps),this.__lineChart.setYSubTickSteps(void 0===this.__ySubTickSteps?this.getAttributeDefaultValueInternal("YSubTickSteps"):this.__ySubTickSteps),this.__lineChart.setShowYSubTicks(void 0===this.__showYSubTicks?this.getAttributeDefaultValueInternal("ShowYSubTicks"):this.__showYSubTicks),this.__lineChart.draw(),yAxes.splice(0,yAxes.length),lineGraphDescriptions.splice(0,lineGraphDescriptions.length),null!==xAxis){let startValue=xAxis.getMainTickStartValue();startValue!==this.__actualStartTime&&(this.__actualStartTime=startValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ActualStartTime"}));let endValue=xAxis.getMainTickEndValue();endValue!==this.__actualEndTime&&(this.__actualEndTime=endValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ActualEndTime"}))}}__calcSizes(){var _a,_b;let width=null!==(_a=this.getRenderedWidth())&&void 0!==_a?_a:0,height=null!==(_b=this.getRenderedHeight())&&void 0!==_b?_b:0,top=0,innerHeight=this.__elementChart.innerHeight(),outerHeight=this.__elementChart.outerHeight(!0),innerWidth=this.__elementChart.innerWidth();width-=this.__elementChart.outerWidth(!0)-innerWidth;let outerlegendHeight=this.__elementLegend.outerHeight(!0),outerMenubarHeight=this.__elementMenuBar.outerHeight(!0);return this.__showMenuBar&&(height-=outerMenubarHeight,this.__menuBarPosition&&(TcHmiTrendLineChart.MenuBarPosition[this.__menuBarPosition]===TcHmiTrendLineChart.MenuBarPosition.Top?top=outerMenubarHeight:this.__showLegend&&(top=outerlegendHeight))),this.__showLegend?height=height-(outerHeight-innerHeight)-outerlegendHeight:height-=outerHeight-innerHeight,{width:width,height:height,top:top}}__reset(){if(!TCHMI_DESIGNER){if(null!==this.__lineGraphData&&void 0!==this.__lineGraphData&&this.__lineGraphData.splice(0,this.__lineGraphData.length),null!==this.__lineChart&&void 0!==this.__lineChart){let size=this.__calcSizes();if(null===size.width||null===size.height)return;this.__lineChart.clear(size.width,size.height)}let canvasZoomingElem=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");canvasZoomingElem.length>0&&canvasZoomingElem[0].classList.add("tchmi-no-pointer-events");let isMouseModeActive=!1;for(let i=0,ii=this.__menuBarControls.length;i<ii;i++){if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_stopButton")this.__menuBarControls[i].setIsEnabled(!1);else if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_panxButton"){this.__menuBarControls[i].setIsEnabled(!1),"Active"===this.__menuBarControls[i].getToggleState()&&(isMouseModeActive=!0)}else if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_panxyButton"){this.__menuBarControls[i].setIsEnabled(!1),"Active"===this.__menuBarControls[i].getToggleState()&&(isMouseModeActive=!0)}else if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_zoomxButton"){this.__menuBarControls[i].setIsEnabled(!1),"Active"===this.__menuBarControls[i].getToggleState()&&(isMouseModeActive=!0)}else if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_zoomxyButton"){this.__menuBarControls[i].setIsEnabled(!1),"Active"===this.__menuBarControls[i].getToggleState()&&(isMouseModeActive=!0)}else this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_resetZoomButton"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_resetButton"?this.__menuBarControls[i].setIsEnabled(!1):(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_startCombobox"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_endCombobox")&&this.__menuBarControls[i].setIsEnabled(!0);if(!isMouseModeActive&&this.__isAttached){let panxButton=this.__menuBarControls[12];panxButton.getId()===this.__id+"_panxButton"&&panxButton.setToggleState("Active")}}}}__createLegend(){var _a;if(this.__elementLegend.children().remove(),this.__showLegend&&(TcHmi.StyleProvider.setSimpleElementStyle(this.__elementLegend,"display",""),this.__internalLineGraphDescription&&this.__internalLineGraphDescription.length>0))for(let i=0,ii=this.__internalLineGraphDescription.length;i<ii;i++){let label=document.createElement("label");label.setAttribute("class","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-checkbox-label"),this.__internalLineGraphDescription[i].legendName?label.innerText=this.__internalLineGraphDescription[i].legendName:label.innerText="["+i+"]";let checkbox=document.createElement("input");checkbox.setAttribute("type","checkbox"),checkbox.setAttribute("id",this.__id+"Element"+i),checkbox.setAttribute("class","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-checkbox");let color=document.createElement("div");color.setAttribute("class","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-checkbox-color-element"),color.setAttribute("style","background-color: "+(null===(_a=this.__internalLineGraphDescription[i].lineColor)||void 0===_a?void 0:_a.color)+";"),label.append(checkbox),label.append(color),this.__elementLegend.append(label),checkbox.checked=!0}else TcHmi.StyleProvider.setSimpleElementStyle(this.__elementLegend,"display","none")}__createTooltip(offsetX,offsetY,activate){if(this.__elementTooltip.css("visibility","hidden"),this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]},this.__lineChart){let basicYAxis=this.__lineChart.getYAxisAtPosition(0);if(basicYAxis){let yAxisWidth=basicYAxis.getAxisWidth();if(null!==yAxisWidth){let drawingBorder=this.__lineChart.getDrawingBorder(),offsetTopCharting=0;this.__elementChart&&this.__elementChart[0]&&(offsetTopCharting=this.__elementChart[0].offsetTop);let offsetTop=basicYAxis.getDiffEndLabelAndLine()+yAxisWidth/2+5+drawingBorder,xAxis=this.__lineChart.getXAxis(),offsetLeft=0;if(null!==xAxis){offsetLeft=xAxis.getXAxisLeftWidth();let yAxis=this.__lineChart.getYAxis();if(null!=yAxis){let yAxisHeight=yAxis[0].getLineHeight();if(offsetX>=offsetLeft&&offsetX<=offsetLeft+xAxis.getLineWidth()&&offsetY>=offsetTop&&offsetY<=offsetTop+yAxisHeight){let lineGraphs=this.__lineChart.getLineGraphs(),errorTooltips=[],pointTooltips=[],xTime=0,startValue=xAxis.getMainTickStartValue(),endValue=xAxis.getMainTickEndValue();if(null!==startValue&&null!==endValue){xTime=startValue+(offsetX-offsetLeft)*((endValue-startValue)/(xAxis.getLineWidth()+2*drawingBorder));let lineGraphId=0;if(this.__lineGraphDescriptionSelected)for(let i=0,ii=this.__lineGraphDescriptionSelected.length;i<ii;i++)if(null!==this.__lineGraphDescriptionSelected[i]&&lineGraphs[lineGraphId]){let lineGraph=lineGraphs[lineGraphId],dotRadius=lineGraph.getPointDotRadius();if(null!==dotRadius&&lineGraph.getPointDot()){let points=lineGraph.getPoints();if(null!=points)for(let j=0,jj=points.length;j<jj;j++)if(points[j].xPosition-dotRadius<=offsetX&&offsetX<=points[j].xPosition+dotRadius&&points[j].yPosition-dotRadius<=offsetY&&points[j].yPosition+dotRadius>=offsetY){let symbolname="",trendLineGraphDescription=null;symbolname=this.__lineGraphDescriptionSelected[i].symbol,trendLineGraphDescription=this.__lineGraphDescriptionSelected[i];let yAxis=null;if(this.__yAxisSelected&&trendLineGraphDescription){let id=trendLineGraphDescription.yAxisId;for(let h=0,hh=this.__yAxisSelected.length;h<hh;h++)if(this.__yAxisSelected[h].id===id){yAxis=this.__yAxisSelected[h];break}}yAxis&&pointTooltips.push({yAxis:yAxis,coordinates:{x:points[j].xPosition,y:points[j].yPosition},values:{x:points[j].xValue,y:points[j].yValue},symbolname:symbolname})}}let areas=lineGraph.getAreaPoints();for(let m=0,mm=areas.length;m<mm;m++)if(offsetX>=offsetLeft&&offsetX<=offsetLeft+xAxis.getLineWidth()&&offsetY>=offsetTop&&offsetY<=offsetTop+yAxisHeight&&areas[m].xBeginPosition<=offsetX&&offsetX<=areas[m].xEndPosition){let errorCode=0;if(null!==this.__lineGraphRawData){let elementWithX=this.__lineGraphRawData[i].filter(x=>x.x===areas[m].xBeginValue),index=this.__lineGraphRawData[i].indexOf(elementWithX[0]);errorCode=this.__lineGraphRawData[i][index].error}let trendLineGraphDescription=this.__lineGraphDescriptionSelected[i],yAxis=null;if(this.__yAxisSelected&&trendLineGraphDescription){let id=trendLineGraphDescription.yAxisId;for(let h=0,hh=this.__yAxisSelected.length;h<hh;h++)if(this.__yAxisSelected[h].id===id){yAxis=this.__yAxisSelected[h];break}}yAxis&&errorTooltips.push({yAxis:yAxis,xBeginTime:areas[m].xBeginValue,xEndTime:areas[m].xEndValue,xBegin:areas[m].xBeginPosition,xEnd:areas[m].xEndPosition,error:errorCode,symbolname:trendLineGraphDescription.symbol})}lineGraphId++}if(0===errorTooltips.length&&0===pointTooltips.length)this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]};else{this.__tooltipInformation={show:!0,isActive:activate,time:xTime,points:[],errors:[]};for(let k=0,kk=errorTooltips.length;k<kk;k++)this.__tooltipInformation.errors.push({yAxis:errorTooltips[k].yAxis,beginTime:errorTooltips[k].xBeginTime,endTime:errorTooltips[k].xEndTime,errorCode:errorTooltips[k].error,symbolname:errorTooltips[k].symbolname});for(let m=0,mm=pointTooltips.length;m<mm;m++)this.__tooltipInformation.points.push({yAxis:pointTooltips[m].yAxis,point:{x:pointTooltips[m].values.x,y:pointTooltips[m].values.y},symbolname:pointTooltips[m].symbolname});let tooltipFormat=this.__executeTooltipFormatFunction(xTime,this.__tooltipInformation.points.reverse(),this.__tooltipInformation.errors.reverse());if(this.__elementTooltip.css("visibility","visible"),null===tooltipFormat)return void this.__elementTooltip.css("visibility","hidden");this.__elementTooltipText[0].innerHTML=tooltipFormat;let lineColorGraph=null,themeTooltipFontColor=TcHmi.Theme.Resources.get(this,"TooltipFontColor");TcHmi.isSolidColor(themeTooltipFontColor.value)&&(lineColorGraph=TcHmi.StyleProvider.resolveSolidColorAsCssValue(themeTooltipFontColor.value)),TcHmi.isSolidColor(this.__tooltipFontColor)&&(lineColorGraph=TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__tooltipFontColor)),null!=lineColorGraph&&this.__elementTooltipText.css("color",lineColorGraph);let widthTooltip=this.__elementTooltip.width(),heightTooltip=this.__elementTooltip.height();offsetX-widthTooltip/2>=offsetLeft&&offsetX+widthTooltip/2<=offsetLeft+xAxis.getLineWidth()&&offsetY-heightTooltip>=offsetTop?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-bottom"),this.__elementTooltip.css({top:offsetY-heightTooltip-4+offsetTopCharting,left:offsetX+5-widthTooltip/2})):offsetX-widthTooltip/2>=offsetLeft&&offsetX+widthTooltip/2<=offsetLeft+xAxis.getLineWidth()?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-top"),this.__elementTooltip.css({top:offsetY+4+offsetTopCharting,left:offsetX+5-widthTooltip/2})):offsetX>=offsetLeft&&offsetX+widthTooltip<=offsetLeft+xAxis.getLineWidth()?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-left"),this.__elementTooltip.css({top:offsetY-heightTooltip/2+offsetTopCharting,left:offsetX+4+5})):(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltip.css({top:offsetY-heightTooltip/2+offsetTopCharting,left:offsetX-4-widthTooltip+5}))}}}}}}}}}__createTooltipFromTouch(offsetX,offsetY){this.__holdTimer&&(clearTimeout(this.__holdTimer),this.__holdTimer=0),this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!1,mousePosition:{x:0,y:0}};if(this.__elementTooltip.css("visibility","hidden"),this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]},this.__lineChart){let basicYAxis=this.__lineChart.getYAxisAtPosition(0);if(basicYAxis){let yAxisWidth=basicYAxis.getAxisWidth();if(null!==yAxisWidth){let drawingBorder=this.__lineChart.getDrawingBorder(),offsetTopCharting=0;this.__elementChart&&this.__elementChart[0]&&(offsetTopCharting=this.__elementChart[0].offsetTop);let offsetTop=basicYAxis.getDiffEndLabelAndLine()+yAxisWidth/2+5+drawingBorder,xAxis=this.__lineChart.getXAxis(),offsetLeft=0;if(null!==xAxis){offsetLeft=xAxis.getXAxisLeftWidth();let yAxis=this.__lineChart.getYAxis();if(null!=yAxis){let yAxisHeight=yAxis[0].getLineHeight();if(offsetX>=offsetLeft-10&&offsetX<=offsetLeft+xAxis.getLineWidth()+10&&offsetY>=offsetTop-10&&offsetY<=offsetTop+yAxisHeight+10){let lineGraphs=this.__lineChart.getLineGraphs(),errorTooltips=[],pointTooltips=[],xTime=0,startValue=xAxis.getMainTickStartValue(),endValue=xAxis.getMainTickEndValue();if(null!==startValue&&null!==endValue){xTime=startValue+(offsetX-offsetLeft)*((endValue-startValue)/(xAxis.getLineWidth()+2*drawingBorder));let lineGraphId=0;if(this.__lineGraphDescriptionSelected)for(let i=0,ii=this.__lineGraphDescriptionSelected.length;i<ii;i++)if(null!==this.__lineGraphDescriptionSelected[i]&&lineGraphs[lineGraphId]){let lineGraph=lineGraphs[lineGraphId],dotRadius=lineGraph.getPointDotRadius();if(null!==dotRadius&&lineGraph.getPointDot()){let points=lineGraph.getPoints();if(null!=points)for(let j=0,jj=points.length;j<jj;j++){let distance=Math.sqrt(Math.pow(offsetX-points[j].xPosition,2)+Math.pow(offsetY-points[j].yPosition,2));if(distance<=10+dotRadius){let symbolname="",trendLineGraphDescription=null;symbolname=this.__lineGraphDescriptionSelected[i].symbol,trendLineGraphDescription=this.__lineGraphDescriptionSelected[i];let yAxis=null;if(this.__yAxisSelected&&trendLineGraphDescription){let id=trendLineGraphDescription.yAxisId;for(let h=0,hh=this.__yAxisSelected.length;h<hh;h++)if(this.__yAxisSelected[h].id===id){yAxis=this.__yAxisSelected[h];break}}yAxis&&pointTooltips.push({yAxis:yAxis,coordinates:{x:points[j].xPosition,y:points[j].yPosition},values:{x:points[j].xValue,y:points[j].yValue},symbolname:symbolname,distance:distance})}}}let areas=lineGraph.getAreaPoints();for(let m=0,mm=areas.length;m<mm;m++)if(offsetX>=offsetLeft-5&&offsetX<=offsetLeft+xAxis.getLineWidth()+5&&offsetY>=offsetTop-5&&offsetY<=offsetTop+yAxisHeight+5&&areas[m].xBeginPosition-5<=offsetX&&offsetX<=areas[m].xEndPosition+5){let errorCode=0;if(null!==this.__lineGraphRawData){let elementWithX=this.__lineGraphRawData[i].filter(x=>x.x===areas[m].xBeginValue),index=this.__lineGraphRawData[i].indexOf(elementWithX[0]);errorCode=this.__lineGraphRawData[i][index].error}let trendLineGraphDescription=this.__lineGraphDescriptionSelected[i],yAxis=null;if(this.__yAxisSelected&&trendLineGraphDescription){let id=trendLineGraphDescription.yAxisId;for(let h=0,hh=this.__yAxisSelected.length;h<hh;h++)if(this.__yAxisSelected[h].id===id){yAxis=this.__yAxisSelected[h];break}}yAxis&&errorTooltips.push({yAxis:yAxis,xBeginTime:areas[m].xBeginValue,xEndTime:areas[m].xEndValue,xBegin:areas[m].xBeginPosition,xEnd:areas[m].xEndPosition,error:errorCode,symbolname:trendLineGraphDescription.symbol})}lineGraphId++}if(0===errorTooltips.length&&0===pointTooltips.length)this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]};else{this.__tooltipInformation={show:!0,isActive:!0,time:xTime,points:[],errors:[]};for(let k=0,kk=errorTooltips.length;k<kk;k++)this.__tooltipInformation.errors.push({yAxis:errorTooltips[k].yAxis,beginTime:errorTooltips[k].xBeginTime,endTime:errorTooltips[k].xEndTime,errorCode:errorTooltips[k].error,symbolname:errorTooltips[k].symbolname});pointTooltips.sort((function(a,b){return a.distance-b.distance}));for(let m=0,mm=pointTooltips.length;m<mm;m++)this.__tooltipInformation.points.push({yAxis:pointTooltips[m].yAxis,point:{x:pointTooltips[m].values.x,y:pointTooltips[m].values.y},symbolname:pointTooltips[m].symbolname});let tooltipFormat=this.__executeTooltipFormatFunction(xTime,this.__tooltipInformation.points,this.__tooltipInformation.errors.reverse());if(this.__elementTooltip.css("visibility","visible"),null===tooltipFormat)return void this.__elementTooltip.css("visibility","hidden");this.__elementTooltipText[0].innerHTML=tooltipFormat;let lineColorGraph=null,themeTooltipFontColor=TcHmi.Theme.Resources.get(this,"TooltipFontColor");if(themeTooltipFontColor&&null!==themeTooltipFontColor.value){let tempColor=themeTooltipFontColor.value;TcHmi.isSolidColor(tempColor)&&(lineColorGraph=TcHmi.StyleProvider.resolveSolidColorAsCssValue(tempColor))}TcHmi.isSolidColor(this.__tooltipFontColor)&&(lineColorGraph=TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__tooltipFontColor)),null!=lineColorGraph&&this.__elementTooltipText.css("color",lineColorGraph);let widthTooltip=this.__elementTooltip.width(),heightTooltip=this.__elementTooltip.height();offsetX-widthTooltip/2>=offsetLeft&&offsetX+widthTooltip/2<=offsetLeft+xAxis.getLineWidth()&&offsetY-heightTooltip>=offsetTop?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-bottom"),this.__elementTooltip.css({top:offsetY-heightTooltip-4+offsetTopCharting,left:offsetX+5-widthTooltip/2})):offsetX-widthTooltip/2>=offsetLeft&&offsetX+widthTooltip/2<=offsetLeft+xAxis.getLineWidth()?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-top"),this.__elementTooltip.css({top:offsetY+4+offsetTopCharting,left:offsetX+5-widthTooltip/2})):offsetX>=offsetLeft&&offsetX+widthTooltip<=offsetLeft+xAxis.getLineWidth()?(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-left"),this.__elementTooltip.css({top:offsetY-heightTooltip/2+offsetTopCharting,left:offsetX+4+5})):(this.__elementTooltipArrow[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-top","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-bottom","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-left","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-top","tchmi-trend-line-chart-template-tooltip-arrow-bottom","tchmi-trend-line-chart-template-tooltip-arrow-left","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltipArrow[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-arrow-right","tchmi-trend-line-chart-template-tooltip-arrow-right"),this.__elementTooltip.css({top:offsetY-heightTooltip/2+offsetTopCharting,left:offsetX-4-widthTooltip+5}))}}}}}}}}}__onMouseMoveTooltip(){return e=>{if(!this.__tooltipInformation.isActive&&this.__showTooltip&&(!this.__manipulationInfo.isManipulating||!this.getIsEnabled())){let __this=this,offsetX=e.offsetX,offsetY=e.offsetY;requestAnimationFrame((function(){null!==__this.__internalEnd&&null!==__this.__internalStart&&"Latest"!==__this.__internalEnd&&"First"!==__this.__internalStart&&__this.__createTooltip(offsetX,offsetY,!1)}))}}}__onClick(){return e=>{if(this.__manipulationInfo.click&&null!==this.__lineChart){if(this.__manipulationInfo.isManipulating)return;if(!this.getIsEnabled()||0===this.__lineChart.getLineGraphs().length)return;if("Latest"===this.__internalEnd||"First"===this.__internalStart||null===this.__internalEnd||null===this.__internalStart)return;if(null!==e.currentTarget){let target=e.currentTarget;if(target.classList.contains("TcHmi_Controls_Beckhoff_Controls-chart-canvas-drawing")){let parentId=null;if(null!==target.parentElement&&null!==target.parentElement.parentElement&&null!==target.parentElement.parentElement.parentElement&&(parentId=target.parentElement.parentElement.parentElement.id),parentId===this.__id){let coords=this.__transformEventCoords(e.clientX,e.clientY,e.target);if(this.__createTooltip(coords.x,coords.y,!0),this.__tooltipInformation.isActive)return}}else this.__elementTooltip.css("visibility","hidden"),this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]}}}this.__manipulationInfo.click=!0}}__onMouseDown(){return e=>{if(this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}},null!==this.__lineChart){if(this.__manipulationInfo.isManipulating)return;if(!this.getIsEnabled()||0===this.__lineChart.getLineGraphs().length)return;if("Latest"===this.__internalEnd||"First"===this.__internalStart||null===this.__internalEnd||null===this.__internalStart)return;if(null===e.target)return;let coords=this.__transformEventCoords(e.clientX,e.clientY,e.target);this.__manipulationInfo.mousePosition={x:coords.x,y:coords.y},this.__userInteractionStart(coords.x,coords.y)}}}__onMouseMove(){return e=>{if(!this.__manipulationInfo.isManipulating||!this.getIsEnabled())return;let coords=this.__transformEventCoords(e.clientX,e.clientY);this.__userInteractionMove(coords.x,coords.y)}}__onMouseUp(){return e=>{this.__manipulationInfo.isManipulating&&this.getIsEnabled()&&this.__userInteractionEnd()}}__onTouchStart(){return e=>{if(this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}},null!==this.__lineChart){if(!this.getIsEnabled()||0===this.__lineChart.getLineGraphs().length)return;if("Latest"===this.__internalEnd||"First"===this.__internalStart||null===this.__internalEnd||null===this.__internalStart)return;e.preventDefault();let touch=e.touches[0],coords=this.__transformEventCoords(touch.clientX,touch.clientY,e.target);if(this.__holdTimer=setTimeout(()=>this.__createTooltipFromTouch(coords.x,coords.y),this.__holdTimerDuration),this.__manipulationInfo.mousePosition={x:coords.x,y:coords.y},e.touches.length>1)return void this.__userMultitouchStart(e);if(this.__manipulationInfo.isManipulating)return;this.__userInteractionStart(coords.x,coords.y)}}}__onTouchMove(){return e=>{if(this.getIsEnabled()){if(this.__multitouchInfo.multitouchMode)return e.preventDefault(),void this.__userMultitouchMove(e);if(this.__manipulationInfo.isManipulating){let touch=e.touches[0],coords=this.__transformEventCoords(touch.clientX,touch.clientY);Math.sqrt(Math.pow(this.__manipulationInfo.mousePosition.x-coords.x,2)+Math.pow(this.__manipulationInfo.mousePosition.y-coords.y,2))>5&&(this.__holdTimer&&(clearTimeout(this.__holdTimer),this.__holdTimer=0),this.__userInteractionMove(coords.x,coords.y))}}}}__onTouchEnd(){return e=>{if(this.getIsEnabled()){if(this.__holdTimer&&(clearTimeout(this.__holdTimer),this.__holdTimer=0),this.__multitouchInfo.multitouchMode)return e.preventDefault(),void this.__userMultitouchEnd(e);if(this.__manipulationInfo.isManipulating){let touch=e.changedTouches[0],coords=this.__transformEventCoords(touch.clientX,touch.clientY);Math.sqrt(Math.pow(this.__manipulationInfo.mousePosition.x-coords.x,2)+Math.pow(this.__manipulationInfo.mousePosition.y-coords.y,2))>5?this.__userInteractionEnd():this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!1,mousePosition:{x:0,y:0}}}}}}__transformEventCoords(clientX,clientY,targetElement){if(targetElement){let renderedWidth=this.getRenderedWidth(),renderedHeight=this.getRenderedHeight();if(null===renderedWidth||null===renderedHeight)return{x:0,y:0};let controlRect=this.__element[0].getBoundingClientRect();this.__manipulationInfo.scale.x=renderedWidth/controlRect.width,this.__manipulationInfo.scale.y=renderedHeight/controlRect.height;let targetRect=targetElement.getBoundingClientRect();this.__manipulationInfo.offset.left=targetRect.left,this.__manipulationInfo.offset.top=targetRect.top}return{x:(clientX-this.__manipulationInfo.offset.left)*this.__manipulationInfo.scale.x,y:(clientY-this.__manipulationInfo.offset.top)*this.__manipulationInfo.scale.y}}__userInteractionStart(x,y){if(null!==this.__lineChart){let basicYAxis=this.__lineChart.getYAxisAtPosition(0);if(basicYAxis){let yAxisWidth=basicYAxis.getAxisWidth();if(null!==yAxisWidth){let offsetTop=basicYAxis.getDiffEndLabelAndLine()+yAxisWidth/2+5+this.__lineChart.getDrawingBorder(),xAxis=this.__lineChart.getXAxis(),offsetLeft=0;null!==xAxis&&(offsetLeft=xAxis.getXAxisLeftWidth()||0);let xLineWidth=0;null!==xAxis&&(xLineWidth=xAxis.getLineWidth());let yLineHeight=basicYAxis.getLineHeight();if(x<offsetLeft||x>offsetLeft+xLineWidth||y<offsetTop||y>offsetTop+yLineHeight)return;this.__mouseMode!==TcHmiTrendLineChart.MouseMode.ZoomX&&this.__mouseMode!==TcHmiTrendLineChart.MouseMode.ZoomXY||(this.__manipulationInfo.start.x=x,this.__manipulationInfo.start.y=y,this.__manipulationInfo.end.x=x,this.__manipulationInfo.end.y=y,this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomX&&(this.__manipulationInfo.start.y=offsetTop,this.__manipulationInfo.end.y=offsetTop)),this.__mouseMode!==TcHmiTrendLineChart.MouseMode.PanX&&this.__mouseMode!==TcHmiTrendLineChart.MouseMode.PanXY||(this.__manipulationInfo.start.x=x,this.__manipulationInfo.start.y=y,this.__manipulationInfo.end.x=x,this.__manipulationInfo.end.y=y),this.__manipulationInfo.isManipulating=!0,this.__manipulationInfo.transform={x:0,y:0}}}}}__userInteractionMove(x,y){if(this.__tooltipInformation.show&&(this.__elementTooltip.css("visibility","hidden"),this.__tooltipInformation={show:!1,isActive:!1,time:0,points:[],errors:[]}),null!==this.__lineChart){let basicYAxis=this.__lineChart.getYAxisAtPosition(0);if(basicYAxis){let yAxisWidth=basicYAxis.getAxisWidth();if(null!==yAxisWidth){let offsetTop=basicYAxis.getDiffEndLabelAndLine()+yAxisWidth/2+5+this.__lineChart.getDrawingBorder(),xAxis=this.__lineChart.getXAxis(),offsetLeft=0;if(null!==xAxis){if(offsetLeft=xAxis.getXAxisLeftWidth()||0,this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomX||this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomXY){if(null===this.__zoomingCanvasContext)return;let width=x-this.__manipulationInfo.start.x,height=0;height=this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomX?basicYAxis.getLineHeight():y-this.__manipulationInfo.start.y,this.__zoomingCanvasContext.clearRect(0,0,this.__zoomingCanvasContext.canvas.width,this.__zoomingCanvasContext.canvas.height),this.__zoomingCanvasContext.beginPath(),this.__zoomingCanvasContext.rect(this.__manipulationInfo.start.x,this.__manipulationInfo.start.y,width,height),this.__zoomingCanvasContext.fillStyle="rgba(51,153,255,0.3)",this.__zoomingCanvasContext.lineWidth=1,this.__zoomingCanvasContext.strokeStyle="rgba(51,153,255,1)",this.__zoomingCanvasContext.fill(),this.__zoomingCanvasContext.stroke(),this.__zoomingCanvasContext.clearRect(0,0,this.__zoomingCanvasContext.canvas.width,offsetTop),this.__zoomingCanvasContext.clearRect(0,0,offsetLeft,this.__zoomingCanvasContext.canvas.height),this.__zoomingCanvasContext.clearRect(0,this.__zoomingCanvasContext.canvas.height,this.__zoomingCanvasContext.canvas.width,-(this.__zoomingCanvasContext.canvas.height-basicYAxis.getLineHeight()-offsetTop)),this.__zoomingCanvasContext.clearRect(this.__zoomingCanvasContext.canvas.width,0,-(this.__zoomingCanvasContext.canvas.width-offsetLeft-xAxis.getLineWidth()),this.__zoomingCanvasContext.canvas.height)}if(this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanX||this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanXY){let dX=x-this.__manipulationInfo.end.x,dY=y-this.__manipulationInfo.end.y,canvas=this.__lineChart.getCanvasDrawing();if(null===canvas)return;let context=canvas[0].getContext("2d");if(null===context)return;this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanXY?(context.translate(dX,dY),this.__manipulationInfo.transform={x:this.__manipulationInfo.transform.x+dX,y:this.__manipulationInfo.transform.y+dY}):(dY=0,context.translate(dX,0),this.__manipulationInfo.transform.x=this.__manipulationInfo.transform.x+dX),this.__lineChart.setLineChanged(!0),this.__lineChart.draw(),this.__manipulationInfo.transform.y>=0?this.__manipulationInfo.transform.x>=0?(context.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,context.canvas.width+this.__manipulationInfo.transform.x,offsetTop+this.__manipulationInfo.transform.y),context.clearRect(-this.__manipulationInfo.transform.x,context.canvas.height-this.__manipulationInfo.transform.y,context.canvas.width+this.__manipulationInfo.transform.x,-(context.canvas.height-basicYAxis.getLineHeight()-offsetTop)),context.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,offsetLeft+this.__manipulationInfo.transform.x,context.canvas.height+this.__manipulationInfo.transform.y),context.clearRect(context.canvas.width-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,-(context.canvas.width-offsetLeft-xAxis.getLineWidth()),context.canvas.height+this.__manipulationInfo.transform.y)):(context.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,context.canvas.width+this.__manipulationInfo.transform.x,offsetTop+this.__manipulationInfo.transform.y),context.clearRect(-this.__manipulationInfo.transform.x,context.canvas.height-this.__manipulationInfo.transform.y,context.canvas.width+this.__manipulationInfo.transform.x,-(context.canvas.height-basicYAxis.getLineHeight()-offsetTop)),context.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,offsetLeft,context.canvas.height+this.__manipulationInfo.transform.y),context.clearRect(context.canvas.width-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,-(context.canvas.width-offsetLeft-xAxis.getLineWidth()-this.__manipulationInfo.transform.x),context.canvas.height+this.__manipulationInfo.transform.y)):this.__manipulationInfo.transform.x>=0?(context.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,context.canvas.width+this.__manipulationInfo.transform.x,offsetTop),context.clearRect(-this.__manipulationInfo.transform.x,context.canvas.height-this.__manipulationInfo.transform.y,context.canvas.width+this.__manipulationInfo.transform.x,-(context.canvas.height-basicYAxis.getLineHeight()-offsetTop-this.__manipulationInfo.transform.y)),context.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,offsetLeft+this.__manipulationInfo.transform.x,context.canvas.height+this.__manipulationInfo.transform.y),context.clearRect(context.canvas.width-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,-(context.canvas.width-offsetLeft-xAxis.getLineWidth()),context.canvas.height+this.__manipulationInfo.transform.y)):(context.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,context.canvas.width+this.__manipulationInfo.transform.x,offsetTop),context.clearRect(-this.__manipulationInfo.transform.x,context.canvas.height-this.__manipulationInfo.transform.y,context.canvas.width+this.__manipulationInfo.transform.x,-(context.canvas.height-basicYAxis.getLineHeight()-offsetTop-this.__manipulationInfo.transform.y)),context.clearRect(-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,offsetLeft,context.canvas.height+this.__manipulationInfo.transform.y),context.clearRect(context.canvas.width-this.__manipulationInfo.transform.x,-this.__manipulationInfo.transform.y,-(context.canvas.width-offsetLeft-xAxis.getLineWidth()-this.__manipulationInfo.transform.x),context.canvas.height+this.__manipulationInfo.transform.y))}this.__manipulationInfo.end.x=x,this.__manipulationInfo.end.y=y}}}}}__userInteractionEnd(){if(null===this.__zoomingCanvasContext)return;if("First"===this.__internalStart||null===this.__internalStart)return;if("Latest"===this.__internalEnd||null===this.__internalEnd)return;if(null!==this.__lineChart){let basicYAxis=this.__lineChart.getYAxisAtPosition(0);if(basicYAxis){let yAxisWidth=basicYAxis.getAxisWidth();if(null!==yAxisWidth){let offsetTop=basicYAxis.getDiffEndLabelAndLine()+yAxisWidth/2+5+this.__lineChart.getDrawingBorder(),xAxis=this.__lineChart.getXAxis(),offsetLeft=0;if(null!==xAxis){let start=xAxis.getMainTickStartValue(),end=xAxis.getMainTickEndValue(),endTimespanMilliSec=0,startTime="";if(null!==start&&null!==end){endTimespanMilliSec=end-start;let t=new Date(start);startTime=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`}offsetLeft=xAxis.getXAxisLeftWidth()||0;let diffPixelWidth=this.__zoomingCanvasContext.canvas.width-offsetLeft-(this.__zoomingCanvasContext.canvas.width-offsetLeft-xAxis.getLineWidth()),diffPixelHeight=this.__zoomingCanvasContext.canvas.height-offsetTop-(this.__zoomingCanvasContext.canvas.height-basicYAxis.getLineHeight()-offsetTop);this.__zoomingCanvasContext.clearRect(0,0,this.__zoomingCanvasContext.canvas.width,this.__zoomingCanvasContext.canvas.height);let diffTime=endTimespanMilliSec;if(this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomX||this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomXY){let startX,endX,drawingEnd=offsetLeft+xAxis.getLineWidth();this.__manipulationInfo.start.x<this.__manipulationInfo.end.x?(startX=this.__manipulationInfo.start.x,this.__manipulationInfo.start.x<offsetLeft&&(startX=offsetLeft),endX=this.__manipulationInfo.end.x,this.__manipulationInfo.end.x>drawingEnd&&(endX=drawingEnd)):(startX=this.__manipulationInfo.end.x,this.__manipulationInfo.end.x<offsetLeft&&(startX=offsetLeft),endX=this.__manipulationInfo.start.x,this.__manipulationInfo.start.x>drawingEnd&&(endX=drawingEnd));let newTimespan=(endX-startX)/diffPixelWidth*diffTime;if(!(newTimespan>=1||this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomXY)){this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}};let canvasZoomingElem=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");return void(canvasZoomingElem.length>0&&canvasZoomingElem[0].classList.add("tchmi-no-pointer-events"))}if(this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomXY){let yAxis=this.__lineChart.getYAxis();if(null!=yAxis&&yAxis.length>0){let startY,endY,drawingEndY=offsetTop+yAxis[0].getLineHeight();this.__manipulationInfo.start.y<this.__manipulationInfo.end.y?(endY=this.__manipulationInfo.start.y,this.__manipulationInfo.start.y<offsetTop&&(endY=offsetTop),startY=this.__manipulationInfo.end.y,this.__manipulationInfo.end.y>drawingEndY&&(startY=drawingEndY)):(endY=this.__manipulationInfo.end.y,this.__manipulationInfo.end.y<offsetTop&&(endY=offsetTop),startY=this.__manipulationInfo.start.y,this.__manipulationInfo.start.y>drawingEndY&&(startY=drawingEndY));for(let i=0,ii=yAxis.length;i<ii;i++){let min,max,decimalPlaces=yAxis[i].getDecimalPlaces(),startOverride=yAxis[i].getMainTickStartValueOverride(),start=yAxis[i].getMainTickStartValue();if(null!==startOverride)min=startOverride;else{if(null===start)continue;min=start}let endOverride=yAxis[i].getMainTickEndValueOverride(),end=yAxis[i].getMainTickEndValue();if(null!==endOverride)max=endOverride;else{if(null===end)continue;max=end}let diff=max-min,minDisplacement=diff*(1-(startY-offsetTop)/diffPixelHeight)+min,maxDisplacement=diff*(1-(endY-offsetTop)/diffPixelHeight)+min,multiplier=0;null!==decimalPlaces&&(multiplier=Math.pow(10,decimalPlaces),minDisplacement=Math.round(minDisplacement*multiplier)/multiplier,maxDisplacement=Math.round(maxDisplacement*multiplier)/multiplier);let minDiff=(maxDisplacement-minDisplacement)*multiplier;if(null===decimalPlaces||minDiff<1){for(let i=0,ii=yAxis.length;i<ii;i++)if(null!==this.__yAxisSelected){this.__yAxisSelected[i].autoScaling=yAxis[i].getAutoScaling();let maxValue=yAxis[i].getMainTickEndValue();this.__yAxisSelected[i].mainTickMaxValue=null===maxValue?void 0:maxValue;let minValue=yAxis[i].getMainTickStartValue();this.__yAxisSelected[i].mainTickMinValue=null===minValue?void 0:minValue}this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}};let canvasZoomingElem=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");return void(canvasZoomingElem.length>0&&canvasZoomingElem[0].classList.add("tchmi-no-pointer-events"))}null!==this.__yAxisSelected&&(this.__yAxisSelected[i].autoScaling=!1,this.__yAxisSelected[i].mainTickMaxValue=maxDisplacement,this.__yAxisSelected[i].mainTickMinValue=minDisplacement)}let pixelWidthPercentStart=(startX-offsetLeft)/diffPixelWidth,widthDisplacement=Math.abs(diffTime*pixelWidthPercentStart),date=new Date(startTime),newStartMilliSec=new Date(date.getTime()+widthDisplacement);if(this.__endDatatype===TcHmiTrendLineChart.Datatype.Datetime){let newEndMilliSec=new Date(newStartMilliSec.getTime()+newTimespan),newEndString=`${newEndMilliSec.getUTCFullYear()}-${("0"+(newEndMilliSec.getUTCMonth()+1)).slice(-2)}-${("0"+newEndMilliSec.getUTCDate()).slice(-2)}T${("0"+newEndMilliSec.getUTCHours()).slice(-2)}:${("0"+newEndMilliSec.getUTCMinutes()).slice(-2)}:${("0"+newEndMilliSec.getUTCSeconds()).slice(-2)}.${("00"+newEndMilliSec.getUTCMilliseconds()).slice(-3)}Z`;this.__internalEnd=newEndString}else this.__internalEnd=this.__milliSecToIso(newTimespan);if(this.__startDatatype===TcHmiTrendLineChart.Datatype.Datetime){let newStartString=`${newStartMilliSec.getUTCFullYear()}-${("0"+(newStartMilliSec.getUTCMonth()+1)).slice(-2)}-${("0"+newStartMilliSec.getUTCDate()).slice(-2)}T${("0"+newStartMilliSec.getUTCHours()).slice(-2)}:${("0"+newStartMilliSec.getUTCMinutes()).slice(-2)}:${("0"+newStartMilliSec.getUTCSeconds()).slice(-2)}.${("00"+newStartMilliSec.getUTCMilliseconds()).slice(-3)}Z`;this.__internalStart=newStartString}else this.__internalStart=this.__milliSecToIso(newTimespan);TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YAxis"})}}else{let pixelWidthPercentStart=(startX-offsetLeft)/diffPixelWidth,widthDisplacement=Math.abs(diffTime*pixelWidthPercentStart),date=new Date(startTime),newStartMilliSec=new Date(date.getTime()+widthDisplacement);if(this.__endDatatype===TcHmiTrendLineChart.Datatype.Datetime){let newEndMilliSec=new Date(newStartMilliSec.getTime()+newTimespan),newEndString=`${newEndMilliSec.getUTCFullYear()}-${("0"+(newEndMilliSec.getUTCMonth()+1)).slice(-2)}-${("0"+newEndMilliSec.getUTCDate()).slice(-2)}T${("0"+newEndMilliSec.getUTCHours()).slice(-2)}:${("0"+newEndMilliSec.getUTCMinutes()).slice(-2)}:${("0"+newEndMilliSec.getUTCSeconds()).slice(-2)}.${("00"+newEndMilliSec.getUTCMilliseconds()).slice(-3)}Z`;this.__internalEnd=newEndString}else this.__internalEnd=this.__milliSecToIso(newTimespan);if(this.__startDatatype===TcHmiTrendLineChart.Datatype.Datetime){let newStartString=`${newStartMilliSec.getUTCFullYear()}-${("0"+(newStartMilliSec.getUTCMonth()+1)).slice(-2)}-${("0"+newStartMilliSec.getUTCDate()).slice(-2)}T${("0"+newStartMilliSec.getUTCHours()).slice(-2)}:${("0"+newStartMilliSec.getUTCMinutes()).slice(-2)}:${("0"+newStartMilliSec.getUTCSeconds()).slice(-2)}.${("00"+newStartMilliSec.getUTCMilliseconds()).slice(-3)}Z`;this.__internalStart=newStartString}else this.__internalStart=this.__milliSecToIso(newTimespan)}this.__openWebsocket(),this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!1,mousePosition:{x:0,y:0}}}if(this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanX||this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanXY){let canvas=this.__lineChart.getCanvasDrawing();if(null!==canvas){let context=canvas[0].getContext("2d");null!==context&&context.setTransform(1,0,0,1,0,0)}let pixelWidthPercent=this.__manipulationInfo.transform.x/diffPixelWidth;if(0===pixelWidthPercent&&this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanX){let canvasZoomingElem=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");return canvasZoomingElem.length>0&&canvasZoomingElem[0].classList.add("tchmi-no-pointer-events"),void(this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}})}{let widthDisplacement=diffTime*pixelWidthPercent,date=new Date(startTime);if(this.__startDatatype===TcHmiTrendLineChart.Datatype.Datetime&&this.__endDatatype===TcHmiTrendLineChart.Datatype.Datetime){let newStartMilliSec=new Date(date.getTime()-widthDisplacement),newStartString=`${newStartMilliSec.getUTCFullYear()}-${("0"+(newStartMilliSec.getUTCMonth()+1)).slice(-2)}-${("0"+newStartMilliSec.getUTCDate()).slice(-2)}T${("0"+newStartMilliSec.getUTCHours()).slice(-2)}:${("0"+newStartMilliSec.getUTCMinutes()).slice(-2)}:${("0"+newStartMilliSec.getUTCSeconds()).slice(-2)}.${("00"+newStartMilliSec.getUTCMilliseconds()).slice(-3)}Z`;this.__internalStart=newStartString;let newEndMilliSec=new Date(newStartMilliSec.getTime()+diffTime),newEndString=`${newEndMilliSec.getUTCFullYear()}-${("0"+(newEndMilliSec.getUTCMonth()+1)).slice(-2)}-${("0"+newEndMilliSec.getUTCDate()).slice(-2)}T${("0"+newEndMilliSec.getUTCHours()).slice(-2)}:${("0"+newEndMilliSec.getUTCMinutes()).slice(-2)}:${("0"+newEndMilliSec.getUTCSeconds()).slice(-2)}.${("00"+newEndMilliSec.getUTCMilliseconds()).slice(-3)}Z`;this.__internalEnd=newEndString}else if(this.__endDatatype===TcHmiTrendLineChart.Datatype.Datetime&&null!==end){let newEndMilliSec=new Date(end-widthDisplacement),newEndString=`${newEndMilliSec.getUTCFullYear()}-${("0"+(newEndMilliSec.getUTCMonth()+1)).slice(-2)}-${("0"+newEndMilliSec.getUTCDate()).slice(-2)}T${("0"+newEndMilliSec.getUTCHours()).slice(-2)}:${("0"+newEndMilliSec.getUTCMinutes()).slice(-2)}:${("0"+newEndMilliSec.getUTCSeconds()).slice(-2)}.${("00"+newEndMilliSec.getUTCMilliseconds()).slice(-3)}Z`;this.__internalEnd=newEndString}else if(this.__startDatatype===TcHmiTrendLineChart.Datatype.Datetime){let newStartMilliSec=new Date(date.getTime()-widthDisplacement),newStartString=`${newStartMilliSec.getUTCFullYear()}-${("0"+(newStartMilliSec.getUTCMonth()+1)).slice(-2)}-${("0"+newStartMilliSec.getUTCDate()).slice(-2)}T${("0"+newStartMilliSec.getUTCHours()).slice(-2)}:${("0"+newStartMilliSec.getUTCMinutes()).slice(-2)}:${("0"+newStartMilliSec.getUTCSeconds()).slice(-2)}.${("00"+newStartMilliSec.getUTCMilliseconds()).slice(-3)}Z`;this.__internalStart=newStartString}if(this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanXY){let yAxis=this.__lineChart.getYAxis();if(null!=yAxis&&yAxis.length>0){for(let i=0,ii=yAxis.length;i<ii;i++){let min,max,startOverride=yAxis[i].getMainTickStartValueOverride(),start=yAxis[i].getMainTickStartValue();if(null!==startOverride)min=startOverride;else{if(null===start)continue;min=start}let endOverride=yAxis[i].getMainTickEndValueOverride(),end=yAxis[i].getMainTickEndValue();if(null!==endOverride)max=endOverride;else{if(null===end)continue;max=end}let heightDisplacement=(max-min)*(this.__manipulationInfo.transform.y/diffPixelHeight),minDisplacement=min+heightDisplacement,maxDisplacement=max+heightDisplacement;null!==this.__yAxisSelected&&(this.__yAxisSelected[i].autoScaling=!1,this.__yAxisSelected[i].mainTickMaxValue=maxDisplacement,this.__yAxisSelected[i].mainTickMinValue=minDisplacement)}TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YAxis"})}}this.__openWebsocket(),this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!1,mousePosition:{x:0,y:0}}}}}}}}this.__lastInteraction=!0;let canvasZoomingElem=this.__elementChart[0].getElementsByClassName("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-canvas-zooming");canvasZoomingElem.length>0&&canvasZoomingElem[0].classList.remove("tchmi-no-pointer-events")}__userMultitouchStart(e){if(this.__manipulationInfo={isManipulating:!1,start:{x:0,y:0},end:{x:0,y:0},offset:{left:0,top:0},scale:{x:1,y:1},transform:{x:0,y:0},click:!0,mousePosition:{x:0,y:0}},this.__zoomingCanvasContext&&this.__zoomingCanvasContext.clearRect(0,0,this.__zoomingCanvasContext.canvas.width,this.__zoomingCanvasContext.canvas.height),null!==this.__lineChart){let basicYAxis=this.__lineChart.getYAxisAtPosition(0);if(basicYAxis){let yAxisWidth=basicYAxis.getAxisWidth();if(null!==yAxisWidth){let offsetTop=basicYAxis.getDiffEndLabelAndLine()+yAxisWidth/2+5+this.__lineChart.getDrawingBorder(),xAxis=this.__lineChart.getXAxis(),offsetLeft=0;null!==xAxis&&(offsetLeft=xAxis.getXAxisLeftWidth()||0);let xLineWidth=0;null!==xAxis&&(xLineWidth=xAxis.getLineWidth());let yLineHeight=basicYAxis.getLineHeight(),coords1=this.__transformEventCoords(e.touches[0].clientX,e.touches[0].clientY,e.target),coords2=this.__transformEventCoords(e.touches[1].clientX,e.touches[1].clientY,e.target);if(coords1.x<offsetLeft||coords1.x>offsetLeft+xLineWidth||coords1.y<offsetTop||coords1.y>offsetTop+yLineHeight)return;if(coords2.x<offsetLeft||coords2.x>offsetLeft+xLineWidth||coords2.y<offsetTop||coords2.y>offsetTop+yLineHeight)return;this.__multitouchInfo.first.identifier=e.touches[0].identifier,this.__multitouchInfo.second.identifier=e.touches[1].identifier,this.__multitouchInfo.multitouchMode=!0;let xDiff=coords1.x-coords2.x,yDiff=coords1.y-coords2.y;this.__multitouchInfo.distance=Math.sqrt(xDiff*xDiff+yDiff*yDiff)}}}}__userMultitouchMove(e){if(this.__multitouchInfo.multitouchMode){let coords1=this.__transformEventCoords(e.touches[0].clientX,e.touches[0].clientY),coords2=this.__transformEventCoords(e.touches[1].clientX,e.touches[1].clientY),xDiff=coords1.x-coords2.x,yDiff=coords1.y-coords2.y,newDistance=Math.sqrt(xDiff*xDiff+yDiff*yDiff),direction=1-this.__multitouchInfo.distance/newDistance>0?1:-1,timespan=0;if(null===this.__multitouchInfo.newTimespan){if(null===this.__lineChart)return;{let xAxis=this.__lineChart.getXAxis();if(null===xAxis)return;{let start=xAxis.getMainTickStartValue(),end=xAxis.getMainTickEndValue();null!==start&&null!==end&&(timespan=end-start)}}}else timespan=this.__multitouchInfo.newTimespan;if(timespan>=1){let deka=Math.floor(Math.log(timespan)/Math.LN10),newTimespan=timespan*((timespan-direction*Math.pow(10,deka-1)*1.5)/timespan);if(newTimespan<1&&(newTimespan=1),newTimespan===timespan)return;let middlePoint={x:0,y:0};if(middlePoint.x=Math.round((coords1.x+coords2.x)/2),middlePoint.y=Math.round((coords1.y+coords2.y)/2),null!==this.__lineChart){let basicYAxis=this.__lineChart.getYAxisAtPosition(0);if(basicYAxis){let yAxisWidth=basicYAxis.getAxisWidth();if(null!==yAxisWidth){let offsetTop=basicYAxis.getDiffEndLabelAndLine()+yAxisWidth/2+5+this.__lineChart.getDrawingBorder(),xAxis=this.__lineChart.getXAxis(),offsetLeft=0;null!==xAxis&&(offsetLeft=xAxis.getXAxisLeftWidth()||0);let xLineWidth=0;null!==xAxis&&(xLineWidth=xAxis.getLineWidth());let yLineHeight=basicYAxis.getLineHeight();if(null!==xAxis){let start=xAxis.getMainTickStartValue(),end=xAxis.getMainTickEndValue(),endTimespanMilliSec=0;if(null!==start&&null!==end){endTimespanMilliSec=end-start;let factor=newTimespan/endTimespanMilliSec;if(start+=(endTimespanMilliSec-newTimespan)*((middlePoint.x-offsetLeft)/xLineWidth),end=start+newTimespan,xAxis.setMainTickStartValue(start),xAxis.setMainTickEndValue(end),xAxis.setAutoScaling(!1),this.__lineChart.setHasChanged(!0),this.__lineChart.setLineChanged(!0),this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanXY||this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomXY){if(this.__lineChart&&this.__yAxisSelected){let copyInternalYAxis=this.__yAxisSelected.slice(0,this.__yAxisSelected.length),yAxis=this.__lineChart.getYAxis();if(yAxis&&copyInternalYAxis){for(let i=0,ii=yAxis.length;i<ii;i++){yAxis[i].getDecimalPlaces();let min,max,yAxisAutoscaling=yAxis[i].getAutoScaling(),startOverride=yAxis[i].getMainTickStartValueOverride(),start=yAxis[i].getMainTickStartValue();if(yAxisAutoscaling&&null!==startOverride)min=startOverride;else{if(null===start)continue;min=start}let endOverride=yAxis[i].getMainTickEndValueOverride(),end=yAxis[i].getMainTickEndValue();if(yAxisAutoscaling&&null!==endOverride)max=endOverride;else{if(null===end)continue;max=end}let diff=max-min,newDiff=diff*factor;max-=(diff-newDiff)*((middlePoint.y-offsetTop)/yLineHeight),min=max-newDiff,copyInternalYAxis[i]&&(copyInternalYAxis[i].autoScaling=!1,copyInternalYAxis[i].mainTickMaxValue=max,copyInternalYAxis[i].mainTickMinValue=min),yAxis[i].setAutoScaling(!1),yAxis[i].setMainTickEndValue(max),yAxis[i].setMainTickStartValue(min)}this.__multitouchInfo.newYAxis=copyInternalYAxis}}}else if(this.__lineChart&&this.__yAxisSelected){let copyInternalYAxis=this.__yAxisSelected.slice(0,this.__yAxisSelected.length),yAxis=this.__lineChart.getYAxis();if(null!=yAxis&&copyInternalYAxis){for(let i=0,ii=yAxis.length;i<ii;i++)if(yAxis[i].getAutoScaling()&&copyInternalYAxis[i]){let startOverride=yAxis[i].getMainTickStartValueOverride(),endOverride=yAxis[i].getMainTickEndValueOverride();null!==startOverride&&(copyInternalYAxis[i].mainTickMinValue=startOverride,yAxis[i].setMainTickStartValue(startOverride)),null!==endOverride&&(copyInternalYAxis[i].mainTickMaxValue=endOverride,yAxis[i].setMainTickEndValue(endOverride)),copyInternalYAxis[i].autoScaling=!1,yAxis[i].setAutoScaling(!1)}this.__multitouchInfo.newYAxis=copyInternalYAxis}}this.__lineChart.draw(),this.__multitouchInfo.newStart=start,this.__multitouchInfo.newTimespan=newTimespan}}}}}}this.__multitouchInfo.distance=newDistance}}__userMultitouchEnd(e){if(this.__multitouchInfo.multitouchMode)for(let i=0,ii=e.changedTouches.length;i<ii;i++)if(e.changedTouches[i].identifier===this.__multitouchInfo.first.identifier||e.changedTouches[i].identifier===this.__multitouchInfo.second.identifier){if(null!==this.__multitouchInfo.newStart&&null!==this.__multitouchInfo.newTimespan){let startDate=new Date(this.__multitouchInfo.newStart);if(this.__endDatatype===TcHmiTrendLineChart.Datatype.Datetime){let newEndMilliSec=new Date(startDate.getTime()+this.__multitouchInfo.newTimespan),newEndString=`${newEndMilliSec.getUTCFullYear()}-${("0"+(newEndMilliSec.getUTCMonth()+1)).slice(-2)}-${("0"+newEndMilliSec.getUTCDate()).slice(-2)}T${("0"+newEndMilliSec.getUTCHours()).slice(-2)}:${("0"+newEndMilliSec.getUTCMinutes()).slice(-2)}:${("0"+newEndMilliSec.getUTCSeconds()).slice(-2)}.${("00"+newEndMilliSec.getUTCMilliseconds()).slice(-3)}Z`;this.__internalEnd=newEndString}else this.__internalEnd=this.__milliSecToIso(this.__multitouchInfo.newTimespan);if(this.__startDatatype===TcHmiTrendLineChart.Datatype.Datetime){let newStartString=`${startDate.getUTCFullYear()}-${("0"+(startDate.getUTCMonth()+1)).slice(-2)}-${("0"+startDate.getUTCDate()).slice(-2)}T${("0"+startDate.getUTCHours()).slice(-2)}:${("0"+startDate.getUTCMinutes()).slice(-2)}:${("0"+startDate.getUTCSeconds()).slice(-2)}.${("00"+startDate.getUTCMilliseconds()).slice(-3)}Z`;this.__internalStart=newStartString}else this.__internalStart=this.__milliSecToIso(this.__multitouchInfo.newTimespan);null!==this.__multitouchInfo.newYAxis&&(this.__yAxisSelected=this.__multitouchInfo.newYAxis),this.__openWebsocket()}return void(this.__multitouchInfo={multitouchMode:!1,first:{identifier:null},second:{identifier:null},distance:0,newStart:null,newTimespan:null,newYAxis:null})}}__onMouseWheel(){return e=>{if(!this.__manipulationInfo.isManipulating&&this.getIsEnabled()&&"Latest"!==this.__internalEnd&&"First"!==this.__internalStart&&null!==this.__internalEnd&&null!==this.__internalStart&&null!==this.__lineChart){let basicYAxis=this.__lineChart.getYAxisAtPosition(0);if(basicYAxis){let yAxisWidth=basicYAxis.getAxisWidth();if(null!==yAxisWidth){let boundingRect=e.target.getBoundingClientRect(),x=e.clientX-boundingRect.left,y=e.clientY-boundingRect.top,offsetTop=basicYAxis.getDiffEndLabelAndLine()+yAxisWidth/2+5+this.__lineChart.getDrawingBorder(),xAxis=this.__lineChart.getXAxis(),offsetLeft=0;null!==xAxis&&(offsetLeft=xAxis.getXAxisLeftWidth()||0);let xLineWidth=0;null!==xAxis&&(xLineWidth=xAxis.getLineWidth());let yLineHeight=basicYAxis.getLineHeight();if(x<offsetLeft||x>offsetLeft+xLineWidth||y<offsetTop||y>offsetTop+yLineHeight)return;this.__wheelInfo.isWheeling=!0,this.__wheelInfo.mousePosition={x:x,y:y};let timespan=0;if(null===this.__wheelInfo.timespan){if(null===xAxis)return;{let start=xAxis.getMainTickStartValue(),end=xAxis.getMainTickEndValue();null!==start&&null!==end&&(timespan=end-start)}}else timespan=this.__wheelInfo.timespan;if(timespan>1){let delta;switch(e.deltaMode){case WheelEvent.DOM_DELTA_PAGE:delta=800*-e.deltaY;break;case WheelEvent.DOM_DELTA_LINE:delta=40*-e.deltaY;break;case WheelEvent.DOM_DELTA_PIXEL:default:delta=-e.deltaY}delta=Math.max(-1,Math.min(1,delta)),this.__wheelInfo.wheelSteps=this.__wheelInfo.wheelSteps+delta;let deka=Math.floor(Math.log(timespan)/Math.LN10),newTimespan=timespan*((timespan-delta*Math.pow(10,deka-1)*2)/timespan);newTimespan<1&&(newTimespan=1),this.__wheelInfo.timespan=newTimespan}if(this.__wheelInfo.timeout)return;let __this=this;this.__wheelInfo.timeout=setTimeout((function(){if(null!==__this.__wheelInfo.timespan&&null!==xAxis){let start=xAxis.getMainTickStartValue(),end=xAxis.getMainTickEndValue(),endTimespanMilliSec=0;if(null!==start&&null!==end){endTimespanMilliSec=end-start;let factor=__this.__wheelInfo.timespan/endTimespanMilliSec,mousePositionProcentual=(__this.__wheelInfo.mousePosition.x-offsetLeft)/xLineWidth;start+=(endTimespanMilliSec-__this.__wheelInfo.timespan)*mousePositionProcentual;let date=new Date(start);if(__this.__endDatatype===TcHmiTrendLineChart.Datatype.Datetime){let newEndMilliSec=new Date(date.getTime()+__this.__wheelInfo.timespan),newEndString=`${newEndMilliSec.getUTCFullYear()}-${("0"+(newEndMilliSec.getUTCMonth()+1)).slice(-2)}-${("0"+newEndMilliSec.getUTCDate()).slice(-2)}T${("0"+newEndMilliSec.getUTCHours()).slice(-2)}:${("0"+newEndMilliSec.getUTCMinutes()).slice(-2)}:${("0"+newEndMilliSec.getUTCSeconds()).slice(-2)}.${("00"+newEndMilliSec.getUTCMilliseconds()).slice(-3)}Z`;__this.__internalEnd=newEndString}else __this.__internalEnd=__this.__milliSecToIso(__this.__wheelInfo.timespan);if(__this.__startDatatype===TcHmiTrendLineChart.Datatype.Datetime){let newStartString=`${date.getUTCFullYear()}-${("0"+(date.getUTCMonth()+1)).slice(-2)}-${("0"+date.getUTCDate()).slice(-2)}T${("0"+date.getUTCHours()).slice(-2)}:${("0"+date.getUTCMinutes()).slice(-2)}:${("0"+date.getUTCSeconds()).slice(-2)}.${("00"+date.getUTCMilliseconds()).slice(-3)}Z`;__this.__internalStart=newStartString}else __this.__internalStart=__this.__milliSecToIso(__this.__wheelInfo.timespan);if(__this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanXY||__this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomXY){if(__this.__lineChart&&__this.__yAxisSelected){let yAxis=__this.__lineChart.getYAxis();if(null!=yAxis){let changedYAxis=!1;for(let i=0,ii=yAxis.length;i<ii;i++){yAxis[i].getDecimalPlaces();let min,max,yAxisAutoscaling=yAxis[i].getAutoScaling(),startOverride=yAxis[i].getMainTickStartValueOverride(),start=yAxis[i].getMainTickStartValue();if(yAxisAutoscaling&&null!==startOverride)min=startOverride;else{if(null===start)continue;min=start}let endOverride=yAxis[i].getMainTickEndValueOverride(),end=yAxis[i].getMainTickEndValue();if(yAxisAutoscaling&&null!==endOverride)max=endOverride;else{if(null===end)continue;max=end}let diff=max-min,newDiff=diff*factor;max-=(diff-newDiff)*((__this.__wheelInfo.mousePosition.y-offsetTop)/yLineHeight),min=max-newDiff,null!==__this.__yAxisSelected&&(__this.__yAxisSelected[i].autoScaling=!1,__this.__yAxisSelected[i].mainTickMaxValue=max,__this.__yAxisSelected[i].mainTickMinValue=min,changedYAxis=!0)}changedYAxis&&TcHmi.EventProvider.raise(__this.__id+".onPropertyChanged",{propertyName:"YAxis"})}}}else if(__this.__lineChart&&__this.__yAxisSelected){let yAxis=__this.__lineChart.getYAxis();if(null!=yAxis){let changedYAxis=!1;for(let i=0,ii=yAxis.length;i<ii;i++)if(yAxis[i].getAutoScaling()){let startOverride=yAxis[i].getMainTickStartValueOverride(),endOverride=yAxis[i].getMainTickEndValueOverride();null!==startOverride&&(__this.__yAxisSelected[i].mainTickMinValue=startOverride),null!==endOverride&&(__this.__yAxisSelected[i].mainTickMaxValue=endOverride),__this.__yAxisSelected[i].autoScaling=!1,changedYAxis=!0}changedYAxis&&TcHmi.EventProvider.raise(__this.__id+".onPropertyChanged",{propertyName:"YAxis"})}}__this.__openWebsocket()}}__this.__wheelInfo.timeout&&(clearTimeout(__this.__wheelInfo.timeout),__this.__wheelInfo.timeout=0),__this.__wheelInfo={isWheeling:!1,wheelSteps:0,mousePosition:{x:0,y:0},timespan:null,timeout:0}}),400)}}}}}setXAxisFormat(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XAxisFormat"));let resolverInfo=this.__objectResolvers.get("xAxisFormat");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("xAxisFormat",{resolver:resolver,watchCallback:this.__onResolverForXAxisFormatWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForXAxisFormatWatchCallback)})}getXAxisFormat(){return this.__xAxisFormat}__processXAxisFormat(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setXAxisCallback(this.__xAxisCallbackFunction()),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}__xAxisCallbackFunction(){let __this=this;return function(result){if(void 0!==__this.__xAxisFormat&&null!==__this.__xAxisFormat&&!1!==__this.__xAxisFormat.active){const args=[result];let res=null,f=new TcHmi.Function(__this.__xAxisFormat);if(!f.isProcessedAsync())return f.executeEx(args,(function(data){data.error===TcHmi.Errors.NONE?res=data.result:TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+__this.getId()+"] Execution of function="+__this.__xAxisFormat.fn+" failed with error: "+TcHmi.Log.buildMessage(data.details))})),f.destroy(),res;TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+__this.getId()+"] Execution of function="+__this.__xAxisFormat.fn+" was aborted because it will be processed asynchronous and a synchronous running function call is required. Either the function is running asynchronous by definition or asynchronous running symbols were added to the list of parameters.")}if(isNaN(result)||"number"!=typeof result)return result+"";let actDateTime=new Date(result);return TcHmi.Localization.formatDate(actDateTime)}}stop(){if(this.__lineGraphDescriptionSelected&&0!==this.__lineGraphDescriptionSelected.length&&null!==this.__lineGraphData&&void 0!==this.__lineGraphData&&0!==this.__lineGraphData.length){if(null!==this.__lineChart&&("First"===this.__internalStart||"Latest"===this.__internalEnd)){let xAxis=this.__lineChart.getXAxis();if(null!==xAxis){let start=xAxis.getMainTickStartValue(),end=xAxis.getMainTickEndValue();if(null!==start&&null!==end){if("First"===this.__internalStart){let t=new Date(start);this.__internalStart=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`,this.__startDatatype=TcHmiTrendLineChart.Datatype.Datetime}if("Latest"===this.__internalEnd){let t=new Date(end);this.__internalEnd=`${t.getUTCFullYear()}-${("0"+(t.getUTCMonth()+1)).slice(-2)}-${("0"+t.getUTCDate()).slice(-2)}T${("0"+t.getUTCHours()).slice(-2)}:${("0"+t.getUTCMinutes()).slice(-2)}:${("0"+t.getUTCSeconds()).slice(-2)}.${("00"+t.getUTCMilliseconds()).slice(-3)}Z`,this.__endDatatype=TcHmiTrendLineChart.Datatype.Datetime}}}}this.__startEndBeforeZoom={end:this.__internalEnd,start:this.__internalStart},this.__openWebsocket()}}pause(){this.stop()}resetZoom(){if(this.__yAxis){if(this.__yAxis.length>0&&null!==this.__yAxisSelected)for(let i=0,ii=this.__yAxisSelected.length;i<ii;i++){let id=this.__yAxisSelected[i].id,yAxis=this.__yAxis.filter(x=>x.id===id);if(0===yAxis.length){let themeYAxisGenerated=TcHmi.Theme.Resources.get(this,"YAxisGenerated");themeYAxisGenerated&&null!==themeYAxisGenerated.value?(this.__yAxisSelected[i].autoScaling=themeYAxisGenerated.value.autoScaling,this.__yAxisSelected[i].mainTickMaxValue=themeYAxisGenerated.value.mainTickMaxValue,this.__yAxisSelected[i].mainTickMinValue=themeYAxisGenerated.value.mainTickMinValue):this.__yAxisSelected[i].autoScaling=!0}else this.__yAxisSelected[i].autoScaling=yAxis[0].autoScaling,this.__yAxisSelected[i].mainTickMaxValue=yAxis[0].mainTickMaxValue,this.__yAxisSelected[i].mainTickMinValue=yAxis[0].mainTickMinValue}else if(null!==this.__yAxisSelected)for(let i=0,ii=this.__yAxisSelected.length;i<ii;i++)this.__yAxisSelected[i].autoScaling=!0}else if(null!==this.__yAxisSelected)for(let i=0,ii=this.__yAxisSelected.length;i<ii;i++)this.__yAxisSelected[i].autoScaling=!0;this.__internalEnd!==this.__startEndBeforeZoom.end||this.__internalStart!==this.__startEndBeforeZoom.start?(this.__internalEnd=this.__startEndBeforeZoom.end,this.__internalStart=this.__startEndBeforeZoom.start,null===this.__internalStart?this.__startDatatype=null:this.isDatetime(this.__internalStart)?this.__startDatatype=TcHmiTrendLineChart.Datatype.Datetime:this.isKeyword(this.__internalStart)?this.__startDatatype=TcHmiTrendLineChart.Datatype.Keyword:this.__startDatatype=TcHmiTrendLineChart.Datatype.Timespan,null===this.__internalEnd?this.__endDatatype=null:this.isDatetime(this.__internalEnd)?this.__endDatatype=TcHmiTrendLineChart.Datatype.Datetime:this.isKeyword(this.__internalEnd)?this.__endDatatype=TcHmiTrendLineChart.Datatype.Keyword:this.__endDatatype=TcHmiTrendLineChart.Datatype.Timespan,this.__openWebsocket()):this.__drawLineChart()}reset(){let change=!1;if(this.__internalStart!==this.__start&&this.__start&&(this.__internalStart=this.__start,null===this.__internalStart?this.__startDatatype=null:this.isDatetime(this.__internalStart)?this.__startDatatype=TcHmiTrendLineChart.Datatype.Datetime:this.isKeyword(this.__internalStart)?this.__startDatatype=TcHmiTrendLineChart.Datatype.Keyword:this.__startDatatype=TcHmiTrendLineChart.Datatype.Timespan,change=!0),this.__internalEnd!==this.__end&&this.__end&&(this.__internalEnd=this.__end,null===this.__internalEnd?this.__endDatatype=null:this.isDatetime(this.__internalEnd)?this.__endDatatype=TcHmiTrendLineChart.Datatype.Datetime:this.isKeyword(this.__internalEnd)?this.__endDatatype=TcHmiTrendLineChart.Datatype.Keyword:this.__endDatatype=TcHmiTrendLineChart.Datatype.Timespan,change=!0),this.__lastInteraction=!1,this.__yAxis){if(this.__yAxis.length>0&&null!==this.__yAxisSelected)for(let i=0,ii=this.__yAxisSelected.length;i<ii;i++){let id=this.__yAxisSelected[i].id,yAxis=this.__yAxis.filter(x=>x.id===id);if(0===yAxis.length){let themeYAxisGenerated=TcHmi.Theme.Resources.get(this,"YAxisGenerated");themeYAxisGenerated&&null!==themeYAxisGenerated.value?(this.__yAxisSelected[i].autoScaling=themeYAxisGenerated.value.autoScaling,this.__yAxisSelected[i].mainTickMaxValue=themeYAxisGenerated.value.mainTickMaxValue,this.__yAxisSelected[i].mainTickMinValue=themeYAxisGenerated.value.mainTickMinValue):this.__yAxisSelected[i].autoScaling=!0}else this.__yAxisSelected[i].autoScaling=yAxis[0].autoScaling,this.__yAxisSelected[i].mainTickMaxValue=yAxis[0].mainTickMaxValue,this.__yAxisSelected[i].mainTickMinValue=yAxis[0].mainTickMinValue}else if(null!==this.__yAxisSelected)for(let i=0,ii=this.__yAxisSelected.length;i<ii;i++)this.__yAxisSelected[i].autoScaling=!0}else if(null!==this.__yAxisSelected)for(let i=0,ii=this.__yAxisSelected.length;i<ii;i++)this.__yAxisSelected[i].autoScaling=!0;change&&this.__openWebsocket()}play(){this.reset()}showOptions(){null===this.__elementMenuBarDropdown[0].parentElement?TcHmi.TopMostLayer.add(this,this.__elementMenuBarDropdown,{centerHorizontal:!0,centerVertical:!0}):TcHmi.TopMostLayer.remove(this,this.__elementMenuBarDropdown)}__calcMenuButtons(){if(this.__menuBarControls.length>0){this.__elementMenuBarDropdown.children().detach();for(let k=10,kk=this.__menuBarControls.length-1;k<kk;k++)0===this.__elementMenuBar.find("#"+this.__menuBarControls[k].getId()).length&&this.__elementMenuBar[0].insertBefore(this.__menuBarControls[k].getElement()[0],this.__elementMenuBar.children().last()[0]);let menuBarWidth=this.__elementMenuBar.width(),minWidthMenuBar=0;for(let i=0,ii=11;i<=ii;i++)minWidthMenuBar+=this.__elementMenuBar.children().eq(i).outerWidth(!0);if(minWidthMenuBar+=this.__elementMenuBar.children().last().width()||0,minWidthMenuBar>=menuBarWidth){for(let i=0,ii=this.__menuBarControls.length;i<ii;i++)if(this.__menuBarControls[i]&&("TcHmi.Controls.Beckhoff.TcHmiButton"===this.__menuBarControls[i].getType()||"TcHmi.Controls.Beckhoff.TcHmiToggleButton"===this.__menuBarControls[i].getType())&&-1===this.__menuBarControls[i].getId().search("options")){let menuBarButton=this.__menuBarControls[i];-1===menuBarButton.getId().indexOf("timespan")&&-1===menuBarButton.getId().indexOf("datetime")&&this.__elementMenuBarDropdown[0].appendChild(menuBarButton.getElement()[0])}}else for(let i=10,ii=this.__menuBarControls.length-1;i<ii;i++){if(minWidthMenuBar+=$(this.__elementMenuBar.children()[i+2]).outerWidth(!0),minWidthMenuBar>=menuBarWidth)for(let j=i,jj=this.__menuBarControls.length-1;j<jj;j++){let menuBarButton=this.__menuBarControls[j];-1===menuBarButton.getId().indexOf("timespan")&&-1===menuBarButton.getId().indexOf("datetime")&&this.__elementMenuBarDropdown[0].appendChild(menuBarButton.getElement()[0])}}this.__elementMenuBarDropdown[0].childElementCount>0?this.__menuBarControls[this.__menuBarControls.length-1].setVisibility("Visible"):this.__menuBarControls[this.__menuBarControls.length-1].setVisibility("Collapsed")}}__setMenuButtonsFromStart(){for(let i=0,ii=this.__menuBarControls.length;i<ii;i++)this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_stopButton"?this.__menuBarControls[i].setIsEnabled(!0):this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_panxButton"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_panxyButton"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_zoomxButton"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_zoomxyButton"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_resetZoomButton"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_resetButton"?this.__menuBarControls[i].setIsEnabled(!1):(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_startCombobox"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_endCombobox"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_timespanButtonStart"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_timespanButtonEnd"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_datetimeButtonStart"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_datetimeButtonEnd")&&this.__menuBarControls[i].setIsEnabled(!0)}__setMenuButtonsFromStop(){let isMouseModeActive=!1;for(let i=0,ii=this.__menuBarControls.length;i<ii;i++)if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_stopButton")this.__menuBarControls[i].setIsEnabled(!1);else if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_panxButton"){this.__menuBarControls[i].setIsEnabled(!0),"Active"===this.__menuBarControls[i].getToggleState()&&(isMouseModeActive=!0)}else if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_panxyButton"){this.__menuBarControls[i].setIsEnabled(!0),"Active"===this.__menuBarControls[i].getToggleState()&&(isMouseModeActive=!0)}else if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_zoomxButton"){this.__menuBarControls[i].setIsEnabled(!0),"Active"===this.__menuBarControls[i].getToggleState()&&(isMouseModeActive=!0)}else if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_zoomxyButton"){this.__menuBarControls[i].setIsEnabled(!0),"Active"===this.__menuBarControls[i].getToggleState()&&(isMouseModeActive=!0)}else this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_resetZoomButton"?this.__menuBarControls[i].setIsEnabled(!0):this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_resetButton"?"First"!==this.__start&&"Latest"!==this.__end?this.__menuBarControls[i].setIsEnabled(!1):this.__menuBarControls[i].setIsEnabled(!0):(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_startCombobox"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_endCombobox"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_timespanButtonStart"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_timespanButtonEnd"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_datetimeButtonStart"||this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===this.__id+"_datetimeButtonEnd")&&this.__menuBarControls[i].setIsEnabled(!0);if(!isMouseModeActive){let panxButton=this.__menuBarControls[12];panxButton&&panxButton.getId()===this.__id+"_panxButton"&&panxButton.setToggleState("Active")}}setSectionsBackgroundColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("SectionsBackgroundColor"));let resolverInfo=this.__objectResolvers.get("sectionsBackgroundColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("sectionsBackgroundColor",{resolver:resolver,watchCallback:this.__onResolverForSectionsBackgroundColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForSectionsBackgroundColorWatchCallback)})}getSectionsBackgroundColor(){return this.__sectionsBackgroundColor}__processSectionsBackgroundColor(){TcHmi.StyleProvider.processBackgroundColor(this.__elementMenuBar,this.__sectionsBackgroundColor),TcHmi.StyleProvider.processBackgroundColor(this.__elementChart,this.__sectionsBackgroundColor),TcHmi.StyleProvider.processBackgroundColor(this.__elementLegend,this.__sectionsBackgroundColor)}setYAxisWidth(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("YAxisWidth")),convertedValue!==this.__yAxisWidth&&(this.__yAxisWidth=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YAxisWidth"}),this.__processYAxisWidth())}getYAxisWidth(){return this.__yAxisWidth}__processYAxisWidth(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYAxisWidth(void 0===this.__yAxisWidth?this.getAttributeDefaultValueInternal("YAxisWidth"):this.__yAxisWidth),this.__lineChart.draw())}setYLabelFontFamily(valueNew){let convertedValue=TcHmi.ValueConverter.toFontFamily(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("YLabelFontFamily")),convertedValue!==this.__yLabelFontFamily&&(this.__yLabelFontFamily=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YLabelFontFamily"}),this.__processYLabelFontFamily())}getYLabelFontFamily(){return this.__yLabelFontFamily}__processYLabelFontFamily(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYLabelFontFamily(this.__yLabelFontFamily),this.__lineChart.draw())}setYLabelFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("YLabelFontSize")),convertedValue!==this.__yLabelFontSize&&(this.__yLabelFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YLabelFontSize"}),this.__processYLabelFontSize())}getYLabelFontSize(){return this.__yLabelFontSize}__processYLabelFontSize(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYLabelFontSize(void 0===this.__yLabelFontSize?this.getAttributeDefaultValueInternal("YLabelFontSize"):this.__yLabelFontSize),this.__lineChart.draw())}setYLabelFontSizeUnit(valueNew){}getYLabelFontSizeUnit(){return"px"}setYLabelFontWeight(valueNew){let convertedValue=TcHmi.ValueConverter.toFontWeight(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("YLabelFontWeight")),convertedValue!==this.__yLabelFontWeight&&(this.__yLabelFontWeight=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YLabelFontWeight"}),this.__processYLabelFontWeight())}getYLabelFontWeight(){return this.__yLabelFontWeight}__processYLabelFontWeight(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYLabelFontWeight(void 0===this.__yLabelFontWeight?this.getAttributeDefaultValueInternal("YLabelFontWeight"):this.__yLabelFontWeight),this.__lineChart.draw())}setYMainTickSteps(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("YMainTickSteps")),convertedValue!==this.__yMainTickSteps&&(this.__yMainTickSteps=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YMainTickSteps"}),this.__processYMainTickSteps())}getYMainTickSteps(){return this.__yMainTickSteps}__processYMainTickSteps(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYMainTickSteps(void 0===this.__yMainTickSteps?this.getAttributeDefaultValueInternal("YMainTickSteps"):this.__yMainTickSteps),this.__lineChart.draw())}setShowYSubTicks(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowYSubTicks")),convertedValue!==this.__showYSubTicks&&(this.__showYSubTicks=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowYSubTicks"}),this.__processShowYSubTicks())}getShowYSubTicks(){return this.__showYSubTicks}__processShowYSubTicks(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setShowYSubTicks(void 0===this.__showYSubTicks?this.getAttributeDefaultValueInternal("ShowYSubTicks"):this.__showYSubTicks),this.__lineChart.draw())}setYSubTickSteps(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("YSubTickSteps")),convertedValue!==this.__ySubTickSteps&&(this.__ySubTickSteps=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"YSubTickSteps"}),this.__processYSubTickSteps())}getYSubTickSteps(){return this.__ySubTickSteps}__processYSubTickSteps(){null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__lineChart.setYSubTickSteps(void 0===this.__ySubTickSteps?this.getAttributeDefaultValueInternal("YSubTickSteps"):this.__ySubTickSteps),this.__lineChart.draw())}setShowXAxis(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowXAxis")),convertedValue!==this.__showXAxis&&(this.__showXAxis=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowXAxis"}),this.__processShowXAxis())}getShowXAxis(){return this.__showXAxis}__processShowXAxis(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setShowAxis(void 0===this.__showXAxis?this.getAttributeDefaultValueInternal("ShowXAxis"):this.__showXAxis),xAxis.getShowAxis()?xAxis.setShowLabels(void 0===this.__xShowLabels?this.getAttributeDefaultValueInternal("XShowLabels"):this.__xShowLabels):xAxis.setShowLabels(!1),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXShowLabels(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XShowLabels")),convertedValue!==this.__xShowLabels&&(this.__xShowLabels=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XShowLabels"}),this.__processXShowLabels())}getXShowLabels(){return this.__xShowLabels}__processXShowLabels(){if(!TCHMI_DESIGNER&&null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.getShowAxis()?xAxis.setShowLabels(void 0===this.__xShowLabels?this.getAttributeDefaultValueInternal("XShowLabels"):this.__xShowLabels):xAxis.setShowLabels(!1),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXMainTickSteps(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XMainTickSteps")),convertedValue!==this.__xMainTickSteps&&(this.__xMainTickSteps=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XMainTickSteps"}),this.__processXMainTickSteps())}getXMainTickSteps(){return this.__xMainTickSteps}__processXMainTickSteps(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setMainTickSteps(void 0===this.__xMainTickSteps?this.getAttributeDefaultValueInternal("XMainTickSteps"):this.__xMainTickSteps),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setShowXSubTicks(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowXSubTicks")),convertedValue!==this.__showXSubTicks&&(this.__showXSubTicks=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowXSubTicks"}),this.__processShowXSubTicks())}getShowXSubTicks(){return this.__showXSubTicks}__processShowXSubTicks(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setShowSubTicks(void 0===this.__showXSubTicks?this.getAttributeDefaultValueInternal("ShowXSubTicks"):this.__showXSubTicks),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXSubTickSteps(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XSubTickSteps")),convertedValue!==this.__xSubTickSteps&&(this.__xSubTickSteps=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XSubTickSteps"}),this.__processXSubTickSteps())}getXSubTickSteps(){return this.__xSubTickSteps}__processXSubTickSteps(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setSubTickSteps(void 0===this.__xSubTickSteps?this.getAttributeDefaultValueInternal("XSubTickSteps"):this.__xSubTickSteps),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXLabelFontFamily(valueNew){let convertedValue=TcHmi.ValueConverter.toFontFamily(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XLabelFontFamily")),convertedValue!==this.__xLabelFontFamily&&(this.__xLabelFontFamily=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XLabelFontFamily"}),this.__processXLabelFontFamily())}getXLabelFontFamily(){return this.__xLabelFontFamily}__processXLabelFontFamily(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setLabelFontFamily(this.__xLabelFontFamily),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXLabelFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XLabelFontSize")),convertedValue!==this.__xLabelFontSize&&(this.__xLabelFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XLabelFontSize"}),this.__processXLabelFontSize())}getXLabelFontSize(){return this.__xLabelFontSize}__processXLabelFontSize(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setLabelFontSize(void 0===this.__xLabelFontSize?this.getAttributeDefaultValueInternal("XLabelFontSize"):this.__xLabelFontSize),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXLabelFontSizeUnit(valueNew){}getXLabelFontSizeUnit(){return"px"}setXLabelFontWeight(valueNew){let convertedValue=TcHmi.ValueConverter.toFontWeight(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XLabelFontWeight")),convertedValue!==this.__xLabelFontWeight&&(this.__xLabelFontWeight=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XLabelFontWeight"}),this.__processXLabelFontWeight())}getXLabelFontWeight(){return this.__xLabelFontWeight}__processXLabelFontWeight(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setLabelFontWeight(void 0===this.__xLabelFontWeight?this.getAttributeDefaultValueInternal("XLabelFontWeight"):this.__xLabelFontWeight),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXLabelFontColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XLabelFontColor"));let resolverInfo=this.__objectResolvers.get("xLabelFontColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("xLabelFontColor",{resolver:resolver,watchCallback:this.__onResolverForXLabelFontColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForXLabelFontColorWatchCallback)})}getXLabelFontColor(){return this.__xLabelFontColor}__processXLabelFontColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(TcHmi.isSolidColor(this.__xLabelFontColor)?xAxis.setLabelFontColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__xLabelFontColor)):xAxis.setLabelFontColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisWidth(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XAxisWidth")),convertedValue!==this.__xAxisWidth&&(this.__xAxisWidth=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisWidth"}),this.__processXAxisWidth())}getXAxisWidth(){return this.__xAxisWidth}__processXAxisWidth(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setAxisWidth(void 0===this.__xAxisWidth?this.getAttributeDefaultValueInternal("XAxisWidth"):this.__xAxisWidth),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XAxisColor"));let resolverInfo=this.__objectResolvers.get("xAxisColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("xAxisColor",{resolver:resolver,watchCallback:this.__onResolverForXAxisColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForXAxisColorWatchCallback)})}getXAxisColor(){return this.__xAxisColor}__processXAxisColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(TcHmi.isSolidColor(this.__xAxisColor)?xAxis.setAxisColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__xAxisColor)):xAxis.setAxisColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setShowXAxisName(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowXAxisName")),convertedValue!==this.__showXAxisName&&(this.__showXAxisName=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowXAxisName"}),this.__processShowXAxisName())}getShowXAxisName(){return this.__showXAxisName}__processShowXAxisName(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setShowAxisName(void 0===this.__showXAxisName?this.getAttributeDefaultValueInternal("ShowXAxisName"):this.__showXAxisName),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisName(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XAxisName")),convertedValue!==this.__xAxisName&&(this.__xAxisName=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisName"}),this.__processXAxisName())}getXAxisName(){return this.__xAxisName}__processXAxisName(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setAxisName(void 0===this.__xAxisName?this.getAttributeDefaultValueInternal("XAxisName"):this.__xAxisName),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisNameFontFamily(valueNew){let convertedValue=TcHmi.ValueConverter.toFontFamily(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XAxisNameFontFamily")),convertedValue!==this.__xAxisNameFontFamily&&(this.__xAxisNameFontFamily=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisNameFontFamily"}),this.__processXAxisNameFontFamily())}getXAxisNameFontFamily(){return this.__xAxisNameFontFamily}__processXAxisNameFontFamily(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setAxisNameFontFamily(this.__xAxisNameFontFamily),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisNameFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XAxisNameFontSize")),convertedValue!==this.__xAxisNameFontSize&&(this.__xAxisNameFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisNameFontSize"}),this.__processXAxisNameFontSize())}getXAxisNameFontSize(){return this.__xAxisNameFontSize}__processXAxisNameFontSize(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setAxisNameFontSize(void 0===this.__xAxisNameFontSize?this.getAttributeDefaultValueInternal("XAxisNameFontSize"):this.__xAxisNameFontSize),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisNameFontSizeUnit(valueNew){}getXAxisNameFontSizeUnit(){return"px"}setXAxisNameFontWeight(valueNew){let convertedValue=TcHmi.ValueConverter.toFontWeight(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XAxisNameFontWeight")),convertedValue!==this.__xAxisNameFontWeight&&(this.__xAxisNameFontWeight=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"XAxisNameFontWeight"}),this.__processXAxisNameFontWeight())}getXAxisNameFontWeight(){return this.__xAxisNameFontWeight}__processXAxisNameFontWeight(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(xAxis.setAxisNameFontWeight(void 0===this.__xAxisNameFontWeight?this.getAttributeDefaultValueInternal("XAxisNameFontWeight"):this.__xAxisNameFontWeight),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setXAxisNameFontColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("XAxisNameFontColor"));let resolverInfo=this.__objectResolvers.get("xAxisNameFontColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("xAxisNameFontColor",{resolver:resolver,watchCallback:this.__onResolverForXAxisNameFontColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForXAxisNameFontColorWatchCallback)})}getXAxisNameFontColor(){return this.__xAxisNameFontColor}__processXAxisNameFontColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let xAxis=this.__lineChart.getXAxis();null!=xAxis&&(TcHmi.isSolidColor(this.__xAxisNameFontColor)?xAxis.setAxisNameFontColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__xAxisNameFontColor)):xAxis.setAxisNameFontColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setYAxis(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("YAxis"));let resolverInfo=this.__objectResolvers.get("yAxis");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("yAxis",{resolver:resolver,watchCallback:this.__onResolverForYAxisWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForYAxisWatchCallback)})}getYAxis(){return this.__yAxis}__processYAxis(){if(this.__internalYAxis=[],void 0!==this.__yAxis&&(this.__internalYAxis=JSON.parse(JSON.stringify(this.__yAxis)),null===this.__internalYAxis&&(this.__internalYAxis=[])),this.__internalLineGraphDescription=[],void 0!==this.__lineGraphDescriptions&&(this.__internalLineGraphDescription=JSON.parse(JSON.stringify(this.__lineGraphDescriptions)),null===this.__internalLineGraphDescription&&(this.__internalLineGraphDescription=[])),this.__lineGraphDescriptions)for(let i=0,ii=this.__lineGraphDescriptions.length;i<ii;i++)if(void 0===this.__lineGraphDescriptions[i].yAxisId){let id=-1,exists=!1;do{id++,exists=this.__internalYAxis.filter((function(yAxis){return yAxis.id===id})).length>0}while(exists&&id<=1e3);if(!exists){let themeYAxisGenerated=TcHmi.Theme.Resources.get(this,"YAxisGenerated");themeYAxisGenerated&&null!==themeYAxisGenerated.value?(themeYAxisGenerated.value.id=id,themeYAxisGenerated.value.axisName=this.__lineGraphDescriptions[i].symbol,this.__internalYAxis.push(themeYAxisGenerated.value)):this.__internalYAxis.push({id:id,showAxis:!0,position:TcHmiTrendLineChart.AxisPosition.Left,labelFontColor:{color:"#4794da"},showLabels:!0,axisColor:{color:"#4794da"},showAxisName:!0,axisName:this.__lineGraphDescriptions[i].symbol,axisNameFontFamily:null,axisNameFontSize:15,axisNameFontSizeUnit:"px",axisNameFontWeight:"Bold",axisNameFontColor:{color:"#4794da"},decimalPlaces:2,autoScaling:!0}),this.__internalLineGraphDescription[i].yAxisId=id}}this.__lineGraphDescriptionSelected=this.__internalLineGraphDescription,this.__yAxisSelected=this.__internalYAxis,this.__isAttached&&(this.__createLegend(),null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__drawLineChart(),this.__lineGraphDescriptions&&0!==this.__lineGraphDescriptions.length&&!TCHMI_DESIGNER&&this.__openWebsocket()))}setLineGraphDescriptions(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("LineGraphDescription"));let resolverInfo=this.__objectResolvers.get("lineGraphDescriptions");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("lineGraphDescriptions",{resolver:resolver,watchCallback:this.__onResolverForLineGraphDescriptionsWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForLineGraphDescriptionsWatchCallback)})}getLineGraphDescriptions(){return this.__lineGraphDescriptions}__processLineGraphDescriptions(){if(this.__internalYAxis=[],void 0!==this.__yAxis&&(this.__internalYAxis=JSON.parse(JSON.stringify(this.__yAxis)),null===this.__internalYAxis&&(this.__internalYAxis=[])),this.__internalLineGraphDescription=[],void 0!==this.__lineGraphDescriptions&&(this.__internalLineGraphDescription=JSON.parse(JSON.stringify(this.__lineGraphDescriptions)),null===this.__internalLineGraphDescription&&(this.__internalLineGraphDescription=[])),this.__lineGraphDescriptions)for(let i=0,ii=this.__lineGraphDescriptions.length;i<ii;i++)if(void 0===this.__lineGraphDescriptions[i].yAxisId||null===this.__lineGraphDescriptions[i].yAxisId){let id=-1,exists=!1;do{id++,exists=this.__internalYAxis.filter((function(yAxis){return yAxis.id===id})).length>0}while(exists&&id<=1e3);if(!exists){let themeYAxisGenerated=TcHmi.Theme.Resources.get(this,"YAxisGenerated");themeYAxisGenerated&&null!==themeYAxisGenerated.value?(themeYAxisGenerated.value.id=id,themeYAxisGenerated.value.axisName=this.__lineGraphDescriptions[i].symbol,this.__internalYAxis.push(themeYAxisGenerated.value)):this.__internalYAxis.push({id:id,showAxis:!0,position:TcHmiTrendLineChart.AxisPosition.Left,labelFontColor:{color:"#4794da"},showLabels:!0,axisColor:{color:"#4794da"},showAxisName:!0,axisName:this.__lineGraphDescriptions[i].symbol,axisNameFontFamily:null,axisNameFontSize:15,axisNameFontSizeUnit:"px",axisNameFontWeight:"Bold",axisNameFontColor:{color:"#4794da"},decimalPlaces:2,autoScaling:!0}),this.__internalLineGraphDescription[i].yAxisId=id}}this.__lineGraphDescriptionSelected=this.__internalLineGraphDescription,this.__yAxisSelected=this.__internalYAxis,this.__isAttached&&(this.__createLegend(),null!==this.__lineChart&&void 0!==this.__lineChart&&this.__lineGraphDescriptions&&0!==this.__lineGraphDescriptions.length&&!TCHMI_DESIGNER)?this.__openWebsocket():(null!==this.__subscriptionId&&(TcHmi.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null),this.__reset(),this.__drawLineChart())}setShowGrid(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowGrid")),convertedValue!==this.__showGrid&&(this.__showGrid=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowGrid"}),this.__processShowGrid())}getShowGrid(){return this.__showGrid}__processShowGrid(){if(null!==this.__lineChart&&void 0!==this.__lineChart){if(this.__showGrid){let grid=this.__lineChart.getGrid();null==grid&&(this.__lineChart.addGrid(),grid=this.__lineChart.getGrid(),null!==grid&&(TcHmi.isSolidColor(this.__gridBackgroundColor)?grid.setBackgroundColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__gridBackgroundColor)):grid.setBackgroundColor(null),TcHmi.isSolidColor(this.__gridLineColor)?grid.setLineColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__gridLineColor)):grid.setLineColor(null),grid.setLineWidth(void 0===this.__gridLineWidth?this.getAttributeDefaultValueInternal("GridLineWidth"):this.__gridLineWidth),grid.setLineStyle(void 0===this.__gridLineStyle?this.getAttributeDefaultValueInternal("GridLineStyle"):this.__gridLineStyle),grid.setShowHorizontalLines(void 0===this.__gridShowHorizontalLines?this.getAttributeDefaultValueInternal("GridShowHorizontalLines"):this.__gridShowHorizontalLines),grid.setShowVerticalLines(void 0===this.__gridShowVerticalLines?this.getAttributeDefaultValueInternal("GridShowVerticalLines"):this.__gridShowVerticalLines)))}else this.__lineChart.deleteGrid();this.__lineChart.setHasChanged(!0),this.__lineChart.draw()}}setGridBackgroundColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("GridBackgroundColor"));let resolverInfo=this.__objectResolvers.get("gridBackgroundColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("gridBackgroundColor",{resolver:resolver,watchCallback:this.__onResolverForGridBackgroundColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForGridBackgroundColorWatchCallback)})}getGridBackgroundColor(){return this.__gridBackgroundColor}__processGridBackgroundColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let grid=this.__lineChart.getGrid();null!=grid&&(TcHmi.isSolidColor(this.__gridBackgroundColor)?grid.setBackgroundColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__gridBackgroundColor)):grid.setBackgroundColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setGridShowHorizontalLines(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("GridShowHorizontalLines")),convertedValue!==this.__gridShowHorizontalLines&&(this.__gridShowHorizontalLines=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridShowHorizontalLines"}),this.__processGridShowHorizontalLines())}getGridShowHorizontalLines(){return this.__gridShowHorizontalLines}__processGridShowHorizontalLines(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let grid=this.__lineChart.getGrid();null!=grid&&(grid.setShowHorizontalLines(void 0===this.__gridShowHorizontalLines?this.getAttributeDefaultValueInternal("GridShowHorizontalLines"):this.__gridShowHorizontalLines),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setGridShowVerticalLines(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("GridShowVerticalLines")),convertedValue!==this.__gridShowVerticalLines&&(this.__gridShowVerticalLines=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridShowVerticalLines"}),this.__processGridShowVerticalLines())}getGridShowVerticalLines(){return this.__gridShowVerticalLines}__processGridShowVerticalLines(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let grid=this.__lineChart.getGrid();null!=grid&&(grid.setShowVerticalLines(void 0===this.__gridShowVerticalLines?this.getAttributeDefaultValueInternal("GridShowVerticalLines"):this.__gridShowVerticalLines),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setGridLineWidth(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("GridLineWidth")),convertedValue!==this.__gridLineWidth&&(this.__gridLineWidth=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridLineWidth"}),this.__processGridLineWidth())}getGridLineWidth(){return this.__gridLineWidth}__processGridLineWidth(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let grid=this.__lineChart.getGrid();null!=grid&&(grid.setLineWidth(void 0===this.__gridLineWidth?this.getAttributeDefaultValueInternal("GridLineWidth"):this.__gridLineWidth),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setGridLineStyle(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("GridLineStyle")),convertedValue!==this.__gridLineStyle&&(this.__gridLineStyle=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"GridLineStyle"}),this.__processGridLineStyle())}getGridLineStyle(){return this.__gridLineStyle}__processGridLineStyle(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let grid=this.__lineChart.getGrid();null!=grid&&(grid.setLineStyle(void 0===this.__gridLineStyle?this.getAttributeDefaultValueInternal("GridLineStyle"):this.__gridLineStyle),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setGridLineColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("GridLineColor"));let resolverInfo=this.__objectResolvers.get("gridLineColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("gridLineColor",{resolver:resolver,watchCallback:this.__onResolverForGridLineColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForGridLineColorWatchCallback)})}getGridLineColor(){return this.__gridLineColor}__processGridLineColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let grid=this.__lineChart.getGrid();null!=grid&&(TcHmi.isSolidColor(this.__gridLineColor)?grid.setLineColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__gridLineColor)):grid.setLineColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setSubgridShowHorizontalLines(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("SubgridShowHorizontalLines")),convertedValue!==this.__subgridShowHorizontalLines&&(this.__subgridShowHorizontalLines=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SubgridShowHorizontalLines"}),this.__processSubgridShowHorizontalLines())}getSubgridShowHorizontalLines(){return this.__subgridShowHorizontalLines}__processSubgridShowHorizontalLines(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let subgrid=this.__lineChart.getSubgrid();null!=subgrid&&(subgrid.setShowHorizontalLines(void 0===this.__subgridShowHorizontalLines?this.getAttributeDefaultValueInternal("SubgridShowHorizontalLines"):this.__subgridShowHorizontalLines),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setSubgridShowVerticalLines(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("SubgridShowVerticalLines")),convertedValue!==this.__subgridShowVerticalLines&&(this.__subgridShowVerticalLines=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SubgridShowVerticalLines"}),this.__processSubgridShowVerticalLines())}getSubgridShowVerticalLines(){return this.__subgridShowVerticalLines}__processSubgridShowVerticalLines(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let subgrid=this.__lineChart.getSubgrid();null!=subgrid&&(subgrid.setShowVerticalLines(void 0===this.__subgridShowVerticalLines?this.getAttributeDefaultValueInternal("SubgridShowVerticalLines"):this.__subgridShowVerticalLines),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setSubgridLineWidth(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("SubgridLineWidth")),convertedValue!==this.__subgridLineWidth&&(this.__subgridLineWidth=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SubgridLineWidth"}),this.__processSubgridLineWidth())}getSubgridLineWidth(){return this.__subgridLineWidth}__processSubgridLineWidth(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let subgrid=this.__lineChart.getSubgrid();null!=subgrid&&(subgrid.setLineWidth(void 0===this.__subgridLineWidth?this.getAttributeDefaultValueInternal("SubgridLineWidth"):this.__subgridLineWidth),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setSubgridLineStyle(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("SubgridLineStyle")),convertedValue!==this.__subgridLineStyle&&(this.__subgridLineStyle=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"SubgridLineStyle"}),this.__processSubgridLineStyle())}getSubgridLineStyle(){return this.__subgridLineStyle}__processSubgridLineStyle(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let subgrid=this.__lineChart.getSubgrid();null!=subgrid&&(subgrid.setLineStyle(void 0===this.__subgridLineStyle?this.getAttributeDefaultValueInternal("SubgridLineStyle"):this.__subgridLineStyle),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setSubgridLineColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("SubgridLineColor"));let resolverInfo=this.__objectResolvers.get("subgridLineColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("subgridLineColor",{resolver:resolver,watchCallback:this.__onResolverForSubgridLineColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForSubgridLineColorWatchCallback)})}getSubgridLineColor(){return this.__subgridLineColor}__processSubgridLineColor(){if(null!==this.__lineChart&&void 0!==this.__lineChart){let subgrid=this.__lineChart.getSubgrid();null!=subgrid&&(TcHmi.isSolidColor(this.__subgridLineColor)?subgrid.setLineColor(TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__subgridLineColor)):subgrid.setLineColor(null),this.__lineChart.setHasChanged(!0),this.__lineChart.draw())}}setShowMenuBar(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowMenuBar")),convertedValue!==this.__showMenuBar&&(this.__showMenuBar=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowMenuBar"}),this.__processShowMenuBar())}getShowMenuBar(){return this.__showMenuBar}__processShowMenuBar(){if(this.__isAttached){0===this.__menuBarControls.length&&this.__showMenuBar&&(this.__addMenuBarControls(),this.__calcMenuButtons());this.__calcSizes();this.__showMenuBar&&void 0!==this.__menuBarPosition?TcHmi.StyleProvider.setSimpleElementStyle(this.__elementMenuBar,"display","flex"):this.__elementMenuBar.css("display","none"),this.__showMenuBar&&this.__menuBarPosition?TcHmiTrendLineChart.MenuBarPosition.Bottom===TcHmiTrendLineChart.MenuBarPosition[this.__menuBarPosition]?(this.__elementMenuBar[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-bottom","tchmi-trend-line-chart-template-menu-bar-bottom"),this.__elementMenuBar[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-top","tchmi-trend-line-chart-template-menu-bar-top"),this.__showLegend&&(this.__elementLegend[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-top"),this.__elementLegend[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-bottom"))):(this.__elementMenuBar[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-top","tchmi-trend-line-chart-template-menu-bar-top"),this.__elementMenuBar[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-bottom","tchmi-trend-line-chart-template-menu-bar-bottom"),this.__showLegend&&(this.__elementLegend[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-bottom"),this.__elementLegend[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-top"))):this.__showLegend&&(this.__elementLegend[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-bottom"),this.__elementLegend[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-top")),"First"!==this.__internalStart&&"Latest"!==this.__internalEnd?this.__setMenuButtonsFromStop():this.__setMenuButtonsFromStart(),this.__drawLineChart()}}setMenuBarPosition(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("MenuBarPosition")),tchmi_equal(convertedValue,this.__menuBarPosition)||(this.__menuBarPosition=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarPosition"}),this.__processMenuBarPosition())}getMenuBarPosition(){return this.__menuBarPosition}__processMenuBarPosition(){if(this.__isAttached){if(this.__showMenuBar&&void 0!==this.__menuBarPosition){let sizes=this.__calcSizes();TcHmiTrendLineChart.MenuBarPosition[this.__menuBarPosition]===TcHmiTrendLineChart.MenuBarPosition.Top?this.__elementChart.css({height:sizes.height+"px",top:sizes.top+"px"}):TcHmiTrendLineChart.MenuBarPosition[this.__menuBarPosition]===TcHmiTrendLineChart.MenuBarPosition.Bottom&&(this.__showLegend?this.__elementChart.css({height:sizes.height+"px",top:sizes.top+"px"}):this.__elementChart.css({height:sizes.height+"px",top:"0px"}))}else this.__elementChart.css({height:"calc(100% - 10px)",top:"0px"});this.__menuBarPosition&&this.__showMenuBar?TcHmiTrendLineChart.MenuBarPosition.Bottom===TcHmiTrendLineChart.MenuBarPosition[this.__menuBarPosition]?this.__showMenuBar&&(this.__elementMenuBar[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-bottom","tchmi-trend-line-chart-template-menu-bar-bottom"),this.__elementMenuBar[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-top","tchmi-trend-line-chart-template-menu-bar-top"),this.__showLegend&&(this.__elementLegend[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-top"),this.__elementLegend[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-bottom"))):(this.__elementMenuBar[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-top","tchmi-trend-line-chart-template-menu-bar-top"),this.__elementMenuBar[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-bottom","tchmi-trend-line-chart-template-menu-bar-bottom"),this.__showLegend&&(this.__elementLegend[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-bottom"),this.__elementLegend[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-top"))):this.__showLegend&&(this.__elementLegend[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-bottom"),this.__elementLegend[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-top"))}}setMenuBarLabelFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("MenuBarLabelFontSize")),convertedValue!==this.__menuBarLabelFontSize&&(this.__menuBarLabelFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontSize"}),this.__processMenuBarLabelFontSize())}getMenuBarLabelFontSize(){return this.__menuBarLabelFontSize}__processMenuBarLabelFontSize(calcButtons=!0){TcHmi.StyleProvider.processFontSize(this.__elementMenuBar[0].getElementsByTagName("label"),this.__menuBarLabelFontSize,"px"),this.__isAttached&&calcButtons&&this.__calcMenuButtons()}setMenuBarLabelFontSizeUnit(valueNew){}getMenuBarLabelFontSizeUnit(){return"px"}setMenuBarLabelFontFamily(valueNew){let convertedValue=TcHmi.ValueConverter.toFontFamily(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("MenuBarLabelFontFamily")),convertedValue!==this.__menuBarLabelFontFamily&&(this.__menuBarLabelFontFamily=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontFamily"}),this.__processMenuBarLabelFontFamily())}getMenuBarLabelFontFamily(){return this.__menuBarLabelFontFamily}__processMenuBarLabelFontFamily(calcButtons=!0){TcHmi.StyleProvider.processFontFamily(this.__elementMenuBar[0].getElementsByTagName("label"),void 0===this.__menuBarLabelFontFamily?this.getAttributeDefaultValueInternal("MenuBarLabelFontFamily"):this.__menuBarLabelFontFamily),this.__isAttached&&calcButtons&&this.__calcMenuButtons()}setMenuBarLabelFontStyle(valueNew){let convertedValue=TcHmi.ValueConverter.toFontStyle(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("MenuBarLabelFontStyle")),convertedValue!==this.__menuBarLabelFontStyle&&(this.__menuBarLabelFontStyle=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontStyle"}),this.__processMenuBarLabelFontStyle())}getMenuBarLabelFontStyle(){return this.__menuBarLabelFontStyle}__processMenuBarLabelFontStyle(calcButtons=!0){TcHmi.StyleProvider.processFontStyle(this.__elementMenuBar[0].getElementsByTagName("label"),void 0===this.__menuBarLabelFontStyle?this.getAttributeDefaultValueInternal("MenuBarLabelFontStyle"):this.__menuBarLabelFontStyle),this.__isAttached&&calcButtons&&this.__calcMenuButtons()}setMenuBarLabelFontWeight(valueNew){let convertedValue=TcHmi.ValueConverter.toFontWeight(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("MenuBarLabelFontWeight")),convertedValue!==this.__menuBarLabelFontWeight&&(this.__menuBarLabelFontWeight=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MenuBarLabelFontWeight"}),this.__processMenuBarLabelFontWeight())}getMenuBarLabelFontWeight(){return this.__menuBarLabelFontWeight}__processMenuBarLabelFontWeight(calcButtons=!0){TcHmi.StyleProvider.processFontWeight(this.__elementMenuBar[0].getElementsByTagName("label"),void 0===this.__menuBarLabelFontWeight?this.getAttributeDefaultValueInternal("MenuBarLabelFontWeight"):this.__menuBarLabelFontWeight),this.__isAttached&&calcButtons&&this.__calcMenuButtons()}setMenuBarLabelFontColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("MenuBarLabelFontColor"));let resolverInfo=this.__objectResolvers.get("menuBarLabelFontColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("menuBarLabelFontColor",{resolver:resolver,watchCallback:this.__onResolverForMenuBarLabelFontColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForMenuBarLabelFontColorWatchCallback)})}getMenuBarLabelFontColor(){return this.__menuBarLabelFontColor}__processMenuBarLabelFontColor(calcButtons=!0){TcHmi.StyleProvider.processTextColor(this.__elementMenuBar[0].getElementsByTagName("label"),void 0===this.__menuBarLabelFontColor?this.getAttributeDefaultValueInternal("MenuBarLabelFontColor"):this.__menuBarLabelFontColor),this.__isAttached&&calcButtons&&this.__calcMenuButtons()}setShowTooltip(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowTooltip")),convertedValue!==this.__showTooltip&&(this.__showTooltip=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowTooltip"}),this.__processShowTooltip())}getShowTooltip(){return this.__showTooltip}__processShowTooltip(){}setTooltipFormat(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TooltipFormat"));let resolverInfo=this.__objectResolvers.get("tooltipFormat");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("tooltipFormat",{resolver:resolver,watchCallback:this.__onResolverForTooltipFormatWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForTooltipFormatWatchCallback)})}getTooltipFormat(){return this.__tooltipFormat}__processTooltipFormat(){if(this.__tooltipInformation.show){let tooltipFormat=this.__executeTooltipFormatFunction(this.__tooltipInformation.time,this.__tooltipInformation.points,this.__tooltipInformation.errors);null!==tooltipFormat?this.__elementTooltipText[0].innerHTML=tooltipFormat:this.__elementTooltip.css("visibility","hidden")}}__executeTooltipFormatFunction(time,points,errors){let __this=this;if(void 0!==this.__tooltipFormat&&null!==this.__tooltipFormat&&!1!==this.__tooltipFormat.active){const args=[time,points,errors];let res=null,f=new TcHmi.Function(this.__tooltipFormat);if(!f.isProcessedAsync())return f.executeEx(args,(function(data){data.error===TcHmi.Errors.NONE?res=data.result:TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+__this.getId()+"] Execution of function="+__this.__tooltipFormat.fn+" failed with error: "+TcHmi.Log.buildMessage(data.details))})),f.destroy(),res;TCHMI_CONSOLE_LOG_LEVEL>=1&&TcHmi.Log.error("[Source=Control, Module=TcHmi.Controls.Beckhoff.TcHmiTrendLineChart, Id="+__this.getId()+"] Execution of function="+__this.__tooltipFormat.fn+" was aborted because it will be processed asynchronous and a synchronous running function call is required. Either the function is running asynchronous by definition or asynchronous running symbols were added to the list of parameters.")}let table=document.createElement("table");table.setAttribute("class","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-info-table"),table.setAttribute("border","1");let header=table.createTHead(),body=table.createTBody();if(points.length>0){let tableTime=document.createElement("table");tableTime.setAttribute("class","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-time-table"),tableTime.setAttribute("border","1");let actDateTime=new Date(points[0].point.x),dateString=TcHmi.Localization.formatDate(actDateTime),timeRow=tableTime.insertRow();timeRow.insertCell().textContent="Capture time",timeRow.insertCell().textContent=dateString;let headerRow=header.insertRow();headerRow.appendChild(document.createElement("th")).textContent="Symbol",headerRow.appendChild(document.createElement("th")).textContent="Value";let row=body.insertRow();return row.insertCell().appendChild(document.createTextNode(points[0].symbolname)),row.insertCell().appendChild(document.createTextNode(points[0].point.y.toString())),tableTime.outerHTML+table.outerHTML}if(errors.length>0){let tableTime=document.createElement("table");tableTime.setAttribute("class","TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-tooltip-time-table"),tableTime.setAttribute("border","1");let actDateTime=new Date(time),dateString=TcHmi.Localization.formatDate(actDateTime),timeRow=tableTime.insertRow();timeRow.insertCell().textContent="Time",timeRow.insertCell().textContent=dateString,header.insertRow().appendChild(document.createElement("th")).textContent="Symbol(s) in error";for(let j=0,jj=errors.length;j<jj;j++){body.insertRow().insertCell().appendChild(document.createTextNode(errors[j].symbolname))}return tableTime.outerHTML+table.outerHTML}return""}setTooltipFontFamily(valueNew){let convertedValue=TcHmi.ValueConverter.toFontFamily(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TooltipFontFamily")),convertedValue!==this.__tooltipFontFamily&&(this.__tooltipFontFamily=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFontFamily"}),this.__processTooltipFontFamily())}getTooltipFontFamily(){return this.__tooltipFontFamily}__processTooltipFontFamily(){TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTooltip,{"font-family":this.__tooltipFontFamily})}setTooltipFontSize(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TooltipFontSize")),convertedValue!==this.__tooltipFontSize&&(this.__tooltipFontSize=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFontSize"}),this.__processTooltipFontSize())}getTooltipFontSize(){return this.__tooltipFontSize}__processTooltipFontSize(){this.__tooltipFontSize&&TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTooltip,{"font-size":this.__tooltipFontSize+"px"})}setTooltipFontSizeUnit(valueNew){}getTooltipFontSizeUnit(){return"px"}setTooltipFontWeight(valueNew){let convertedValue=TcHmi.ValueConverter.toFontWeight(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TooltipFontWeight")),convertedValue!==this.__tooltipFontWeight&&(this.__tooltipFontWeight=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"TooltipFontWeight"}),this.__processTooltipFontWeight())}getTooltipFontWeight(){return this.__tooltipFontWeight}__processTooltipFontWeight(){TcHmi.StyleProvider.setSimpleElementStyle(this.__elementTooltip,{"font-weight":this.__tooltipFontWeight})}setTooltipFontColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TooltipFontColor"));let resolverInfo=this.__objectResolvers.get("tooltipFontColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("tooltipFontColor",{resolver:resolver,watchCallback:this.__onResolverForTooltipFontColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForTooltipFontColorWatchCallback)})}getTooltipFontColor(){return this.__tooltipFontColor}__processTooltipFontColor(){let lineColorGraph=null,themeTooltipFontColor=TcHmi.Theme.Resources.get(this,"TooltipFontColor");if(themeTooltipFontColor&&null!==themeTooltipFontColor.value){let tempColor=themeTooltipFontColor.value;TcHmi.isSolidColor(tempColor)&&(lineColorGraph=TcHmi.StyleProvider.resolveSolidColorAsCssValue(tempColor))}TcHmi.isSolidColor(this.__tooltipFontColor)&&(lineColorGraph=TcHmi.StyleProvider.resolveSolidColorAsCssValue(this.__tooltipFontColor)),null!=lineColorGraph&&this.__elementTooltipText.css("color",lineColorGraph)}setTooltipBackgroundColor(valueNew){let convertedValue=TcHmi.ValueConverter.toObject(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("TooltipBackgroundColor"));let resolverInfo=this.__objectResolvers.get("tooltipBackgroundColor");resolverInfo&&(resolverInfo.watchDestroyer&&resolverInfo.watchDestroyer(),resolverInfo.resolver.destroy());let resolver=new TcHmi.Symbol.ObjectResolver(convertedValue);this.__objectResolvers.set("tooltipBackgroundColor",{resolver:resolver,watchCallback:this.__onResolverForTooltipBackgroundColorWatchCallback,watchDestroyer:resolver.watch(this.__onResolverForTooltipBackgroundColorWatchCallback)})}getTooltipBackgroundColor(){return this.__tooltipBackgroundColor}__processTooltipBackgroundColor(){TcHmi.StyleProvider.processBackgroundColor(this.__elementTooltipText,this.__tooltipBackgroundColor),TcHmi.StyleProvider.processBackgroundColor(this.__elementTooltipArrow,this.__tooltipBackgroundColor)}setInterval(valueNew){let convertedValue=TcHmi.ValueConverter.toNumber(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Interval")),convertedValue!==this.__interval&&(this.__interval=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Interval"}),this.__processInterval())}getInterval(){return this.__interval}__processInterval(){this.__isAttached&&this.__lineGraphDescriptionSelected&&this.__lineGraphDescriptionSelected.length>0&&null!==this.__subscriptionId?this.__openWebsocket():null!==this.__subscriptionId&&(TcHmi.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null)}setStart(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("Start")),null!==convertedValue&&(convertedValue="first"===convertedValue.toLowerCase()?"First":convertedValue.toUpperCase()),convertedValue!==this.__start&&(this.__start=convertedValue,null===this.__start?this.__startDatatype=null:this.isDatetime(this.__start)?this.__startDatatype=TcHmiTrendLineChart.Datatype.Datetime:this.isKeyword(this.__start)?this.__startDatatype=TcHmiTrendLineChart.Datatype.Keyword:this.__startDatatype=TcHmiTrendLineChart.Datatype.Timespan,this.__start!==this.__internalStart&&(this.__internalStart=this.__start,"First"===this.__internalStart&&this.__internalEnd!==this.__end&&void 0!==this.__end&&(this.__internalEnd=this.__end)),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"Start"}),this.__processStart())}getStart(){return this.__start}getActualStartTime(){return this.__actualStartTime?new Date(this.__actualStartTime).toISOString():null}__processStart(){if(null!==this.__menuBarControls[0]&&void 0!==this.__menuBarControls[0]&&this.__start)if(this.isDatetime(this.__start)){let localizedStart=this.__moveUtcToTimeZone(this.__start);this.__menuBarControls[0].setText(localizedStart)}else this.__menuBarControls[0].setText(this.__start);if(this.__start&&this.__end&&"Latest"!==this.__end&&"First"!==this.__start&&(this.__startEndBeforeZoom={end:this.__end,start:this.__start}),this.__isAttached&&this.__start){let nowisValueChanged=this.__nowIsValueChanged;if(this.__nowIsValueChanged=!0,this.__startDatatype===TcHmiTrendLineChart.Datatype.Datetime)this.__menuBarControls[1]&&this.__menuBarControls[3]&&(this.__menuBarControls[1].setValue(null),this.__menuBarControls[3].setValue(this.__start));else if(this.__startDatatype===TcHmiTrendLineChart.Datatype.Timespan)this.__menuBarControls[1]&&this.__menuBarControls[3]&&(this.__menuBarControls[1].setValue(this.__start),this.__menuBarControls[3].setValue(null));else if(this.__menuBarControls[1]&&this.__menuBarControls[3]&&this.__menuBarControls[0]){this.__menuBarControls[1].setValue(null),this.__menuBarControls[3].setValue(null);let combobox=this.__menuBarControls[0];combobox.setText(null),combobox.setSelectedIndex(0)}if(this.__nowIsValueChanged=nowisValueChanged,this.__lineGraphDescriptionSelected&&this.__lineGraphDescriptionSelected.length>0)return void this.__openWebsocket()}null!==this.__subscriptionId&&(TcHmi.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null)}setEnd(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("End")),null!==convertedValue&&(convertedValue="latest"===convertedValue.toLowerCase()?"Latest":convertedValue.toUpperCase()),convertedValue!==this.__end&&(this.__end=convertedValue,null===this.__end?this.__endDatatype=null:this.isDatetime(this.__end)?this.__endDatatype=TcHmiTrendLineChart.Datatype.Datetime:this.isKeyword(this.__end)?this.__endDatatype=TcHmiTrendLineChart.Datatype.Keyword:this.__endDatatype=TcHmiTrendLineChart.Datatype.Timespan,this.__end!==this.__internalEnd&&(this.__internalEnd=this.__end,"Latest"===this.__internalEnd&&this.__internalStart!==this.__start&&void 0!==this.__start&&(this.__internalStart=this.__start)),TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"End"}),this.__processEnd())}getEnd(){return this.__end}getActualEndTime(){return this.__actualEndTime?new Date(this.__actualEndTime).toISOString():null}__moveUtcToTimeZone(isoString){const dateSplitted=TcHmi.Localization.parseDate(new Date(isoString)),dateAsUtc=Date.UTC(dateSplitted.year,dateSplitted.month-1,dateSplitted.day,dateSplitted.hour,dateSplitted.minute,dateSplitted.second,dateSplitted.millisecond),date=new Date(isoString);return this.__utcOffset=date.valueOf()-dateAsUtc,dateSplitted.year+"-"+("0"+dateSplitted.month).slice(-2)+"-"+("0"+dateSplitted.day).slice(-2)+"T"+("0"+dateSplitted.hour).slice(-2)+":"+("0"+dateSplitted.minute).slice(-2)+":"+("0"+dateSplitted.second).slice(-2)+"."+("00"+dateSplitted.millisecond).slice(-3)}__moveTimeZoneToUtc(timeZoneIsoString){const dateAndTime=timeZoneIsoString.split("T");if(2!==dateAndTime.length)return null;const dateStrArr=dateAndTime[0].split("-");if(3!==dateStrArr.length)return null;const dateNum={};if(dateNum.year=TcHmi.Localization.parseInt(dateStrArr[0]),isNaN(dateNum.year))return null;if(dateNum.month=TcHmi.Localization.parseInt(dateStrArr[1]),isNaN(dateNum.month))return null;if(dateNum.day=TcHmi.Localization.parseInt(dateStrArr[2]),isNaN(dateNum.day))return null;const timeStrArr=dateAndTime[1].split(":");if(2===timeStrArr.length)timeStrArr[2]="0.0";else if(3!==timeStrArr.length)return null;if(dateNum.hour=TcHmi.Localization.parseInt(timeStrArr[0]),isNaN(dateNum.hour))return null;if(dateNum.minute=TcHmi.Localization.parseInt(timeStrArr[1]),isNaN(dateNum.minute))return null;const secStrArr=timeStrArr[2].split(".");if(1===secStrArr.length)secStrArr[1]="0";else if(2!==secStrArr.length)return null;if(dateNum.second=TcHmi.Localization.parseInt(secStrArr[0]),isNaN(dateNum.second))return null;if(dateNum.millisecond=TcHmi.Localization.parseInt(secStrArr[1]),isNaN(dateNum.millisecond))return null;const msInUtc=Date.UTC(dateNum.year,dateNum.month-1,dateNum.day,dateNum.hour,dateNum.minute,dateNum.second,dateNum.millisecond);return new Date(msInUtc+this.__utcOffset).toISOString()}__processEnd(){if(null!==this.__menuBarControls[5]&&void 0!==this.__menuBarControls[5]&&this.__end)if(this.isDatetime(this.__end)){let localizedEnd=this.__moveUtcToTimeZone(this.__end);this.__menuBarControls[5].setText(localizedEnd)}else this.__menuBarControls[5].setText(this.__end);if(this.__start&&this.__end&&"Latest"!==this.__end&&"First"!==this.__start&&(this.__startEndBeforeZoom={end:this.__end,start:this.__start}),this.__isAttached&&this.__end){let nowisValueChanged=this.__nowIsValueChanged;if(this.__nowIsValueChanged=!0,this.__endDatatype===TcHmiTrendLineChart.Datatype.Datetime)this.__menuBarControls[6]&&this.__menuBarControls[8]&&(this.__menuBarControls[6].setValue(null),this.__menuBarControls[8].setValue(this.__end));else if(this.__endDatatype===TcHmiTrendLineChart.Datatype.Timespan)this.__menuBarControls[6]&&this.__menuBarControls[8]&&(this.__menuBarControls[6].setValue(this.__end),this.__menuBarControls[8].setValue(null));else if(this.__menuBarControls[6]&&this.__menuBarControls[8]&&this.__menuBarControls[5]){this.__menuBarControls[6].setValue(null),this.__menuBarControls[8].setValue(null);let combobox=this.__menuBarControls[5];combobox.setText(null),combobox.setSelectedIndex(0)}if(this.__nowIsValueChanged=nowisValueChanged,this.__lineGraphDescriptionSelected&&this.__lineGraphDescriptionSelected.length>0)return void this.__openWebsocket()}null!==this.__subscriptionId&&(TcHmi.Server.unsubscribe(this.__subscriptionId,null),this.__subscriptionId=null)}setMouseMode(valueNew){let convertedValue=TcHmi.ValueConverter.toEnum(valueNew,TcHmiTrendLineChart.MouseMode);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("MouseMode")),tchmi_equal(convertedValue,this.__mouseMode)||(this.__mouseMode=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"MouseMode"}),this.__processMouseMode())}getMouseMode(){return this.__mouseMode}__processMouseMode(){let searchId=this.__id+"_panxButton";this.__mouseMode===TcHmiTrendLineChart.MouseMode.PanXY?searchId=this.__id+"_panxyButton":this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomX?searchId=this.__id+"_zoomxButton":this.__mouseMode===TcHmiTrendLineChart.MouseMode.ZoomXY&&(searchId=this.__id+"_zoomxyButton");for(let i=0,ii=this.__menuBarControls.length;i<ii;i++)if(this.__menuBarControls[i]&&this.__menuBarControls[i].getId()===searchId){this.__menuBarControls[i].setToggleState("Active")}}setServerDomain(valueNew){let convertedValue=TcHmi.ValueConverter.toString(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ServerDomain")),tchmi_equal(convertedValue,this.__serverDomain)||(this.__serverDomain=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ServerDomain"}),this.__processServerDomain())}getServerDomain(){return this.__serverDomain}__processServerDomain(){this.__getData()}__processIsEnabled(){super.__processIsEnabled(),this.getIsEnabled()||TcHmi.TopMostLayer.remove(this,this.__elementMenuBarDropdown)}setShowLegend(valueNew){let convertedValue=TcHmi.ValueConverter.toBoolean(valueNew);null===convertedValue&&(convertedValue=this.getAttributeDefaultValueInternal("ShowLegend")),convertedValue!==this.__showLegend&&(this.__showLegend=convertedValue,TcHmi.EventProvider.raise(this.__id+".onPropertyChanged",{propertyName:"ShowLegend"}),this.__processShowLegend())}getShowLegend(){return this.__showLegend}__processShowLegend(){if(this.__internalYAxis=[],void 0!==this.__yAxis&&(this.__internalYAxis=JSON.parse(JSON.stringify(this.__yAxis)),null===this.__internalYAxis&&(this.__internalYAxis=[])),this.__internalLineGraphDescription=[],void 0!==this.__lineGraphDescriptions&&(this.__internalLineGraphDescription=JSON.parse(JSON.stringify(this.__lineGraphDescriptions)),null===this.__internalLineGraphDescription&&(this.__internalLineGraphDescription=[])),this.__lineGraphDescriptions)for(let i=0,ii=this.__lineGraphDescriptions.length;i<ii;i++)if(void 0===this.__lineGraphDescriptions[i].yAxisId){let id=-1,exists=!1;do{id++,exists=this.__internalYAxis.filter((function(yAxis){return yAxis.id===id})).length>0}while(exists&&id<=1e3);if(!exists){let themeYAxisGenerated=TcHmi.Theme.Resources.get(this,"YAxisGenerated");themeYAxisGenerated&&null!==themeYAxisGenerated.value?(themeYAxisGenerated.value.id=id,themeYAxisGenerated.value.axisName=this.__lineGraphDescriptions[i].symbol,this.__internalYAxis.push(themeYAxisGenerated.value)):this.__internalYAxis.push({id:id,showAxis:!0,position:TcHmiTrendLineChart.AxisPosition.Left,labelFontColor:{color:"#4794da"},showLabels:!0,axisColor:{color:"#4794da"},showAxisName:!0,axisName:this.__lineGraphDescriptions[i].symbol,axisNameFontFamily:null,axisNameFontSize:15,axisNameFontSizeUnit:"px",axisNameFontWeight:"Bold",axisNameFontColor:{color:"#4794da"},decimalPlaces:2,autoScaling:!0}),this.__internalLineGraphDescription[i].yAxisId=id}}this.__lineGraphDescriptionSelected=this.__internalLineGraphDescription,this.__yAxisSelected=this.__internalYAxis,this.__showMenuBar&&this.__menuBarPosition?TcHmiTrendLineChart.MenuBarPosition.Bottom===TcHmiTrendLineChart.MenuBarPosition[this.__menuBarPosition]?(this.__elementMenuBar[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-bottom","tchmi-trend-line-chart-template-menu-bar-bottom"),this.__elementMenuBar[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-top","tchmi-trend-line-chart-template-menu-bar-top"),this.__showLegend&&(this.__elementLegend[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-top"),this.__elementLegend[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-bottom"))):(this.__elementMenuBar[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-top","tchmi-trend-line-chart-template-menu-bar-top"),this.__elementMenuBar[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-menu-bar-bottom","tchmi-trend-line-chart-template-menu-bar-bottom"),this.__showLegend&&(this.__elementLegend[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-bottom"),this.__elementLegend[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-top"))):this.__showLegend&&(this.__elementLegend[0].classList.add("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-bottom"),this.__elementLegend[0].classList.remove("TcHmi_Controls_Beckhoff_TcHmiTrendLineChart-template-legend-top")),this.__isAttached&&(this.__createLegend(),null!==this.__lineChart&&void 0!==this.__lineChart&&(this.__drawLineChart(),this.__lineGraphDescriptions&&0!==this.__lineGraphDescriptions.length&&!TCHMI_DESIGNER&&this.__openWebsocket()))}}Beckhoff.TcHmiTrendLineChart=TcHmiTrendLineChart,function(TcHmiTrendLineChart){let MouseMode,MenuBarPosition,Datatype,AxisPosition,LineStyle;!function(MouseMode){MouseMode[MouseMode.ZoomX=0]="ZoomX",MouseMode[MouseMode.ZoomXY=1]="ZoomXY",MouseMode[MouseMode.PanX=2]="PanX",MouseMode[MouseMode.PanXY=3]="PanXY"}(MouseMode=TcHmiTrendLineChart.MouseMode||(TcHmiTrendLineChart.MouseMode={})),function(MenuBarPosition){MenuBarPosition[MenuBarPosition.Bottom=0]="Bottom",MenuBarPosition[MenuBarPosition.Top=1]="Top"}(MenuBarPosition=TcHmiTrendLineChart.MenuBarPosition||(TcHmiTrendLineChart.MenuBarPosition={})),function(Datatype){Datatype[Datatype.Datetime=0]="Datetime",Datatype[Datatype.Timespan=1]="Timespan",Datatype[Datatype.Keyword=2]="Keyword"}(Datatype=TcHmiTrendLineChart.Datatype||(TcHmiTrendLineChart.Datatype={})),function(AxisPosition){AxisPosition[AxisPosition.Left=0]="Left",AxisPosition[AxisPosition.Right=1]="Right"}(AxisPosition=TcHmiTrendLineChart.AxisPosition||(TcHmiTrendLineChart.AxisPosition={})),function(LineStyle){LineStyle[LineStyle.Dotted=0]="Dotted",LineStyle[LineStyle.Dashed=1]="Dashed",LineStyle[LineStyle.Solid=2]="Solid"}(LineStyle=TcHmiTrendLineChart.LineStyle||(TcHmiTrendLineChart.LineStyle={}))}(TcHmiTrendLineChart=Beckhoff.TcHmiTrendLineChart||(Beckhoff.TcHmiTrendLineChart={}))}(Beckhoff=Controls.Beckhoff||(Controls.Beckhoff={}))}(Controls=TcHmi.Controls||(TcHmi.Controls={}))}(TcHmi||(TcHmi={})),TcHmi.Controls.registerEx("TcHmiTrendLineChart","TcHmi.Controls.Beckhoff",TcHmi.Controls.Beckhoff.TcHmiTrendLineChart);